{"version":3,"sources":["serviceWorker.js","components/App/firebase.js","components/Navigation/index.js","constants/routes.js","components/Login/index.js","components/Home/itemTable.js","components/Home/stepDetail.js","components/Home/documentDetail.js","components/Home/topicDetail.js","components/Home/HomeDetail.js","components/Home/animationCanvas.js","components/Home/animationStepDetail.js","components/Home/animationDetail.js","components/Home/index.js","components/App/index.js","index.js"],"names":["Boolean","window","location","hostname","match","sharedFirebase","firebase","initializeApp","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","measurementId","Navigation","props","Menu","inverted","this","editAnimation","fixed","Item","to","onClick","auth","signOut","React","Component","Login","state","user","currentUser","onAuthStateChanged","console","log","setState","bind","uiConfig","signInFlow","callbacks","signInSuccessWithAuthResult","authResult","redirectUrl","signInOptions","GoogleAuthProvider","PROVIDER_ID","EmailAuthProvider","Grid","container","stackable","verticalAlign","Row","Column","width","Header","size","style","fontWeight","marginTop","marginLeft","marginBottom","firebaseAuth","ItemTable","loading","type","getCellContent","getAddButtonLabel","cellClicked","item","TOPIC_NAME","DOCUMENT_NAME","PAGE_NUMBER","DESCRIPTION","id","setSelected","items","Table","celled","disabled","isUploading","HeaderCell","singleLine","title","Body","padded","map","cursor","key","Cell","warning","selected","changed","has","backgroundColor","color","Icon","name","IMAGE_URL","Button","setKeyValue","Footer","fullWidth","colSpan","floated","icon","labelPosition","primary","add","StepDetail","documentOptions","Object","values","documentList","document","topicList","TOPIC_ID","text","value","sort","a","b","Form","Group","widths","Field","control","Input","label","step","options","Select","children","htmlFor","DOCUMENT_ID","onChange","e","isNaN","newPageNumber","parseInt","TYPE","TextArea","TEXT","CHOICES","ANSWER","ANSWER_EXPLANATION","paddingBottom","trim","split","filter","choice","toLowerCase","Label","margin","as","Segment","Image","fluid","draggable","src","Progress","percent","progress","indicating","padding","paddingLeft","paddingRight","borderRadius","accept","randomizeFilename","hidden","storageRef","storage","ref","onUploadStart","uploadHelpers","handleUploadStart","onUploadError","handleUploadError","onUploadSuccess","filename","handleUploadSuccess","onProgress","handleProgress","content","IMAGE_SUBTITLE","update","DocumentDetail","topicOptions","topic","DIFFICULTY","difficulty","pageNumber","INTRODUCTION","TopicDetail","HomeDetail","topicSelected","documentSelected","stepSelected","lists","stepList","stepCount","filterStepList","length","textAlign","AnimationCanvas","height","offsetWidth","offsetHeight","el","zIndex","position","onStart","bounds","onStop","x","y","onControlledDragStop","start","START_POSITION_X","END_POSITION_X","START_POSITION_Y","END_POSITION_Y","SIZE","outline","AnimationStepDetail","changeStartEnd","_","data","checked","compact","Checkbox","paddingTop","marginRight","slider","className","top","left","STEP_ID","AnimationDetail","_step","animationItemList","filterAnimationList","Home","admin","edit","email","filterDocumentList","doc","columns","stretched","created","parent","animationItemSelected","displayName","App","prop","animationItem","currentVersion","Set","load","updateAll","db","firestore","error","alert","collection","child","getDownloadURL","then","url","_changed","_topicList","_documentList","_stepList","_animationItemList","keys","includes","topicID","documentID","_topic","_document","collectionName","Date","getTime","available_scope","docRef","set","forEach","delete","Promise","all","get","topicSnapshots","documentSnapshots","stepSnapshots","animationItemSnapshots","thisDoc","onbeforeunload","preventDefault","returnValue","exact","path","render","backgroundImage","onkeydown","event","ctrlKey","which","keyCode","stopPropagation","ReactDOM","Responsive","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"mRAYoBA,QACW,cAA7BC,OAAOC,SAASC,UAEe,UAA7BF,OAAOC,SAASC,UAEhBF,OAAOC,SAASC,SAASC,MACvB,2D,qFCNSC,EADQC,IAASC,cAVjB,CACbC,OAAQ,0CACRC,WAAY,2BACZC,YAAa,kCACbC,UAAW,WACXC,cAAe,uBACfC,kBAAmB,eACnBC,MAAO,4CACPC,cAAe,iB,yBCqBFC,E,YAxBb,WAAYC,GAAQ,qEACZA,I,sEAGN,OACE,kBAACC,EAAA,EAAD,CAAMC,SAAUC,KAAKH,MAAMI,cAAeC,MAAM,OAC9C,kBAACJ,EAAA,EAAKK,KAAN,KACE,kBAAC,IAAD,CACEC,GCdS,IDeTC,QAAS,WACPnB,IAASoB,OAAOC,YAHpB,aASF,kBAACT,EAAA,EAAKK,KAAN,CAAWC,GCrBC,SDsBV,kBAAC,IAAD,mB,GAlBeI,IAAMC,W,oCEmEhBC,E,YAjEb,WAAYb,GAAQ,IAAD,8BACjB,4CAAMA,KACDc,MAAQ,CAAEC,KAAM1B,IAASoB,OAAOO,aACrC3B,IAASoB,OAAOQ,mBACd,SAASF,GACHA,GACFG,QAAQC,IAAI,WAAYJ,GACxBZ,KAAKiB,SAAS,CAAEL,KAAMA,MAEtBG,QAAQC,IAAI,WAAY,MACxBhB,KAAKiB,SAAS,CAAEL,KAAM,SAExBM,KARF,iBAJe,E,sEAgBjB,GAAIlB,KAAKW,MAAMC,KACb,OAAO,kBAAC,IAAD,CAAUR,GAAG,UAGtB,IAAMe,EAAW,CACfC,WAAY,QACZC,UAAW,CACTC,4BAA6B,SAASC,EAAYC,GAChD,OAAO,IAIXC,cAAe,CACbvC,IAASoB,KAAKoB,mBAAmBC,YACjCzC,IAASoB,KAAKsB,kBAAkBD,cAIpC,OACE,6BACE,kBAACE,EAAA,EAAD,CAAMC,WAAS,EAACC,WAAS,EAACC,cAAc,OACtC,kBAACH,EAAA,EAAKI,IAAN,KACE,kBAACJ,EAAA,EAAKK,OAAN,CAAaC,MAAO,IACpB,kBAACN,EAAA,EAAKK,OAAN,CAAaC,MAAO,GAClB,kBAACC,EAAA,EAAD,CACEC,KAAK,OACLC,MAAO,CACLC,WAAY,SACZC,UAAW,MACXC,WAAY,MACZC,aAAc,QANlB,SAYA,kBAAC,IAAD,CACEvB,SAAUA,EACVwB,aAAczD,IAASoB,UAG3B,kBAACuB,EAAA,EAAKK,OAAN,CAAaC,MAAO,W,GA1DZ3B,IAAMC,W,0BCmLXmC,E,YAtLb,WAAY/C,GAAQ,IAAD,8BACjB,4CAAMA,KACDc,MAAQ,CAAEkC,QAAShD,EAAMgD,QAASC,KAAMjD,EAAMiD,MACnD,EAAKC,eAAiB,EAAKA,eAAe7B,KAApB,gBACtB,EAAK8B,kBAAoB,EAAKA,kBAAkB9B,KAAvB,gBACzB,EAAK+B,YAAc,EAAKA,YAAY/B,KAAjB,gBALF,E,4EAQJgC,GACb,OAAQlD,KAAKW,MAAMmC,MACjB,KAAK,EACH,OAAOI,EAAKC,WACd,KAAK,EACH,OAAOD,EAAKE,cACd,KAAK,EACH,MAAM,QAAN,OAAeF,EAAKG,YAAc,GACpC,QACE,OAAOH,EAAKI,e,0CAKhB,OAAQtD,KAAKW,MAAMmC,MACjB,KAAK,EACH,MAAO,YACT,KAAK,EACH,MAAO,eACT,KAAK,EACH,MAAO,WACT,QACE,MAAO,wB,kCAIDS,GACVvD,KAAKH,MAAM2D,YAAYD,K,kDAInBvD,KAAKW,MAAMkC,SACb7C,KAAKiB,SAAS,CAAE4B,SAAS,M,+BAInB,IAAD,OAEP,OADA9B,QAAQC,IAAI,qBAAsBhB,KAAKH,MAAM4D,OAE3C,kBAACC,EAAA,EAAD,CACEC,QAAM,EACNC,SAAU5D,KAAKH,MAAMgE,YACrB9D,SAAUC,KAAKH,MAAMI,eAErB,kBAACyD,EAAA,EAAMtB,OAAP,KACE,kBAACsB,EAAA,EAAMzB,IAAP,KACE,kBAACyB,EAAA,EAAMI,WAAP,CAAkBC,YAAU,GAAE/D,KAAKH,MAAMmE,OACpB,IAApBhE,KAAKH,MAAMiD,KACV,kBAACY,EAAA,EAAMI,WAAP,aAEA,MAKN,kBAACJ,EAAA,EAAMO,KAAP,CAAYC,QAAM,GACflE,KAAKH,MAAM4D,MAAMU,KAAI,SAAAjB,GAAI,OACxB,kBAACQ,EAAA,EAAMzB,IAAP,CACEK,MAAO,CAAE8B,OAAQ,WACjBC,IAAKnB,EAAKK,GACVlD,QAAS,WACFL,KAAKH,MAAMgE,aACd7D,KAAKiD,YAAYC,EAAKK,KAExBrC,KAAK,IAEP,kBAACwC,EAAA,EAAMY,KAAP,CACEC,QACE,EAAK1E,MAAM2E,WAAatB,EAAKK,IAC7B,EAAK1D,MAAM4E,QAAQC,IAAIxB,EAAKK,MAC3B,EAAK1D,MAAMI,cAEdqC,MAAO,CACLqC,gBAAiB,EAAK9E,MAAMI,cACxB,EAAKJ,MAAM2E,WAAatB,EAAKK,GAC3B,YACA,YACF,EAAK1D,MAAM2E,WAAatB,EAAKK,GAC7B,YACA,QACJqB,MAAO,EAAK/E,MAAMI,cACd,EAAKJ,MAAM2E,WAAatB,EAAKK,GAC3B,SACA,QACF,EAAK1D,MAAM2E,WAAatB,EAAKK,GAC7B,QACA,UAGL,EAAK1D,MAAM4E,QAAQC,IAAIxB,EAAKK,IAC3B,kBAACsB,EAAA,EAAD,CAAMC,KAAK,uBAEX,IAED,EAAK/B,eAAeG,IAEF,IAApB,EAAKrD,MAAMiD,KACV,kBAACY,EAAA,EAAMY,KAAP,CACEC,QACE,EAAK1E,MAAM2E,WAAatB,EAAKK,IAC7B,EAAK1D,MAAM4E,QAAQC,IAAIxB,EAAKK,MAC3B,EAAK1D,MAAMI,cAEdqC,MAAO,CACLqC,gBAAiB,EAAK9E,MAAMI,cACxB,EAAKJ,MAAM2E,WAAatB,EAAKK,GAC3B,YACA,YACF,EAAK1D,MAAM2E,WAAatB,EAAKK,GAC7B,YACA,QACJqB,MAAO,EAAK/E,MAAMI,cACd,EAAKJ,MAAM2E,WAAatB,EAAKK,GAC3B,SACA,QACF,EAAK1D,MAAM2E,WAAatB,EAAKK,GAC7B,QACA,UAGLL,EAAK6B,UACJ,kBAACC,EAAA,EAAD,CACEJ,MAAM,MACNhB,UAAWV,EAAK6B,WAAa,EAAKlF,MAAMgE,YACxCxD,QAAS,WACPL,KAAKH,MAAMoF,YACT,EACA/B,EAAKK,GACL,KACA,YACA,OAEFrC,KAAK,IAXT,gBAgBA,qBAIJ,SAKR,kBAACwC,EAAA,EAAMwB,OAAP,CAAcC,WAAS,GACrB,kBAACzB,EAAA,EAAMzB,IAAP,KACE,kBAACyB,EAAA,EAAMI,WAAP,CAAkBsB,QAAQ,KACxB,kBAACJ,EAAA,EAAD,CACEK,QAAQ,OACRC,MAAI,EACJC,cAAc,QACdlD,KAAK,QACLmD,SAAO,EACP3C,QAAS7C,KAAKW,MAAMkC,QACpBe,SAAU5D,KAAKW,MAAMkC,QACrBxC,QAAS,WACHL,KAAKW,MAAMkC,UAGf7C,KAAKiB,SAAS,CAAE4B,SAAS,IACzB7C,KAAKH,MAAM4F,QACXvE,KAAKlB,OAEP,kBAAC6E,EAAA,EAAD,CAAMC,KAAK,QAhBb,IAgBuB9E,KAAKgD,6B,GA9KlBxC,IAAMC,W,wFCiWfiF,E,YAjVb,WAAY7F,GAAQ,qEACZA,I,sEAGE,IAAD,OAOPkB,QAAQC,IAAI,YAAahB,KAAKH,OAC9B,IAAM8F,EAAkBC,OAAOC,OAAO7F,KAAKH,MAAMiG,cAC9C3B,IACC,SAAS4B,GACP,OAAI/F,KAAKH,MAAMmG,UAAUD,EAASE,UACzB,CACL5B,IAAK0B,EAASxC,GACd2C,KAAK,GAAD,OAAKlG,KAAKH,MAAMmG,UAAUD,EAASE,UAAU9C,WAA7C,cACF4C,EAAS3C,eAEX+C,MAAOJ,EAASxC,IAGX,CACLc,IAAK0B,EAASxC,GACd2C,KAAK,GAAD,OAAKH,EAAS3C,eAClB+C,MAAOJ,EAASxC,KAGpBrC,KAAKlB,OAERoG,MAAK,SAASC,EAAGC,GAChB,OAAID,EAAEH,KAAOI,EAAEJ,MACL,EAENG,EAAEH,KAAOI,EAAEJ,KACN,EAEF,KAGX,OACE,kBAACxC,EAAA,EAAD,CAAOC,QAAM,GACX,kBAACD,EAAA,EAAMtB,OAAP,KACE,kBAACsB,EAAA,EAAMzB,IAAP,KACE,kBAACyB,EAAA,EAAMI,WAAP,KAAmB9D,KAAKH,MAAMmE,SAIlC,kBAACN,EAAA,EAAMO,KAAP,KACE,kBAACP,EAAA,EAAMzB,IAAP,KACE,kBAACyB,EAAA,EAAMY,KAAP,KACE,kBAACiC,EAAA,EAAD,KAEE,kBAACA,EAAA,EAAKC,MAAN,CAAYC,OAAO,SACjB,kBAACF,EAAA,EAAKG,MAAN,CACEnD,GAAG,uBACHoD,QAASC,IACTC,MAAM,UACNV,MAAOnG,KAAKH,MAAMiH,KAAKvD,GACvBK,UAAQ,KAMZ,kBAAC2C,EAAA,EAAKC,MAAN,CAAYC,OAAO,SACjB,kBAACF,EAAA,EAAKG,MAAN,CACEK,QAASpB,EACTgB,QAASK,IACTH,MAAO,CACLI,SAAU,cACVC,QAAS,2BAEXf,MAAOnG,KAAKH,MAAMiH,KAAKK,YACvBC,SAAU,SAASC,EAAT,GAAwB,IAAVlB,EAAS,EAATA,MACtBnG,KAAKH,MAAMoF,YAAY,cAAekB,IACtCjF,KAAKlB,MACP4D,UAAQ,KAMZ,kBAAC2C,EAAA,EAAKC,MAAN,CAAYC,OAAO,SACjB,kBAACF,EAAA,EAAKG,MAAN,CACEC,QAASC,IACTC,MAAO,CACLI,SAAU,cACVC,QAAS,iCAEXf,MAAO,WACL,OAAImB,MAAMtH,KAAKH,MAAMiH,KAAKzD,aACjB,EAEArD,KAAKH,MAAMiH,KAAKzD,YAAc,GAEvCnC,KAAKlB,KANA,GAOPoH,SAAU,SAASC,EAAT,GAAwB,IAAVlB,EAAS,EAATA,MAClBoB,EAAgBC,SAASrB,GACzBmB,MAAMC,KACRA,EAAgB,GAElBvH,KAAKH,MAAMoF,YAAY,cAAesC,EAAgB,IACtDrG,KAAKlB,QAET,kBAACuG,EAAA,EAAKG,MAAN,CACEK,QAvGI,CAClB,CAAE1C,IAAK,cAAe6B,KAAK,wBAA0BC,MAAO,GAC5D,CAAE9B,IAAK,OAAQ6B,KAAK,iBAAmBC,MAAO,GAC9C,CAAE9B,IAAK,cAAe6B,KAAK,kBAAoBC,MAAO,IACtD,CAAE9B,IAAK,YAAa6B,KAAK,cAAgBC,MAAO,KAoGlCQ,QAASK,IACTH,MAAO,CACLI,SAAU,OACVC,QAAS,+BAEXf,MAAOnG,KAAKH,MAAMiH,KAAKW,KACvBL,SAAU,SAASC,EAAT,GAAwB,IAAVlB,EAAS,EAATA,MACtBnG,KAAKH,MAAMoF,YAAY,OAAQkB,IAC/BjF,KAAKlB,SAMX,kBAACuG,EAAA,EAAKG,MAAN,CACEnD,GAAG,wBACHoD,QAASe,IACTb,MAAM,OACNV,MAAOnG,KAAKH,MAAMiH,KAAKa,KACvBP,SAAU,SAASC,EAAT,GAAwB,IAAVlB,EAAS,EAATA,MACtBnG,KAAKH,MAAMoF,YAAY,OAAQkB,IAC/BjF,KAAKlB,QAKgB,IAAxBA,KAAKH,MAAMiH,KAAKW,KACf,kBAAClB,EAAA,EAAKG,MAAN,CACEnD,GAAG,2BACHoD,QAASe,IACTb,MAAM,4BACNV,MAAOnG,KAAKH,MAAMiH,KAAKc,QACvBR,SAAU,SAASC,EAAT,GAAwB,IAAVlB,EAAS,EAATA,MACtBnG,KAAKH,MAAMoF,YAAY,UAAWkB,IAClCjF,KAAKlB,QAGT,IAKuB,IAAxBA,KAAKH,MAAMiH,KAAKW,MAAsC,IAAxBzH,KAAKH,MAAMiH,KAAKW,KAC7C,kBAAClB,EAAA,EAAKG,MAAN,CACEnD,GAAG,0BACHoD,QAASe,IACTb,MAAM,SACNjD,SAAkC,IAAxB5D,KAAKH,MAAMiH,KAAKW,KAC1BtB,MAAOnG,KAAKH,MAAMiH,KAAKe,OACvBT,SAAU,SAASC,EAAT,GAAwB,IAAVlB,EAAS,EAATA,MACtBnG,KAAKH,MAAMoF,YAAY,SAAUkB,IACjCjF,KAAKlB,QAGT,IAKuB,IAAxBA,KAAKH,MAAMiH,KAAKW,MAAsC,IAAxBzH,KAAKH,MAAMiH,KAAKW,KAC7C,kBAAClB,EAAA,EAAKG,MAAN,CACEnD,GAAG,sCACHoD,QAASe,IACTb,MAAM,qBACNV,MAAOnG,KAAKH,MAAMiH,KAAKgB,mBACvBV,SAAU,SAASC,EAAT,GAAwB,IAAVlB,EAAS,EAATA,MACtBnG,KAAKH,MAAMoF,YAAY,qBAAsBkB,IAC7CjF,KAAKlB,QAGT,IAKuB,IAAxBA,KAAKH,MAAMiH,KAAKW,MAAczH,KAAKH,MAAMiH,KAAKc,QAC7C,yBAAKtF,MAAO,CAAEyF,cAAe,UAC3B,kBAACxB,EAAA,EAAKG,MAAN,CACEnD,GAAG,2BACHsD,MAAM,8BAEP7G,KAAKH,MAAMiH,KAAKc,QAAQI,OACtBC,MAAM,KACNC,QAAO,SAAAC,GACN,MAAuC,KAAhCA,EAAOH,OAAOI,iBAEtBjE,KAAI,SAAAgE,GAAM,OACT,6BACG,EAAKtI,MAAMiH,KAAKe,OAAOG,OAAOI,gBAC7BD,EAAOH,OAAOI,eACgB,KAAhCD,EAAOH,OAAOI,cACZ,kBAACC,EAAA,EAAD,CAAOzD,MAAM,MAAMtC,MAAO,CAAEgG,OAAQ,UAClC,kBAACzD,EAAA,EAAD,CAAMC,KAAK,UACVqD,GAGH,kBAACE,EAAA,EAAD,CACEE,GAAG,IACHlI,QAAS,kBACP,EAAKR,MAAMoF,YAAY,SAAUkD,EAAOH,SAE1C1F,MAAO,CAAEgG,OAAQ,UAEhBH,GAIL,kCAKR,IAKF,kBAAC5B,EAAA,EAAKG,MAAN,CAAYG,MAAM,eACjB7G,KAAKH,MAAMiH,KAAK/B,UACf,kBAACyD,EAAA,EAAD,KACE,kBAACC,EAAA,EAAD,CACEC,OAAK,EACLC,UAAU,QACVC,IAAK5I,KAAKH,MAAMiH,KAAK/B,aAIzB,IAED/E,KAAKH,MAAMgE,YACV,kBAACgF,EAAA,EAAD,CACEjE,MAAO,OACPkE,QAAS9I,KAAKH,MAAMkJ,SACpBC,YAAU,IAGZ,kBAACzC,EAAA,EAAKC,MAAN,KACE,2BACElE,MAAO,CACLqC,gBAAiB,YACjBC,MAAO,QACPnC,WAAY,EACZwG,QAAS,EACTC,YAAa,GACbC,aAAc,GACdC,aAAc,EACdhF,OAAQ,YAGV,8CACA,kBAAC,IAAD,CACEiF,OAAO,UACPvE,KAAK,aACLwE,mBAAiB,EACjBC,QAAM,EACNC,WAAYtK,IAASuK,UAAUC,IAAI,UACnCC,cAAe,WACb3J,KAAKH,MAAM+J,cAAcC,kBACvB7J,KAAKH,MAAMiH,KAAKvD,KAElBrC,KAAKlB,MACP8J,cACE9J,KAAKH,MAAM+J,cAAcG,kBAE3BC,gBAAiB,SAASC,GACxBjK,KAAKH,MAAM+J,cAAcM,oBACvB,EACAlK,KAAKH,MAAMiH,KAAKvD,GAChB0G,IAEF/I,KAAKlB,MACPmK,WAAYnK,KAAKH,MAAM+J,cAAcQ,eACrCxG,SAAU5D,KAAKH,MAAMgE,eAIzB,kBAAC0C,EAAA,EAAKG,MAAN,CACEnD,GAAG,2BACHoD,QAAS3B,IACTqF,QAAQ,eACRzF,MAAM,MACNhB,UACG5D,KAAKH,MAAMiH,KAAK/B,WAAa/E,KAAKH,MAAMgE,YAE3CxD,QAAS,WACPL,KAAKH,MAAMoF,YAAY,YAAa,OACpC/D,KAAKlB,SAOb,kBAACuG,EAAA,EAAKC,MAAN,CAAYC,OAAO,SACjB,kBAACF,EAAA,EAAKG,MAAN,CACEnD,GAAG,mCACHoD,QAASC,IACTC,MAAM,iBACNV,MAAOnG,KAAKH,MAAMiH,KAAKwD,eACvBlD,SAAU,SAASC,EAAT,GAAwB,IAAVlB,EAAS,EAATA,MACtBnG,KAAKH,MAAMoF,YAAY,iBAAkBkB,IACzCjF,KAAKlB,SAMX,kBAACuG,EAAA,EAAKG,MAAN,CACEnD,GAAG,sBACHoD,QAAS3B,IACTqF,QAAQ,OACR7E,SAAO,EACP5B,UACG5D,KAAKH,MAAM4E,QAAQC,IAAI1E,KAAKH,MAAMiH,KAAKvD,KACxCvD,KAAKH,MAAMgE,YAEbxD,QAAS,WACPL,KAAKH,MAAM+J,cAAcW,OAAO,EAAGvK,KAAKH,MAAMiH,KAAKvD,KACnDrC,KAAKlB,iB,GAxUAQ,IAAMC,WC4MhB+J,E,YA7Mb,WAAY3K,GAAQ,qEACZA,I,sEAIN,IAAM4K,EAAe7E,OAAOC,OAAO7F,KAAKH,MAAMmG,WAAW7B,KAAI,SAC3DuG,GAEA,MAAO,CACLrG,IAAKqG,EAAMnH,GACX2C,KAAMwE,EAAMvH,WACZgD,MAAOuE,EAAMnH,OAIjB,OACE,kBAACG,EAAA,EAAD,CAAOC,QAAM,GACX,kBAACD,EAAA,EAAMtB,OAAP,KACE,kBAACsB,EAAA,EAAMzB,IAAP,KACE,kBAACyB,EAAA,EAAMI,WAAP,KAAmB9D,KAAKH,MAAMmE,SAIlC,kBAACN,EAAA,EAAMO,KAAP,KACE,kBAACP,EAAA,EAAMzB,IAAP,KACE,kBAACyB,EAAA,EAAMY,KAAP,KACE,kBAACiC,EAAA,EAAD,KACE,kBAACA,EAAA,EAAKC,MAAN,CAAYC,OAAO,SACjB,kBAACF,EAAA,EAAKG,MAAN,CACEnD,GAAG,2BACHoD,QAASC,IACTC,MAAM,cACNV,MAAOnG,KAAKH,MAAMkG,SAASxC,GAC3BK,UAAQ,KAGZ,kBAAC2C,EAAA,EAAKC,MAAN,CAAYC,OAAO,SACjB,kBAACF,EAAA,EAAKG,MAAN,CACEnD,GAAG,6BACHoD,QAASC,IACTC,MAAM,gBACNV,MAAOnG,KAAKH,MAAMkG,SAAS3C,cAC3BgE,SAAU,SAASC,EAAT,GAAwB,IAAVlB,EAAS,EAATA,MACtBnG,KAAKH,MAAMoF,YAAY,gBAAiBkB,IACxCjF,KAAKlB,SAGX,kBAACuG,EAAA,EAAKC,MAAN,CAAYC,OAAO,SACjB,kBAACF,EAAA,EAAKG,MAAN,CACEK,QAAS0D,EACT9D,QAASK,IACTH,MAAO,CACLI,SAAU,WACVC,QAAS,4BAEXf,MAAOnG,KAAKH,MAAMkG,SAASE,SAC3BmB,SAAU,SAASC,EAAT,GAAwB,IAAVlB,EAAS,EAATA,MACtBnG,KAAKH,MAAMoF,YAAY,WAAYkB,IACnCjF,KAAKlB,SAGX,kBAACuG,EAAA,EAAKC,MAAN,CAAYC,OAAO,SACjB,kBAACF,EAAA,EAAKG,MAAN,CACEnD,GAAG,mCACHoD,QAASC,IACTC,MAAM,aACNV,MAAO,WACL,OAAImB,MAAMtH,KAAKH,MAAMkG,SAAS4E,YACrB,EAEA3K,KAAKH,MAAMkG,SAAS4E,YAE7BzJ,KAAKlB,KANA,GAOPoH,SAAU,SAASC,EAAT,GAAwB,IAAVlB,EAAS,EAATA,MAClByE,EAAapD,SAASrB,IACtBmB,MAAMsD,IAAeA,EAAa,KACpCA,EAAa,GAEf5K,KAAKH,MAAMoF,YAAY,aAAc2F,IACrC1J,KAAKlB,QAET,kBAACuG,EAAA,EAAKG,MAAN,CACEnD,GAAG,mCACHoD,QAASC,IACTC,MAAM,cACNV,MAAO,WACL,OAAImB,MAAMtH,KAAKH,MAAMkG,SAAS1C,aACrB,EAEArD,KAAKH,MAAMkG,SAAS1C,YAAc,GAE3CnC,KAAKlB,KANA,GAOPoH,SAAU,SAASC,EAAT,GAAwB,IAAVlB,EAAS,EAATA,MAClB0E,EAAarD,SAASrB,IACtBmB,MAAMuD,IAAeA,EAAa,KACpCA,EAAa,GAEf7K,KAAKH,MAAMoF,YAAY,cAAe4F,EAAa,IACnD3J,KAAKlB,SAGX,kBAACuG,EAAA,EAAKG,MAAN,CACEnD,GAAG,4BACHoD,QAASe,IACTb,MAAM,eACNV,MAAOnG,KAAKH,MAAMkG,SAAS+E,aAC3B1D,SAAU,SAASC,EAAT,GAAwB,IAAVlB,EAAS,EAATA,MACtBnG,KAAKH,MAAMoF,YAAY,eAAgBkB,IACvCjF,KAAKlB,QAET,kBAACuG,EAAA,EAAKG,MAAN,CAAYG,MAAM,mBACjB7G,KAAKH,MAAMkG,SAAShB,UACnB,kBAACyD,EAAA,EAAD,KACE,kBAACC,EAAA,EAAD,CACEE,UAAU,QACVD,OAAK,EACLE,IAAK5I,KAAKH,MAAMkG,SAAShB,aAI7B,IAED/E,KAAKH,MAAMgE,YACV,kBAACgF,EAAA,EAAD,CACEjE,MAAO,OACPkE,QAAS9I,KAAKH,MAAMkJ,SACpBC,YAAU,IAGZ,kBAACzC,EAAA,EAAKC,MAAN,KACE,2BACElE,MAAO,CACLqC,gBAAiB,YACjBC,MAAO,QACPnC,WAAY,EACZwG,QAAS,EACTC,YAAa,GACbC,aAAc,GACdC,aAAc,EACdhF,OAAQ,YAGV,8CACA,kBAAC,IAAD,CACEiF,OAAO,UACPvE,KAAK,iBACLwE,mBAAiB,EACjBC,QAAM,EACNC,WAAYtK,IAASuK,UAAUC,IAAI,UACnCC,cAAe,WACb3J,KAAKH,MAAM+J,cAAcC,kBACvB7J,KAAKH,MAAMkG,SAASxC,KAEtBrC,KAAKlB,MACP8J,cACE9J,KAAKH,MAAM+J,cAAcG,kBAE3BC,gBAAiB,SAASC,GACxBjK,KAAKH,MAAM+J,cAAcM,oBACvB,EACAlK,KAAKH,MAAMkG,SAASxC,GACpB0G,IAEF/I,KAAKlB,MACPmK,WAAYnK,KAAKH,MAAM+J,cAAcQ,eACrCxG,SAAU5D,KAAKH,MAAMgE,eAIzB,kBAAC0C,EAAA,EAAKG,MAAN,CACEnD,GAAG,+BACHoD,QAAS3B,IACTqF,QAAQ,eACRzF,MAAM,MACNhB,UACG5D,KAAKH,MAAMkG,SAAShB,WAAa/E,KAAKH,MAAMgE,YAE/CxD,QAAS,WACPL,KAAKH,MAAMoF,YAAY,YAAa,OACpC/D,KAAKlB,SAKb,kBAACuG,EAAA,EAAKG,MAAN,CACEnD,GAAG,sBACHoD,QAAS3B,IACTqF,QAAQ,OACR7E,SAAO,EACP5B,UACG5D,KAAKH,MAAM4E,QAAQC,IAAI1E,KAAKH,MAAMkG,SAASxC,KAC5CvD,KAAKH,MAAMgE,YAEbxD,QAAS,WACPL,KAAKH,MAAM+J,cAAcW,OAAO,EAAGvK,KAAKH,MAAMkG,SAASxC,KACvDrC,KAAKlB,iB,GApMIQ,IAAMC,WC0JpBsK,E,YAzJb,WAAYlL,GAAQ,qEACZA,I,sEAIN,OACE,kBAAC6D,EAAA,EAAD,CAAOC,QAAM,GACX,kBAACD,EAAA,EAAMtB,OAAP,KACE,kBAACsB,EAAA,EAAMzB,IAAP,KACE,kBAACyB,EAAA,EAAMI,WAAP,KAAmB9D,KAAKH,MAAMmE,SAIlC,kBAACN,EAAA,EAAMO,KAAP,KACE,kBAACP,EAAA,EAAMzB,IAAP,KACE,kBAACyB,EAAA,EAAMY,KAAP,KACE,kBAACiC,EAAA,EAAD,KACE,kBAACA,EAAA,EAAKC,MAAN,CAAYC,OAAO,SACjB,kBAACF,EAAA,EAAKG,MAAN,CACEnD,GAAG,wBACHoD,QAASC,IACTC,MAAM,WACNV,MAAOnG,KAAKH,MAAM6K,MAAMnH,GACxBK,UAAQ,KAGZ,kBAAC2C,EAAA,EAAKC,MAAN,CAAYC,OAAO,SACjB,kBAACF,EAAA,EAAKG,MAAN,CACEnD,GAAG,mCACHoD,QAASC,IACTC,MAAM,aACNV,MAAOnG,KAAKH,MAAM6K,MAAMvH,WACxBiE,SAAU,SAASC,EAAT,GAAwB,IAAVlB,EAAS,EAATA,MACtBnG,KAAKH,MAAMoF,YAAY,aAAckB,IACrCjF,KAAKlB,SAGX,kBAACuG,EAAA,EAAKC,MAAN,CAAYC,OAAO,SACjB,kBAACF,EAAA,EAAKG,MAAN,CACEnD,GAAG,gCACHoD,QAASC,IACTC,MAAM,cACNV,MAAO,WACL,OAAImB,MAAMtH,KAAKH,MAAM6K,MAAMrH,aAClB,EAEArD,KAAKH,MAAM6K,MAAMrH,YAAc,GAExCnC,KAAKlB,KANA,GAOPoH,SAAU,SAASC,EAAT,GAAwB,IAAVlB,EAAS,EAATA,MAClB0E,EAAarD,SAASrB,IACtBmB,MAAMuD,IAAeA,EAAa,KACpCA,EAAa,GAEf7K,KAAKH,MAAMoF,YAAY,cAAe4F,EAAa,IACnD3J,KAAKlB,SAGX,kBAACuG,EAAA,EAAKG,MAAN,CAAYG,MAAM,gBACjB7G,KAAKH,MAAM6K,MAAM3F,UAChB,kBAACyD,EAAA,EAAD,KACE,kBAACC,EAAA,EAAD,CACEE,UAAU,QACVD,OAAK,EACLE,IAAK5I,KAAKH,MAAM6K,MAAM3F,aAI1B,IAED/E,KAAKH,MAAMgE,YACV,kBAACgF,EAAA,EAAD,CACEjE,MAAO,OACPkE,QAAS9I,KAAKH,MAAMkJ,SACpBC,YAAU,IAGZ,kBAACzC,EAAA,EAAKC,MAAN,KACE,2BACElE,MAAO,CACLqC,gBAAiB,YACjBC,MAAO,QACPnC,WAAY,EACZwG,QAAS,EACTC,YAAa,GACbC,aAAc,GACdC,aAAc,EACdhF,OAAQ,YAGV,8CACA,kBAAC,IAAD,CACEiF,OAAO,UACPvE,KAAK,cACLwE,mBAAiB,EACjBC,QAAM,EACNC,WAAYtK,IAASuK,UAAUC,IAAI,UACnCC,cAAe,WACb3J,KAAKH,MAAM+J,cAAcC,kBACvB7J,KAAKH,MAAM6K,MAAMnH,KAEnBrC,KAAKlB,MACP8J,cACE9J,KAAKH,MAAM+J,cAAcG,kBAE3BC,gBAAiB,SAASC,GACxBjK,KAAKH,MAAM+J,cAAcM,oBACvB,EACAlK,KAAKH,MAAM6K,MAAMnH,GACjB0G,IAEF/I,KAAKlB,MACPmK,WAAYnK,KAAKH,MAAM+J,cAAcQ,eACrCxG,SAAU5D,KAAKH,MAAMgE,eAIzB,kBAAC0C,EAAA,EAAKG,MAAN,CACEnD,GAAG,2BACHoD,QAAS3B,IACTqF,QAAQ,eACRzF,MAAM,MACNhB,UACG5D,KAAKH,MAAM6K,MAAM3F,WAAa/E,KAAKH,MAAMgE,YAE5CxD,QAAS,WACPL,KAAKH,MAAMoF,YAAY,YAAa,OACpC/D,KAAKlB,SAKb,kBAACuG,EAAA,EAAKG,MAAN,CACEnD,GAAG,sBACHoD,QAAS3B,IACTqF,QAAQ,OACR7E,SAAO,EACP5B,UACG5D,KAAKH,MAAM4E,QAAQC,IAAI1E,KAAKH,MAAM6K,MAAMnH,KACzCvD,KAAKH,MAAMgE,YAEbxD,QAAS,WACPL,KAAKH,MAAM+J,cAAcW,OAAO,EAAGvK,KAAKH,MAAM6K,MAAMnH,KACpDrC,KAAKlB,iB,GAhJCQ,IAAMC,WCgFjBuK,E,YAzFb,WAAYnL,GAAQ,qEACZA,I,sEAGN,OAAIG,KAAKH,MAAMoL,cACTjL,KAAKH,MAAMqL,iBACTlL,KAAKH,MAAMsL,aAEX,kBAAC,EAAD,CACErE,KAAM9G,KAAKH,MAAMuL,MAAMC,SAASrL,KAAKH,MAAMsL,cAC3CG,UACEtL,KAAKH,MAAM0L,eAAevL,KAAKH,MAAMqL,kBAAkBM,OAEzDxH,MAAK,UACHhE,KAAKH,MAAMuL,MAAMtF,aAAa9F,KAAKH,MAAMqL,kBACtC9H,cAFA,mBAGMpD,KAAKH,MAAMuL,MAAMC,SAASrL,KAAKH,MAAMsL,cAC7C9H,YAAc,GACjBoB,QAASzE,KAAKH,MAAM4E,QACpBmF,cAAe5J,KAAKH,MAAM+J,cAC1B3E,YAAa,SAASZ,EAAK8B,GACzBnG,KAAKH,MAAMoF,YACT,EACAjF,KAAKH,MAAMsL,aACXnL,KAAKH,MAAMqL,iBACX7G,EACA8B,IAEFjF,KAAKlB,MACP6D,YAAa7D,KAAKH,MAAMgE,YACxBkF,SAAU/I,KAAKH,MAAMkJ,SACrBjD,aAAc9F,KAAKH,MAAMuL,MAAMtF,aAC/BE,UAAWhG,KAAKH,MAAMuL,MAAMpF,YAK9B,kBAAC,EAAD,CACED,SACE/F,KAAKH,MAAMuL,MAAMtF,aAAa9F,KAAKH,MAAMqL,kBAE3CzG,QAASzE,KAAKH,MAAM4E,QACpBT,MAAK,UAAKhE,KAAKH,MAAMuL,MAAMtF,aAAa9F,KAAKH,MAAMqL,kBAAkB9H,eACrEwG,cAAe5J,KAAKH,MAAM+J,cAC1B3E,YAAa,SAASZ,EAAK8B,GACzBnG,KAAKH,MAAMoF,YACT,EACAjF,KAAKH,MAAMqL,iBACXlL,KAAKH,MAAMoL,cACX5G,EACA8B,IAEFjF,KAAKlB,MACP6D,YAAa7D,KAAKH,MAAMgE,YACxBkF,SAAU/I,KAAKH,MAAMkJ,SACrB/C,UAAWhG,KAAKH,MAAMuL,MAAMpF,YAMhC,kBAAC,EAAD,CACE0E,MAAO1K,KAAKH,MAAMuL,MAAMpF,UAAUhG,KAAKH,MAAMoL,eAC7CxG,QAASzE,KAAKH,MAAM4E,QACpBmF,cAAe5J,KAAKH,MAAM+J,cAC1B5F,MAAK,UAAKhE,KAAKH,MAAMuL,MAAMpF,UAAUhG,KAAKH,MAAMoL,eAAe9H,YAC/D8B,YAAa,SAASZ,EAAK8B,GACzBnG,KAAKH,MAAMoF,YACT,EACAjF,KAAKH,MAAMoL,cACX,KACA5G,EACA8B,IAEFjF,KAAKlB,MACP6D,YAAa7D,KAAKH,MAAMgE,YACxBkF,SAAU/I,KAAKH,MAAMkJ,WAMzB,kBAACP,EAAA,EAAD,CAAS5E,UAAQ,EAAC6H,UAAU,UAA5B,mC,GAnFiBjL,IAAMC,W,2BCqEhBiL,E,YAtEb,WAAY7L,GAAQ,IAAD,8BACjB,4CAAMA,KACDc,MAAQ,CACXwB,MAAO,IACPwJ,OAAQ,KAJO,E,iFAQjB3L,KAAKiB,SAAS,CACZkB,MAAOnC,KAAK8B,UAAU8J,YACtBD,OAAQ3L,KAAK8B,UAAU+J,iB,+BAGjB,IAAD,OAGP,OAFA9K,QAAQC,IAAIhB,KAAKH,MAAM4D,OAGrB,yBACEiG,IAAK,SAAAoC,GAAE,OAAK,EAAKhK,UAAYgK,GAC7BxJ,MAAO,CAAEH,MAAO,OAAQwJ,OAAQ,SAE/B3L,KAAKH,MAAM4D,MAAMU,KAAI,SAAAjB,GAAI,OACxB,kBAAC,IAAD,CACEZ,MAAO,CACLyJ,OAAQ7I,EAAKK,KAAO,EAAK1D,MAAMqD,KAAKK,GAAK,MAAQ,IACjDyI,SAAU,YAEZC,QAAS,kBAAM/I,EAAKK,KAAO,EAAK1D,MAAMqD,KAAKK,IAC3C2I,OAAO,SACPC,OAAQ,SAAC9E,EAAG2E,GAAc,IAChBI,EAASJ,EAATI,EAAGC,EAAML,EAANK,EACX,EAAKxM,MAAMyM,qBACTjF,EACA+E,EAAI,IAAO,EAAKzL,MAAMwB,MACtBkK,EAAI,IAAO,EAAK1L,MAAMgL,SAG1BK,SAAU,CACRI,EAIE,KAHC,EAAKvM,MAAM0M,MACRrJ,EAAKsJ,iBACLtJ,EAAKuJ,gBAET,EAAK9L,MAAMwB,MACbkK,EAIE,KAHC,EAAKxM,MAAM0M,MACRrJ,EAAKwJ,iBACLxJ,EAAKyJ,gBAET,EAAKhM,MAAMgL,SAGf,kBAAClD,EAAA,EAAD,CACEnG,MAAO,CACL0J,SAAU,WACVL,OAAO,GAAD,OAAKzI,EAAK0J,KAAV,KACNC,QACE3J,EAAKK,KAAO,EAAK1D,MAAMqD,KAAKK,GAAK,qBAAuB,GAC1DoB,gBACEzB,EAAKK,KAAO,EAAK1D,MAAMqD,KAAKK,GAAK,yBAA2B,IAEhEqF,IAAK1F,EAAK6B,UACV4D,UAAU,mB,GA/DMnI,IAAMC,WCkJrBqM,E,YAhJb,WAAYjN,GAAQ,IAAD,8BACjB,4CAAMA,KACDc,MAAQ,CACX4L,OAAO,GAET,EAAKQ,eAAiB,EAAKA,eAAe7L,KAApB,gBALL,E,4EAQJ8L,EAAGC,GAChBjN,KAAKiB,SAAS,CAAEsL,OAAQU,EAAKC,Y,+BAGrB,IAAD,OAKPnM,QAAQC,IAAI,YAAahB,KAAKH,OACN+F,OAAOC,OAAO7F,KAAKH,MAAMiG,cAC9C3B,IACC,SAAS4B,GACP,OAAI/F,KAAKH,MAAMmG,UAAUD,EAASE,UACzB,CACL5B,IAAK0B,EAASxC,GACd2C,KAAK,GAAD,OAAKlG,KAAKH,MAAMmG,UAAUD,EAASE,UAAU9C,WAA7C,cAA6D4C,EAAS3C,eAC1E+C,MAAOJ,EAASxC,IAGX,CACLc,IAAK0B,EAASxC,GACd2C,KAAK,GAAD,OAAKH,EAAS3C,eAClB+C,MAAOJ,EAASxC,KAGpBrC,KAAKlB,OAERoG,MAAK,SAASC,EAAGC,GAChB,OAAID,EAAEH,KAAOI,EAAEJ,MACL,EAENG,EAAEH,KAAOI,EAAEJ,KACN,EAEF,KAGX,OACE,kBAACxC,EAAA,EAAD,CAAOyJ,SAAO,EAACxJ,QAAM,EAACiB,MAAM,QAAQ7E,UAAQ,GAC1C,kBAAC2D,EAAA,EAAMtB,OAAP,KACE,kBAACsB,EAAA,EAAMzB,IAAP,KACE,kBAACyB,EAAA,EAAMI,WAAP,qBAAgC9D,KAAKH,MAAMmE,OAC3C,kBAACN,EAAA,EAAMI,WAAP,CAAkB9B,cAAc,UAAhC,QACQ,IACN,kBAACoL,EAAA,EAAD,CACE9K,MAAO,CACL+K,WAAY,MACZ5K,WAAY,OACZ6K,YAAa,QAEfC,QAAM,EACNpH,MAAOnG,KAAKW,MAAM4L,MAClBnF,SAAUpH,KAAK+M,iBACd,IAXL,SAiBJ,kBAACrJ,EAAA,EAAMO,KAAP,KACE,kBAACP,EAAA,EAAMzB,IAAP,KACE,kBAACyB,EAAA,EAAMY,KAAP,CAAYhC,MAAO,CAAE2G,QAAS,SAC5B,yBACEuE,UAAU,yBACVlL,MAAO,CAAE0J,SAAU,aAEnB,kBAACvD,EAAA,EAAD,CAAOG,IAAK5I,KAAKH,MAAMiH,KAAK/B,UAAW2D,OAAK,IAC5C,yBACEpG,MAAO,CACL0J,SAAU,WACVyB,IAAK,IACLC,KAAM,IACNvL,MAAO,OACPwJ,OAAQ,SAGV,kBAAC,EAAD,CACEY,MAAOvM,KAAKW,MAAM4L,MAClBrJ,KAAMlD,KAAKH,MAAMqD,KACjBO,MAAOmC,OAAOC,OAAO7F,KAAKH,MAAMuL,OAAOlD,QAAO,SAAAhF,GAC5C,OAAOA,EAAKyK,UAAY,EAAK9N,MAAMqD,KAAKyK,WAE1CrB,qBAAsB,SAACjF,EAAG+E,EAAGC,GACvB,EAAK1L,MAAM4L,OACb,EAAK1M,MAAMoF,YAAY,mBAAoBmH,GAC3C,EAAKvM,MAAMoF,YAAY,mBAAoBoH,KAE3C,EAAKxM,MAAMoF,YAAY,iBAAkBmH,GACzC,EAAKvM,MAAMoF,YAAY,iBAAkBoH,YASzD,kBAAC3I,EAAA,EAAMwB,OAAP,CAAcC,WAAS,GACrB,kBAACzB,EAAA,EAAMzB,IAAP,KACE,kBAACyB,EAAA,EAAMY,KAAP,KACE,kBAACiC,EAAA,EAAD,CAAMxG,UAAQ,GACZ,kBAACwG,EAAA,EAAKC,MAAN,CAAYC,OAAO,SACjB,kBAACF,EAAA,EAAKG,MAAN,CACEnD,GAAG,mCACHoD,QAASC,IACTC,MAAM,cACNV,MAAOnG,KAAKH,MAAMqD,KAAKI,YACvB8D,SAAU,SAASC,EAAT,GAAwB,IAAVlB,EAAS,EAATA,MACtBnG,KAAKH,MAAMoF,YAAY,cAAekB,IACtCjF,KAAKlB,QAET,kBAACuG,EAAA,EAAKG,MAAN,CACEnD,GAAG,mCACHoD,QAASC,IACTC,MAAM,OACNV,MAAO,WACL,OAAImB,MAAMtH,KAAKH,MAAMqD,KAAK0J,MACjB,KAEA5M,KAAKH,MAAMqD,KAAK0J,MAEzB1L,KAAKlB,KANA,GAOPoH,SAAU,SAASC,EAAT,GAAwB,IAAVlB,EAAS,EAATA,MACtBnG,KAAKH,MAAMoF,YAAY,OAAQkB,IAC/BjF,KAAKlB,kB,GAtIOQ,IAAMC,WC6IzBmN,E,YA3Ib,WAAY/N,GAAQ,qEACZA,I,sEAGN,IAAIgO,EAAQ7N,KAAKH,MAAMuL,MAAMC,SAASrL,KAAKH,MAAMsL,cACjD,OAAInL,KAAKH,MAAMoL,eACTjL,KAAKH,MAAMqL,kBACTlL,KAAKH,MAAMsL,aACT0C,GAASA,EAAM9I,UACb/E,KAAKH,MAAMqD,KACTlD,KAAKH,MAAMqD,KAAK6B,WAClBhE,QAAQC,IAAIhB,KAAKH,MAAMuL,MAAM0C,mBAC7B/M,QAAQC,IAAIhB,KAAKH,MAAMqD,MAErB,kBAAC,EAAD,CACE4D,KAAM9G,KAAKH,MAAMuL,MAAMC,SAASrL,KAAKH,MAAMsL,cAC3CjI,KAAMlD,KAAKH,MAAMqD,KACjBoI,UACEtL,KAAKH,MAAMkO,oBAAoB/N,KAAKH,MAAMsL,cACvCK,OAELxH,MAAK,UAAKhE,KAAKH,MAAMuL,MAAMtF,aAAa9F,KAAKH,MAAMqL,kBAAkB9H,cAAhE,mBAAwFpD,KAAKH,MAAMuL,MAAMC,SAASrL,KAAKH,MAAMsL,cAAc9H,aAChJoB,QAASzE,KAAKH,MAAM4E,QACpBmF,cAAe5J,KAAKH,MAAM+J,cAC1B3E,YAAa,SAASZ,EAAK8B,GACzBnG,KAAKH,MAAMoF,YACT,EACAjF,KAAKH,MAAMqD,KAAKK,GAChBvD,KAAKH,MAAMsL,aACX9G,EACA8B,IAEFjF,KAAKlB,MACPoL,MAAOpL,KAAKH,MAAMuL,MAAM0C,kBACxBjK,YAAa7D,KAAKH,MAAMgE,YACxBkF,SAAU/I,KAAKH,MAAMkJ,SACrBjD,aAAc9F,KAAKH,MAAMuL,MAAMtF,aAC/BE,UAAWhG,KAAKH,MAAMuL,MAAMpF,cAIhCjF,QAAQC,IAAIhB,KAAKH,MAAMqD,MAErB,6BACE,kBAACsF,EAAA,EAAD,CAASjE,SAAO,EAACX,UAAQ,EAAC7D,UAAQ,EAAC0L,UAAU,UAA7C,4CAGCzL,KAAKH,MAAMgE,YACV,kBAACgF,EAAA,EAAD,CACEjE,MAAO,OACPkE,QAAS9I,KAAKH,MAAMkJ,SACpBC,YAAU,IAGZ,kBAACzC,EAAA,EAAD,KACE,kBAACA,EAAA,EAAKC,MAAN,KACE,2BACElE,MAAO,CACLqC,gBAAiB,YACjBC,MAAO,QACPnC,WAAY,EACZwG,QAAS,EACTC,YAAa,GACbC,aAAc,GACdC,aAAc,EACdhF,OAAQ,YAGV,8CACA,kBAAC,IAAD,CACEiF,OAAO,UACPvE,KAAK,aACLwE,mBAAiB,EACjBC,QAAM,EACNC,WAAYtK,IAASuK,UAAUC,IAAI,UACnCC,cAAe,WACb3J,KAAKH,MAAM+J,cAAcC,kBACvB7J,KAAKH,MAAMqD,KAAKK,KAElBrC,KAAKlB,MACP8J,cACE9J,KAAKH,MAAM+J,cAAcG,kBAE3BC,gBAAiB,SAASC,GACxBjK,KAAKH,MAAM+J,cAAcM,oBACvB,EACAlK,KAAKH,MAAMqD,KAAKK,GAChB0G,IAEF/I,KAAKlB,MACPmK,WACEnK,KAAKH,MAAM+J,cAAcQ,eAE3BxG,SAAU5D,KAAKH,MAAMgE,mBAWnC,kBAAC2E,EAAA,EAAD,CAASjE,SAAO,EAACX,UAAQ,EAAC7D,UAAQ,EAAC0L,UAAU,UAA7C,+DAOF,kBAACjD,EAAA,EAAD,CAASjE,SAAO,EAACX,UAAQ,EAAC7D,UAAQ,EAAC0L,UAAU,UAA7C,0DAqBN,kBAACjD,EAAA,EAAD,CAASjE,SAAO,EAACX,UAAQ,EAAC6H,UAAU,UAApC,mD,GArIsBjL,IAAMC,WCgQrBuN,E,YA5Pb,WAAYnO,GAAQ,IAAD,8BACjB,4CAAMA,KACDc,MAAQ,CACXC,KAAM1B,IAASoB,OAAOO,YACtBoN,OAAO,EACPvD,MAAO,KACP3E,SAAU,KACVe,KAAM,KACNoH,MAAM,GAGRhP,IAASoB,OAAOQ,mBACd,SAASF,GACHA,GACFZ,KAAKiB,SAAS,CAAEL,KAAMA,IAClBA,EAAKuN,OACPnO,KAAKiB,SAAS,CACZgN,MACwC,sBAAtC/O,IAASoB,OAAOO,YAAYsN,OACU,0BAAtCjP,IAASoB,OAAOO,YAAYsN,OACU,uBAAtCjP,IAASoB,OAAOO,YAAYsN,SAIlCnO,KAAKiB,SAAS,CAAEL,KAAM,QAExBM,KAdF,iBAgBF,EAAKkN,mBAAqB,EAAKA,mBAAmBlN,KAAxB,gBAC1B,EAAKqK,eAAiB,EAAKA,eAAerK,KAApB,gBACtB,EAAK6M,oBAAsB,EAAKA,oBAAoB7M,KAAzB,gBA9BV,E,gFAgCAqC,GACjB,OAAOqC,OAAOC,OAAO7F,KAAKH,MAAMuL,MAAMtF,cAAcoC,QAAO,SAASmG,GAClE,OAAOA,EAAIpI,WAAa1C,O,qCAIbA,GACb,OAAOqC,OAAOC,OAAO7F,KAAKH,MAAMuL,MAAMC,UAAUnD,QAAO,SAASpB,GAC9D,OAAOA,EAAKK,cAAgB5D,O,0CAGZA,GAClB,OAAOqC,OAAOC,OAAO7F,KAAKH,MAAMuL,MAAM0C,mBAAmB5F,QAAO,SAC9DhF,GAEA,OAAOA,EAAKyK,UAAYpK,O,+BAIlB,IAAD,OACP,OAAKvD,KAAKW,MAAMC,KAIXZ,KAAKW,MAAMsN,MAWd,6BACE,kBAACpM,EAAA,EAAD,CAAMyM,QAAQ,QAAQtM,cAAc,MAAMM,MAAO,CAAE2G,QAAS,SAC1D,kBAACpH,EAAA,EAAKI,IAAN,CAAUsM,WAAS,GACfvO,KAAKH,MAAMI,cAkCX,IAjCA,kBAAC4B,EAAA,EAAKK,OAAN,CAAaC,MAAO,GAClB,kBAAC,EAAD,CACEqC,SAAUxE,KAAKH,MAAMoL,cACrBzH,YAAa,SAAAD,GAAE,OAAI,EAAK1D,MAAM2D,YAAY,EAAGD,IAC7CE,MAAOmC,OAAOC,OAAO7F,KAAKH,MAAMuL,MAAMpF,WAAWI,MAC/C,SAASC,EAAGC,GACV,OAAID,EAAEhD,YAAciD,EAAEjD,aACZ,EAENgD,EAAEhD,YAAciD,EAAEjD,YACb,EAELgD,EAAEmI,QAAUlI,EAAEkI,SACR,EAENnI,EAAEmI,QAAUlI,EAAEkI,QACT,EAEF,KAGXxK,MAAO,SACPyB,IAAK,kBAAM,EAAK5F,MAAM4F,IAAI,EAAG,OAC7B5C,SAAS,EACTC,KAAM,EACNmC,YAAajF,KAAKH,MAAMoF,YACxBR,QAASzE,KAAKH,MAAM4E,QACpBZ,YAAa7D,KAAKH,MAAMgE,YACxBkF,SAAU/I,KAAKH,MAAMkJ,SACrB9I,cAAeD,KAAKH,MAAMI,iBAO/BD,KAAKH,MAAMoL,gBAAkBjL,KAAKH,MAAMI,cACvC,kBAAC4B,EAAA,EAAKK,OAAN,CAAaC,MAAO,GAClB,kBAAC,EAAD,CACEqC,SAAUxE,KAAKH,MAAMqL,iBACrB1H,YAAa,SAAAD,GAAE,OAAI,EAAK1D,MAAM2D,YAAY,EAAGD,IAC7CE,MAAOzD,KAAKoO,mBAAmBpO,KAAKH,MAAMoL,eAAe7E,MACvD,SAASC,EAAGC,GACV,OAAID,EAAEhD,YAAciD,EAAEjD,aACZ,EAENgD,EAAEhD,YAAciD,EAAEjD,YACb,EAELgD,EAAEmI,QAAUlI,EAAEkI,SACR,EAENnI,EAAEmI,QAAUlI,EAAEkI,QACT,EAEF,KAGXxK,MACEhE,KAAKH,MAAMuL,MAAMpF,UAAUhG,KAAKH,MAAMoL,eAClCjL,KAAKH,MAAMuL,MAAMpF,UAAUhG,KAAKH,MAAMoL,eACnC9H,WACH,WAENsC,IAAK,SAAAgJ,GAAM,OAAI,EAAK5O,MAAM4F,IAAI,EAAG,EAAK5F,MAAMoL,gBAC5CpI,SAAS,EACTC,KAAM,EACNmC,YAAajF,KAAKH,MAAMoF,YACxBR,QAASzE,KAAKH,MAAM4E,QACpBZ,YAAa7D,KAAKH,MAAMgE,YACxBkF,SAAU/I,KAAKH,MAAMkJ,SACrB9I,cAAeD,KAAKH,MAAMI,iBAI9B,IAGDD,KAAKH,MAAMqL,iBACV,kBAACrJ,EAAA,EAAKK,OAAN,CAAaC,MAAO,GAClB,kBAAC,EAAD,CACEqC,SAAUxE,KAAKH,MAAMsL,aACrB3H,YAAa,SAAAD,GAAE,OAAI,EAAK1D,MAAM2D,YAAY,EAAGD,IAC7CE,MAAOzD,KAAKuL,eAAevL,KAAKH,MAAMqL,kBAAkB9E,MACtD,SAASC,EAAGC,GACV,OAAID,EAAEhD,YAAciD,EAAEjD,aACZ,EAENgD,EAAEhD,YAAciD,EAAEjD,YACb,EAEF,KAGXW,MACEhE,KAAKH,MAAMuL,MAAMtF,aAAa9F,KAAKH,MAAMqL,kBACtC9H,cAELqC,IAAK,SAAAgJ,GAAM,OAAI,EAAK5O,MAAM4F,IAAI,EAAG,EAAK5F,MAAMqL,mBAC5CrI,SAAS,EACTC,KAAM,EACNmC,YAAajF,KAAKH,MAAMoF,YACxBR,QAASzE,KAAKH,MAAM4E,QACpBZ,YAAa7D,KAAKH,MAAMgE,YACxBkF,SAAU/I,KAAKH,MAAMkJ,SACrB9I,cAAeD,KAAKH,MAAMI,iBAI9B,IAGDD,KAAKH,MAAMI,cACV,kBAAC4B,EAAA,EAAKK,OAAN,CAAaC,MAAO,GAClB,kBAAC,EAAD,CACEqC,SAAUxE,KAAKH,MAAM6O,sBACrBlL,YAAa,SAAAD,GAAE,OAAI,EAAK1D,MAAM2D,YAAY,EAAGD,IAC7CE,MAAOzD,KAAK+N,oBAAoB/N,KAAKH,MAAMsL,cAC3CnH,MAAK,UACHhE,KAAKH,MAAMuL,MAAMtF,aAAa9F,KAAKH,MAAMqL,kBACtC9H,cAFA,mBAGMpD,KAAKH,MAAMuL,MAAMC,SAASrL,KAAKH,MAAMsL,cAC7C9H,YAAc,GACjBoC,IAAK,SAAAgJ,GAAM,OAAI,EAAK5O,MAAM4F,IAAI,EAAG,EAAK5F,MAAMsL,eAC5CtI,SAAS,EACTC,KAAM,EACNmC,YAAajF,KAAKH,MAAMoF,YACxBR,QAASzE,KAAKH,MAAM4E,QACpBZ,YAAa7D,KAAKH,MAAMgE,YACxBkF,SAAU/I,KAAKH,MAAMkJ,SACrB9I,cAAeD,KAAKH,MAAMI,iBAI9B,IAGDD,KAAKH,MAAMI,eAAiBD,KAAKH,MAAMsL,aACtC,kBAACtJ,EAAA,EAAKK,OAAN,KACE,kBAAC,EAAD,CACE+I,cAAejL,KAAKH,MAAMoL,cAC1BC,iBAAkBlL,KAAKH,MAAMqL,iBAC7BC,aAAcnL,KAAKH,MAAMsL,aACzBjI,KACElD,KAAKH,MAAMuL,MAAM0C,kBACf9N,KAAKH,MAAM6O,uBAGftD,MAAOpL,KAAKH,MAAMuL,MAClB3F,IAAKzF,KAAKH,MAAM4F,IAChBsI,oBAAqB/N,KAAK+N,oBAC1BtJ,QAASzE,KAAKH,MAAM4E,QACpBQ,YAAajF,KAAKH,MAAMoF,YACxB2E,cAAe5J,KAAKH,MAAM+J,cAC1B/F,YAAa7D,KAAKH,MAAMgE,YACxBkF,SAAU/I,KAAKH,MAAMkJ,YAIzB,kBAAClH,EAAA,EAAKK,OAAN,KACE,kBAAC,EAAD,CACE+I,cAAejL,KAAKH,MAAMoL,cAC1BC,iBAAkBlL,KAAKH,MAAMqL,iBAC7BC,aAAcnL,KAAKH,MAAMsL,aACzBC,MAAOpL,KAAKH,MAAMuL,MAClB3F,IAAKzF,KAAKH,MAAM4F,IAChB8F,eAAgBvL,KAAKuL,eACrB9G,QAASzE,KAAKH,MAAM4E,QACpBQ,YAAajF,KAAKH,MAAMoF,YACxB2E,cAAe5J,KAAKH,MAAM+J,cAC1B/F,YAAa7D,KAAKH,MAAMgE,YACxBkF,SAAU/I,KAAKH,MAAMkJ,eAxL/B,yBAAKzG,MAAO,CAAEgG,OAAQ,QACpB,kBAACE,EAAA,EAAD,KACGxI,KAAKW,MAAMC,KAAK+N,YADnB,6BANG,kBAAC,IAAD,CAAUvO,GAAG,U,GAtDPI,IAAMC,WC6mBVmO,G,mBA1mBb,WAAYC,GAAO,IAAD,8BAChB,4CAAMA,KACDlO,MAAQ,CACX+J,MAAO,KACP3E,SAAU,KACVe,KAAM,KACNgI,cAAe,KACf9I,UAAW,GACXqF,SAAU,GACVvF,aAAc,GACdgI,kBAAmB,GACnBiB,eAAgB,KAChBtK,QAAS,IAAIuK,IACbnL,YAAa,KACbkF,SAAU,EACV9I,eAAe,GAGjB,EAAKuD,YAAc,EAAKA,YAAYtC,KAAjB,gBACnB,EAAK+N,KAAO,EAAKA,KAAK/N,KAAV,gBACZ,EAAKuE,IAAM,EAAKA,IAAIvE,KAAT,gBACX,EAAKqJ,OAAS,EAAKA,OAAOrJ,KAAZ,gBACd,EAAKgO,UAAY,EAAKA,UAAUhO,KAAf,gBACjB,EAAK+D,YAAc,EAAKA,YAAY/D,KAAjB,gBACnB,EAAK0I,cAAgB,CACnBC,kBAAmB,EAAKA,kBAAkB3I,KAAvB,gBACnBkJ,eAAgB,EAAKA,eAAelJ,KAApB,gBAChB6I,kBAAmB,EAAKA,kBAAkB7I,KAAvB,gBACnBgJ,oBAAqB,EAAKA,oBAAoBhJ,KAAzB,gBACrBqJ,OAAQ,EAAKA,OAAOrJ,KAAZ,iBAKV,EAAKiO,GAAKlQ,EAAemQ,YACzB,EAAKH,OAnCW,E,+EAsCA1L,GAChBxC,QAAQC,IAAI,oBAAqBuC,GACjCvD,KAAKiB,SAAS,CAAE4C,YAAaN,EAAIwF,SAAU,M,qCAE9BA,GACbhI,QAAQC,IAAI,iBAAkB+H,GAC9B/I,KAAKiB,SAAS,CAAE8H,e,wCAEAsG,GAChBtO,QAAQC,IAAI,oBAAqBqO,GACjCrP,KAAKiB,SAAS,CAAE4C,YAAa,OAC7BhF,OAAOyQ,MAAMD,K,0CAEKE,EAAYhM,EAAI0G,GAClClJ,QAAQC,IAAI,sBAAuBuO,EAAYhM,EAAI0G,GACnD/K,IACGuK,UACAC,IAAI,UACJ8F,MAAMvF,GACNwF,iBACAC,KACC,SAASC,GACP,IAAIC,EAAW5P,KAAKW,MAAM8D,QAE1B,OADAmL,EAASnK,IAAIlC,GACLgM,GACN,KAAK,EACH,GAAIvP,KAAKW,MAAMqF,UAAUzC,GAAK,CAC5B,IAAIsM,EAAa7P,KAAKW,MAAMqF,UAC5B6J,EAAWtM,GAAIwB,UAAY4K,EAC3B3P,KAAKiB,SAAS,CACZ+E,UAAW6J,EACX9G,SAAU,IACVlF,YAAa,KACbY,QAASmL,IAGb,MACF,KAAK,EACH,GAAI5P,KAAKW,MAAMmF,aAAavC,GAAK,CAC/B,IAAIuM,EAAgB9P,KAAKW,MAAMmF,aAC/BgK,EAAcvM,GAAIwB,UAAY4K,EAC9B3P,KAAKiB,SAAS,CACZ6E,aAAcgK,EACd/G,SAAU,IACVlF,YAAa,KACbY,QAASmL,IAGb,MACF,KAAK,EACH,GAAI5P,KAAKW,MAAM0K,SAAS9H,GAAK,CAC3B,IAAIwM,EAAY/P,KAAKW,MAAM0K,SAC3B0E,EAAUxM,GAAIwB,UAAY4K,EAC1B3P,KAAKiB,SAAS,CACZoK,SAAU0E,EACVhH,SAAU,IACVlF,YAAa,KACbY,QAASmL,IAGb,MACF,QACE,GAAI5P,KAAKW,MAAMmN,kBAAkBvK,GAAK,CACpC,IAAIyM,EAAqBhQ,KAAKW,MAAMmN,kBACpCkC,EAAmBzM,GAAIwB,UAAY4K,EACnC3P,KAAKiB,SAAS,CACZ6M,kBAAmBkC,EACnBjH,SAAU,IACVlF,YAAa,KACbY,QAASmL,OAIjB1O,KAAKlB,S,kCAIDuP,EAAYhM,GACtB,OAAQgM,GACN,KAAK,EACC3J,OAAOqK,KAAKjQ,KAAKW,MAAMqF,WAAWkK,SAAS3M,GAC7CvD,KAAKiB,SAAS,CACZyJ,MAAOnH,EACPwC,SAAU,KACVe,KAAM,KACNgI,cAAe,OAGjB9O,KAAKiB,SAAS,CACZyJ,MAAO,KACP3E,SAAU,KACVe,KAAM,KACNgI,cAAe,OAInB,MACF,KAAK,EACH,GAAIlJ,OAAOqK,KAAKjQ,KAAKW,MAAMmF,cAAcoK,SAAS3M,GAAK,CACrD,IAAI4M,EAAUnQ,KAAKW,MAAMmF,aAAavC,GAAI0C,SACtCL,OAAOqK,KAAKjQ,KAAKW,MAAMqF,WAAWkK,SAASC,GAC7CnQ,KAAKiB,SAAS,CACZyJ,MAAOyF,EACPpK,SAAUxC,EACVuD,KAAM,KACNgI,cAAe,OAGjB9O,KAAKiB,SAAS,CACZyJ,MAAO,KACP3E,SAAU,KACVe,KAAM,KACNgI,cAAe,YAInB9O,KAAKiB,SAAS,CAAE8E,SAAU,KAAMe,KAAM,KAAMgI,cAAe,OAE7D,MACF,KAAK,EACH,GAAIlJ,OAAOqK,KAAKjQ,KAAKW,MAAM0K,UAAU6E,SAAS3M,GAAK,CACjD,IAAI6M,EAAapQ,KAAKW,MAAM0K,SAAS9H,GAAI4D,YACzC,GAAIvB,OAAOqK,KAAKjQ,KAAKW,MAAMmF,cAAcoK,SAASE,GAAa,CACzDD,EAAUnQ,KAAKW,MAAMmF,aAAasK,GAAYnK,SAC9CL,OAAOqK,KAAKjQ,KAAKW,MAAMqF,WAAWkK,SAASC,GAC7CnQ,KAAKiB,SAAS,CACZyJ,MAAOyF,EACPpK,SAAUqK,EACVtJ,KAAMvD,EACNuL,cAAe,OAGjB9O,KAAKiB,SAAS,CACZyJ,MAAO,KACP3E,SAAU,KACVe,KAAM,KACNgI,cAAe,YAInB9O,KAAKiB,SAAS,CAAE8E,SAAU,KAAMe,KAAM,KAAMgI,cAAe,YAG7D9O,KAAKiB,SAAS,CAAE6F,KAAM,KAAMgI,cAAe,OAE7C,MACF,QACE,GAAIlJ,OAAOqK,KAAKjQ,KAAKW,MAAMmN,mBAAmBoC,SAAS3M,GACxCvD,KAAKW,MAAMmN,kBAAkBvK,GAAIoK,UAC/B3N,KAAKW,MAAMmG,MACxB9G,KAAKiB,SAAS,CAAE6N,cAAevL,SAGjCvD,KAAKiB,SAAS,CAAE6N,cAAe,U,kCAK3BS,EAAYxJ,EAAU0I,EAAQpK,EAAK8B,GAC7C,IACIyJ,EAAW5P,KAAKW,MAAM8D,QAE1B,OAAQ8K,GACN,KAAK,EAGH,GAFiB,SAEZvP,KAAKW,MAAMqF,UAAUD,GACxB,OAIF,IAAI8J,EAAa7P,KAAKW,MAAMqF,UAG5B6J,EAAW9J,GAAU1B,GAAO8B,EAG5ByJ,EAASnK,IAAIM,GAEb/F,KAAKiB,SAAS,CACZ+E,UAAW6J,EACXpL,QAASmL,IAGX,MACF,KAAK,EAIH,GAHiB,YAGZ5P,KAAKW,MAAMmF,aAAaC,GAC3B,OAIF,IAAI+J,EAAgB9P,KAAKW,MAAMmF,aAE3BuK,EAASrQ,KAAKW,MAAM+J,MAGxB,GAAY,aAARrG,EAAoB,CACtB,IAAKrE,KAAKW,MAAMqF,UAAUG,GACxB,OAEFkK,EAASlK,EAIX2J,EAAc/J,GAAU1B,GAAO8B,EAG/ByJ,EAASnK,IAAIM,GAEb/F,KAAKiB,SAAS,CACZ6E,aAAcgK,EACdrL,QAASmL,EACTlF,MAAO2F,IAGT,MACF,KAAK,EAIH,GAHiB,QAGZrQ,KAAKW,MAAM0K,SAAStF,GACvB,OAIF,IAAIgK,EAAY/P,KAAKW,MAAM0K,SAEvBiF,EAAYtQ,KAAKW,MAAMoF,SACvBsK,EAASrQ,KAAKW,MAAM+J,MAExB,GAAY,gBAARrG,EAAuB,CACzB,IAAKrE,KAAKW,MAAMmF,aAAaK,GAC3B,OAEF,IACGnG,KAAKW,MAAMqF,UAAUhG,KAAKW,MAAMmF,aAAaK,GAAxB,UAEtB,OAEFmK,EAAYnK,EACZkK,EAASrQ,KAAKW,MAAMmF,aAAaK,GAAxB,SAIX4J,EAAUhK,GAAU1B,GAAO8B,EAG3ByJ,EAASnK,IAAIM,GAEb/F,KAAKiB,SAAS,CACZoK,SAAU0E,EACVtL,QAASmL,EACT7J,SAAUuK,EACV5F,MAAO2F,IAET,MAEF,QAEE,IAAKrQ,KAAKW,MAAMmN,kBAAkB/H,GAChC,OAGF,IAAIiK,EAAqBhQ,KAAKW,MAAMmN,kBAEpCkC,EAAmBjK,GAAU1B,GAAO8B,EAEpCyJ,EAASnK,IAAIM,GAEb/F,KAAKiB,SAAS,CACZ6M,kBAAmBkC,EACnBvL,QAASmL,O,0BAKbL,EAAYd,GACd,IAAI8B,EAAiB,QACjBrN,EAAO,KACX,OAAQqM,GACN,KAAK,EACHgB,EAAiB,QACjBrN,EAAO,CACL6B,UAAW,KACX5B,WAAY,YACZqL,SAAS,IAAIgC,MAAOC,WAEtB,MACF,KAAK,EACHF,EAAiB,WACjBrN,EAAO,CACLyH,WAAY,EACZvH,cAAe,eACf2B,UAAW,KACX+F,aAAc,4BACd7E,SAAUwI,EACViC,gBAAiB,GACjBlC,SAAS,IAAIgC,MAAOC,WAEtB,MACF,KAAK,EACHF,EAAiB,OACjBrN,EAAO,CACLuE,KAAM,EACNI,OAAQ,GACRD,QAAS,GACTE,mBAAoB,YACpBX,YAAasH,EACbnE,eAAgB,WAChBvF,UAAW,KACX4C,KAAM,oBACNtE,YAAauC,OAAOC,OAAO7F,KAAKW,MAAM0K,UAAUnD,QAAO,SACrDpB,GAEA,OAAOA,EAAKK,cAAgBsH,KAC3BjD,OACHgD,SAAS,IAAIgC,MAAOC,WAEtB,MACF,QACEF,EAAiB,iBACjBrN,EAAO,CACLI,YAAa,qBACbmJ,eAAgB,EAChBE,eAAgB,EAChBH,iBAAkB,EAClBE,iBAAkB,EAClB3H,UAAW,KACX6H,KAAM,GACNe,QAASc,EACTD,SAAS,IAAIgC,MAAOC,WAG1BzQ,KAAKmP,GACFI,WAAWgB,GACX9K,IAAIvC,GACJwM,KACC,SAASiB,GAMP,OALAzN,EAAKK,GAAKoN,EAAOpN,GACjBvD,KAAKmP,GACFI,WAAW,OACXlB,IAAI,cACJuC,IAAI,CAAEzK,MAAOnG,KAAKW,MAAMoO,eAAiB,IACpCQ,GACN,KAAK,EACH,IAAIM,EAAa7P,KAAKW,MAAMqF,UAC5B6J,EAAWc,EAAOpN,IAAML,EACxBlD,KAAKiB,SAAS,CAAEyJ,MAAOiG,EAAOpN,GAAIyC,UAAW6J,IAC7C,MACF,KAAK,EACH,IAAIC,EAAgB9P,KAAKW,MAAMmF,aAC/BgK,EAAca,EAAOpN,IAAML,EAC3BlD,KAAKiB,SAAS,CACZ8E,SAAU4K,EAAOpN,GACjBuC,aAAcgK,IAEhB,MACF,KAAK,EACH,IAAIC,EAAY/P,KAAKW,MAAM0K,SAC3B0E,EAAUY,EAAOpN,IAAML,EACvBlD,KAAKiB,SAAS,CAAE6F,KAAM6J,EAAOpN,GAAI8H,SAAU0E,IAC3C,MACF,QACE,IAAIC,EAAqBhQ,KAAKW,MAAMmN,kBACpCkC,EAAmBW,EAAOpN,IAAML,EAChClD,KAAKiB,SAAS,CACZ6N,cAAe6B,EAAOpN,GACtBuK,kBAAmBkC,MAGzB9O,KAAKlB,S,kCAIA,IAAD,OACVA,KAAKW,MAAM8D,QAAQoM,SAAQ,SAAA9K,GACzB,EAAKwE,OAAO,EAAGxE,GACf,EAAKwE,OAAO,EAAGxE,GACf,EAAKwE,OAAO,EAAGxE,GACf,EAAKwE,OAAO,EAAGxE,Q,6BAIZwJ,EAAYxJ,GACjB,IAAIwK,EAAiB,QACjBrN,EAAO,KACX,OAAQqM,GACN,KAAK,EACHgB,EAAiB,QACjBrN,EAAOlD,KAAKW,MAAMqF,UAAUD,GAC5B,MACF,KAAK,EACHwK,EAAiB,WACjBrN,EAAOlD,KAAKW,MAAMmF,aAAaC,GAC/B,MACF,KAAK,EACHwK,EAAiB,OACjBrN,EAAOlD,KAAKW,MAAM0K,SAAStF,GAC3B,MACF,QACEwK,EAAiB,iBACjBrN,EAAOlD,KAAKW,MAAMmN,kBAAkB/H,GAGpC7C,GACFlD,KAAKmP,GACFI,WAAWgB,GACXlC,IAAItI,GACJ6K,IAAI1N,GACJwM,KACC,WACE1P,KAAKmP,GACFI,WAAW,OACXlB,IAAI,cACJuC,IAAI,CAAEzK,MAAOnG,KAAKW,MAAMoO,eAAiB,IAE5C,IAAIa,EAAW5P,KAAKW,MAAM8D,QAC1BmL,EAASkB,OAAO/K,GAChB/F,KAAKiB,SAAS,CAAEwD,QAASmL,KACzB1O,KAAKlB,S,6BAMb,IAAIgG,EAAY,GACZqF,EAAW,GACXvF,EAAe,GACfgI,EAAoB,GAExBiD,QAAQC,IAAI,CACVhR,KAAKmP,GAAGI,WAAW,SAAS0B,MAC5BjR,KAAKmP,GAAGI,WAAW,YAAY0B,MAC/BjR,KAAKmP,GAAGI,WAAW,QAAQ0B,MAC3BjR,KAAKmP,GAAGI,WAAW,kBAAkB0B,QACpCvB,KACD,SAAS,GAKL,IAAD,mBAJDwB,EAIC,KAHDC,EAGC,KAFDC,EAEC,KADDC,EACC,KACDH,EAAeL,SAAQ,SAAAxC,GACrB,IAAIiD,EAAUjD,EAAIpB,QACK,IAAnBqE,EAAQ/H,SACV+H,EAAQ/N,GAAK8K,EAAI9K,GACjByC,EAAUqI,EAAI9K,IAAM+N,MAGxBH,EAAkBN,SAAQ,SAAAxC,GACxB,IAAIiD,EAAUjD,EAAIpB,QACK,IAAnBqE,EAAQ/H,SACV+H,EAAQ/N,GAAK8K,EAAI9K,GACjBuC,EAAauI,EAAI9K,IAAM+N,MAG3BF,EAAcP,SAAQ,SAAAxC,GACpB,IAAIiD,EAAUjD,EAAIpB,QACK,IAAnBqE,EAAQ/H,SACV+H,EAAQ/N,GAAK8K,EAAI9K,GACjB8H,EAASgD,EAAI9K,IAAM+N,MAGvBD,EAAuBR,SAAQ,SAAAxC,GAC7B,IAAIiD,EAAUjD,EAAIpB,QACK,IAAnBqE,EAAQ/H,SACV+H,EAAQ/N,GAAK8K,EAAI9K,GACjBuK,EAAkBO,EAAI9K,IAAM+N,MAIhCtR,KAAKiB,SAAS,CACZ+E,UAAWA,EACXF,aAAcA,EACduF,SAAUA,EACVyC,kBAAmBA,EACnBrJ,QAAS,IAAIuK,OAEf9N,KAAKlB,S,+BAID,IAAD,OACPA,KAAKH,MAAMhB,OAAO0S,eAAiB,SAASlK,GACV,IAA5BrH,KAAKW,MAAM8D,QAAQpC,OACrBtB,QAAQC,IAAI,kBAGZqG,EAAEmK,iBAGFnK,EAAEoK,YAAc,yBAElBvQ,KAAKlB,MAGP,OACE,kBAAC,IAAD,KACE,yBACEsC,MAAO,CACLqC,gBAAiB3E,KAAKW,MAAMV,cAAgB,QAAU,UAGxD,kBAAC,EAAD,CAAYA,cAAeD,KAAKW,MAAMV,gBACtC,6BACA,kBAAC,IAAD,CAAOyR,OAAK,EAACC,KX7iBF,IW6iBsBC,OAAQ,SAAA/R,GAAK,OAAI,kBAAC,EAAD,SAClD,kBAAC,IAAD,CACE8R,KX9iBQ,QW+iBRC,OAAQ,SAAA/R,GAAK,OACX,6BACE,kBAACmF,EAAA,EAAD,CACEQ,SAAO,EACP5B,SAAsC,IAA5B,EAAKjD,MAAM8D,QAAQpC,KAC7BhC,QAAS,EAAK6O,UACd5M,MAAO,CAAEE,UAAW,MAAOC,WAAY,SAEtC,EAAK9B,MAAM8D,QAAQpC,KANtB,wBASC,EAAK1B,MAAMV,cACV,kBAAC+E,EAAA,EAAD,CACEpB,UAAW,EAAKjD,MAAMmG,KACtBzG,QAAS,WACP,EAAKY,SAAS,CAAEhB,eAAe,KAEjCqC,MAAO,CAAEE,UAAW,MAAOC,WAAY,SALzC,QAUA,kBAACuC,EAAA,EAAD,CACEQ,SAAO,EACP5B,UACG,EAAKjD,MAAMmG,MACZ,EAAKnG,MAAM0K,SAAS,EAAK1K,MAAMmG,MAAMW,MAAQ,GAE/CpH,QAAS,WACP,EAAKY,SAAS,CAAEhB,eAAe,KAEjCqC,MAAO,CAAEE,UAAW,QATtB,kBAeF,kBAAC,EAAD,CACE3D,OAAQ,EAAKgB,MAAMhB,OACnByD,MAAO,CAAEuP,gBAAgB,OAAD,OApDpC,gIAoDoC,MACxB5R,cAAe,EAAKU,MAAMV,cAC1BuD,YAAa,EAAKA,YAClByH,cAAe,EAAKtK,MAAM+J,MAC1BQ,iBAAkB,EAAKvK,MAAMoF,SAC7BoF,aAAc,EAAKxK,MAAMmG,KACzB4H,sBAAuB,EAAK/N,MAAMmO,cAClC1D,MAAO,CACLpF,UAAW,EAAKrF,MAAMqF,UACtBF,aAAc,EAAKnF,MAAMmF,aACzBuF,SAAU,EAAK1K,MAAM0K,SACrByC,kBAAmB,EAAKnN,MAAMmN,mBAEhCvD,OAAQ,EAAKA,OACb0E,KAAM,EAAKA,KACXxJ,IAAK,EAAKA,IACVR,YAAa,EAAKA,YAClBR,QAAS,EAAK9D,MAAM8D,QACpBmF,cAAe,EAAKA,cACpB/F,YAAa,EAAKlD,MAAMkD,YACxBkF,SAAU,EAAKpI,MAAMoI,qB,GAjmBrBvI,IAAMC,Y,SCCxBsF,SAAS+L,UAAY,SAASzK,GAG5B,IAFAA,EAAIA,GAAKxI,OAAOkT,OAETC,QAIP,OAFW3K,EAAE4K,OAAS5K,EAAE6K,SAGtB,KAAK,GACL,KAAK,GACH7K,EAAEmK,iBACFnK,EAAE8K,oBAKRC,IAASR,OACP,kBAACS,EAAA,EAAD,KACE,kBAAC,EAAD,CAAKxT,OAAQA,UAEfkH,SAASuM,eAAe,SfkGpB,kBAAmBC,WACrBA,UAAUC,cAAcC,MAAM/C,MAAK,SAAAgD,GACjCA,EAAaC,kB","file":"static/js/main.230140e1.chunk.js","sourcesContent":["// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import firebase from \"firebase\";\nconst config = {\n  apiKey: \"AIzaSyBM-C_d1o-gVCFRQykdbBI4svOSed8JbDY\",\n  authDomain: \"cell-app.firebaseapp.com\",\n  databaseURL: \"https://cell-app.firebaseio.com\",\n  projectId: \"cell-app\",\n  storageBucket: \"cell-app.appspot.com\",\n  messagingSenderId: \"854633007097\",\n  appId: \"1:854633007097:web:0f1cadc2d35c247e2fdf28\",\n  measurementId: \"G-3ZZ2QEG61Z\"\n};\nconst sharedFirebase = firebase.initializeApp(config);\nexport default sharedFirebase;\n","import React from \"react\";\nimport { Link } from \"react-router-dom\";\nimport * as ROUTES from \"../../constants/routes\";\nimport firebase from \"firebase\";\nimport { Menu } from \"semantic-ui-react\";\nclass Navigation extends React.Component {\n  constructor(props) {\n    super(props);\n  }\n  render() {\n    return (\n      <Menu inverted={this.props.editAnimation} fixed=\"top\">\n        <Menu.Item>\n          <Link\n            to={ROUTES.LOGIN}\n            onClick={() => {\n              firebase.auth().signOut();\n            }}\n          >\n            Sign Out\n          </Link>\n        </Menu.Item>\n        <Menu.Item to={ROUTES.HOME}>\n          <Link>Home</Link>\n        </Menu.Item>\n      </Menu>\n    );\n  }\n}\n\nexport default Navigation;\n","export const LOGIN = \"/\";\nexport const HOME = \"/home\";\n","import React from \"react\";\nimport StyledFirebaseAuth from \"react-firebaseui/StyledFirebaseAuth\";\nimport firebase from \"firebase\";\nimport { Redirect } from \"react-router-dom\";\nimport { Header, Grid } from \"semantic-ui-react\";\n\nclass Login extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = { user: firebase.auth().currentUser };\n    firebase.auth().onAuthStateChanged(\n      function(user) {\n        if (user) {\n          console.log(\"set user\", user);\n          this.setState({ user: user });\n        } else {\n          console.log(\"set user\", null);\n          this.setState({ user: null });\n        }\n      }.bind(this)\n    );\n  }\n  render() {\n    if (this.state.user) {\n      return <Redirect to=\"/home\" />;\n    }\n\n    const uiConfig = {\n      signInFlow: \"popup\",\n      callbacks: {\n        signInSuccessWithAuthResult: function(authResult, redirectUrl) {\n          return false;\n        }\n      },\n\n      signInOptions: [\n        firebase.auth.GoogleAuthProvider.PROVIDER_ID,\n        firebase.auth.EmailAuthProvider.PROVIDER_ID\n      ]\n    };\n\n    return (\n      <div>\n        <Grid container stackable verticalAlign=\"top\">\n          <Grid.Row>\n            <Grid.Column width={4} />\n            <Grid.Column width={8}>\n              <Header\n                size=\"huge\"\n                style={{\n                  fontWeight: \"normal\",\n                  marginTop: \"2em\",\n                  marginLeft: \"2em\",\n                  marginBottom: \"2em\"\n                }}\n              >\n                Login\n              </Header>\n\n              <StyledFirebaseAuth\n                uiConfig={uiConfig}\n                firebaseAuth={firebase.auth()}\n              />\n            </Grid.Column>\n            <Grid.Column width={4} />\n          </Grid.Row>\n        </Grid>\n      </div>\n    );\n  }\n}\n\nexport default Login;\n","import React from \"react\";\nimport { Table, Button, Icon, Image, Radio } from \"semantic-ui-react\";\nclass ItemTable extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = { loading: props.loading, type: props.type };\n    this.getCellContent = this.getCellContent.bind(this);\n    this.getAddButtonLabel = this.getAddButtonLabel.bind(this);\n    this.cellClicked = this.cellClicked.bind(this);\n  }\n\n  getCellContent(item) {\n    switch (this.state.type) {\n      case 0:\n        return item.TOPIC_NAME;\n      case 1:\n        return item.DOCUMENT_NAME;\n      case 2:\n        return `Step ${item.PAGE_NUMBER + 1}`;\n      default:\n        return item.DESCRIPTION;\n    }\n  }\n\n  getAddButtonLabel() {\n    switch (this.state.type) {\n      case 0:\n        return \"Add Topic\";\n      case 1:\n        return \"Add Document\";\n      case 2:\n        return \"Add Step\";\n      default:\n        return \"Add Animation Item\";\n    }\n  }\n\n  cellClicked(id) {\n    this.props.setSelected(id);\n  }\n\n  componentWillReceiveProps() {\n    if (this.state.loading) {\n      this.setState({ loading: false });\n    }\n  }\n\n  render() {\n    console.log(\"itemList item prop\", this.props.items);\n    return (\n      <Table\n        celled\n        disabled={this.props.isUploading}\n        inverted={this.props.editAnimation}\n      >\n        <Table.Header>\n          <Table.Row>\n            <Table.HeaderCell singleLine>{this.props.title}</Table.HeaderCell>\n            {this.props.type === 3 ? (\n              <Table.HeaderCell>Edit</Table.HeaderCell>\n            ) : (\n              \" \"\n            )}\n          </Table.Row>\n        </Table.Header>\n\n        <Table.Body padded>\n          {this.props.items.map(item => (\n            <Table.Row\n              style={{ cursor: \"pointer\" }}\n              key={item.id}\n              onClick={function() {\n                if (!this.props.isUploading) {\n                  this.cellClicked(item.id);\n                }\n              }.bind(this)}\n            >\n              <Table.Cell\n                warning={\n                  this.props.selected !== item.id &&\n                  this.props.changed.has(item.id) &&\n                  !this.props.editAnimation\n                }\n                style={{\n                  backgroundColor: this.props.editAnimation\n                    ? this.props.selected === item.id\n                      ? \"#0a84ffff\"\n                      : \"#333333ff\"\n                    : this.props.selected === item.id\n                    ? \"#007affff\"\n                    : \"white\",\n                  color: this.props.editAnimation\n                    ? this.props.selected === item.id\n                      ? \"#black\"\n                      : \"white\"\n                    : this.props.selected === item.id\n                    ? \"white\"\n                    : \"black\"\n                }}\n              >\n                {this.props.changed.has(item.id) ? (\n                  <Icon name=\"dot circle outline\" />\n                ) : (\n                  \" \"\n                )}\n                {this.getCellContent(item)}\n              </Table.Cell>\n              {this.props.type === 3 ? (\n                <Table.Cell\n                  warning={\n                    this.props.selected !== item.id &&\n                    this.props.changed.has(item.id) &&\n                    !this.props.editAnimation\n                  }\n                  style={{\n                    backgroundColor: this.props.editAnimation\n                      ? this.props.selected === item.id\n                        ? \"#0a84ffff\"\n                        : \"#333333ff\"\n                      : this.props.selected === item.id\n                      ? \"#007affff\"\n                      : \"white\",\n                    color: this.props.editAnimation\n                      ? this.props.selected === item.id\n                        ? \"#black\"\n                        : \"white\"\n                      : this.props.selected === item.id\n                      ? \"white\"\n                      : \"black\"\n                  }}\n                >\n                  {item.IMAGE_URL ? (\n                    <Button\n                      color=\"red\"\n                      disabled={!item.IMAGE_URL || this.props.isUploading}\n                      onClick={function() {\n                        this.props.setKeyValue(\n                          3,\n                          item.id,\n                          null,\n                          \"IMAGE_URL\",\n                          null\n                        );\n                      }.bind(this)}\n                    >\n                      Delete Image\n                    </Button>\n                  ) : (\n                    \"No Image Uploaded\"\n                  )}\n                </Table.Cell>\n              ) : (\n                \" \"\n              )}\n            </Table.Row>\n          ))}\n        </Table.Body>\n        <Table.Footer fullWidth>\n          <Table.Row>\n            <Table.HeaderCell colSpan=\"4\">\n              <Button\n                floated=\"left\"\n                icon\n                labelPosition=\"right\"\n                size=\"small\"\n                primary\n                loading={this.state.loading}\n                disabled={this.state.loading}\n                onClick={function() {\n                  if (this.state.loading) {\n                    return;\n                  }\n                  this.setState({ loading: true });\n                  this.props.add();\n                }.bind(this)}\n              >\n                <Icon name=\"add\" /> {this.getAddButtonLabel()}\n              </Button>\n            </Table.HeaderCell>\n          </Table.Row>\n        </Table.Footer>\n      </Table>\n    );\n  }\n}\nexport default ItemTable;\n","import {\n  Table,\n  Form,\n  Image,\n  Input,\n  Select,\n  TextArea,\n  Button,\n  Segment,\n  Progress,\n  Label,\n  Icon\n} from \"semantic-ui-react\";\nimport React from \"react\";\nimport FileUploader from \"react-firebase-file-uploader\";\nimport firebase from \"firebase\";\n\nclass StepDetail extends React.Component {\n  constructor(props) {\n    super(props);\n  }\n\n  render() {\n    const typeOptions = [\n      { key: \"interactive\", text: `Interactive Animation`, value: 0 },\n      { key: \"auto\", text: `Auto Animation`, value: 1 },\n      { key: \"choice_quiz\", text: `Multiple Choice`, value: 10 },\n      { key: \"fill_quiz\", text: `Fill Blanks`, value: 11 }\n    ];\n    console.log(\"topicList\", this.props);\n    const documentOptions = Object.values(this.props.documentList)\n      .map(\n        function(document) {\n          if (this.props.topicList[document.TOPIC_ID]) {\n            return {\n              key: document.id,\n              text: `${this.props.topicList[document.TOPIC_ID].TOPIC_NAME} - ${\n                document.DOCUMENT_NAME\n              }`,\n              value: document.id\n            };\n          } else {\n            return {\n              key: document.id,\n              text: `${document.DOCUMENT_NAME}`,\n              value: document.id\n            };\n          }\n        }.bind(this)\n      )\n      .sort(function(a, b) {\n        if (a.text > b.text) {\n          return -1;\n        }\n        if (a.text < b.text) {\n          return 1;\n        }\n        return 0;\n      });\n\n    return (\n      <Table celled>\n        <Table.Header>\n          <Table.Row>\n            <Table.HeaderCell>{this.props.title}</Table.HeaderCell>\n          </Table.Row>\n        </Table.Header>\n\n        <Table.Body>\n          <Table.Row>\n            <Table.Cell>\n              <Form>\n                {/* Step ID */}\n                <Form.Group widths=\"equal\">\n                  <Form.Field\n                    id=\"step-detail-id-field\"\n                    control={Input}\n                    label=\"Step ID\"\n                    value={this.props.step.id}\n                    disabled\n                  />\n                </Form.Group>\n\n                {/* Document ID */}\n\n                <Form.Group widths=\"equal\">\n                  <Form.Field\n                    options={documentOptions}\n                    control={Select}\n                    label={{\n                      children: \"In Document\",\n                      htmlFor: \"step-detail-document-id\"\n                    }}\n                    value={this.props.step.DOCUMENT_ID}\n                    onChange={function(e, { value }) {\n                      this.props.setKeyValue(\"DOCUMENT_ID\", value);\n                    }.bind(this)}\n                    disabled\n                  />\n                </Form.Group>\n\n                {/* PageNumber and Type */}\n\n                <Form.Group widths=\"equal\">\n                  <Form.Field\n                    control={Input}\n                    label={{\n                      children: \"Page Number\",\n                      htmlFor: \"step-detail-page-number-field\"\n                    }}\n                    value={function() {\n                      if (isNaN(this.props.step.PAGE_NUMBER)) {\n                        return 0;\n                      } else {\n                        return this.props.step.PAGE_NUMBER + 1;\n                      }\n                    }.bind(this)()}\n                    onChange={function(e, { value }) {\n                      var newPageNumber = parseInt(value);\n                      if (isNaN(newPageNumber)) {\n                        newPageNumber = 1;\n                      }\n                      this.props.setKeyValue(\"PAGE_NUMBER\", newPageNumber - 1);\n                    }.bind(this)}\n                  />\n                  <Form.Field\n                    options={typeOptions}\n                    control={Select}\n                    label={{\n                      children: \"Type\",\n                      htmlFor: \"step-detail-animation-field\"\n                    }}\n                    value={this.props.step.TYPE}\n                    onChange={function(e, { value }) {\n                      this.props.setKeyValue(\"TYPE\", value);\n                    }.bind(this)}\n                  />\n                </Form.Group>\n\n                {/* Main TextField */}\n\n                <Form.Field\n                  id=\"step-detail-text-area\"\n                  control={TextArea}\n                  label=\"Text\"\n                  value={this.props.step.TEXT}\n                  onChange={function(e, { value }) {\n                    this.props.setKeyValue(\"TEXT\", value);\n                  }.bind(this)}\n                />\n\n                {/* Choice TextField */}\n\n                {this.props.step.TYPE == 10 ? (\n                  <Form.Field\n                    id=\"step-detail-choices-area\"\n                    control={TextArea}\n                    label='Choices (seperate by \",\")'\n                    value={this.props.step.CHOICES}\n                    onChange={function(e, { value }) {\n                      this.props.setKeyValue(\"CHOICES\", value);\n                    }.bind(this)}\n                  />\n                ) : (\n                  \" \"\n                )}\n\n                {/* Answer TextField */}\n\n                {this.props.step.TYPE == 10 || this.props.step.TYPE == 11 ? (\n                  <Form.Field\n                    id=\"step-detail-answer-area\"\n                    control={TextArea}\n                    label=\"Answer\"\n                    disabled={this.props.step.TYPE == 10}\n                    value={this.props.step.ANSWER}\n                    onChange={function(e, { value }) {\n                      this.props.setKeyValue(\"ANSWER\", value);\n                    }.bind(this)}\n                  />\n                ) : (\n                  \" \"\n                )}\n\n                {/* Answer Explanation */}\n\n                {this.props.step.TYPE == 10 || this.props.step.TYPE == 11 ? (\n                  <Form.Field\n                    id=\"step-detail-answer-explanation-area\"\n                    control={TextArea}\n                    label=\"Answer Explanation\"\n                    value={this.props.step.ANSWER_EXPLANATION}\n                    onChange={function(e, { value }) {\n                      this.props.setKeyValue(\"ANSWER_EXPLANATION\", value);\n                    }.bind(this)}\n                  />\n                ) : (\n                  \" \"\n                )}\n\n                {/* Multiple Choice Preview Area */}\n\n                {this.props.step.TYPE == 10 && this.props.step.CHOICES ? (\n                  <div style={{ paddingBottom: \"0.5em\" }}>\n                    <Form.Field\n                      id=\"step-detail-choice-field\"\n                      label=\"Select the correct answer\"\n                    />\n                    {this.props.step.CHOICES.trim()\n                      .split(\",\")\n                      .filter(choice => {\n                        return choice.trim().toLowerCase() !== \"\";\n                      })\n                      .map(choice => (\n                        <div>\n                          {this.props.step.ANSWER.trim().toLowerCase() ===\n                            choice.trim().toLowerCase() &&\n                          choice.trim().toLowerCase() !== \"\" ? (\n                            <Label color=\"red\" style={{ margin: \"0.2em\" }}>\n                              <Icon name=\"check\" />\n                              {choice}\n                            </Label>\n                          ) : (\n                            <Label\n                              as=\"a\"\n                              onClick={() =>\n                                this.props.setKeyValue(\"ANSWER\", choice.trim())\n                              }\n                              style={{ margin: \"0.2em\" }}\n                            >\n                              {choice}\n                            </Label>\n                          )}\n\n                          <br></br>\n                        </div>\n                      ))}\n                  </div>\n                ) : (\n                  \" \"\n                )}\n\n                {/* Step Image */}\n\n                <Form.Field label=\"Step Image\"></Form.Field>\n                {this.props.step.IMAGE_URL ? (\n                  <Segment>\n                    <Image\n                      fluid\n                      draggable=\"false\"\n                      src={this.props.step.IMAGE_URL}\n                    />\n                  </Segment>\n                ) : (\n                  \" \"\n                )}\n                {this.props.isUploading ? (\n                  <Progress\n                    color={\"grey\"}\n                    percent={this.props.progress}\n                    indicating\n                  />\n                ) : (\n                  <Form.Group>\n                    <label\n                      style={{\n                        backgroundColor: \"lightGrey\",\n                        color: \"black\",\n                        marginLeft: 8,\n                        padding: 8,\n                        paddingLeft: 16,\n                        paddingRight: 16,\n                        borderRadius: 4,\n                        cursor: \"pointer\"\n                      }}\n                    >\n                      <b>Upload an Image</b>\n                      <FileUploader\n                        accept=\"image/*\"\n                        name=\"step_image\"\n                        randomizeFilename\n                        hidden\n                        storageRef={firebase.storage().ref(\"images\")}\n                        onUploadStart={function() {\n                          this.props.uploadHelpers.handleUploadStart(\n                            this.props.step.id\n                          );\n                        }.bind(this)}\n                        onUploadError={\n                          this.props.uploadHelpers.handleUploadError\n                        }\n                        onUploadSuccess={function(filename) {\n                          this.props.uploadHelpers.handleUploadSuccess(\n                            2,\n                            this.props.step.id,\n                            filename\n                          );\n                        }.bind(this)}\n                        onProgress={this.props.uploadHelpers.handleProgress}\n                        disabled={this.props.isUploading}\n                      />\n                    </label>\n\n                    <Form.Field\n                      id=\"step-detail-remove-image\"\n                      control={Button}\n                      content=\"Remove Image\"\n                      color=\"red\"\n                      disabled={\n                        !this.props.step.IMAGE_URL || this.props.isUploading\n                      }\n                      onClick={function() {\n                        this.props.setKeyValue(\"IMAGE_URL\", null);\n                      }.bind(this)}\n                    />\n                  </Form.Group>\n                )}\n\n                {/* Step Image Subtitle */}\n\n                <Form.Group widths=\"equal\">\n                  <Form.Field\n                    id=\"step-detail-image-subtitle-field\"\n                    control={Input}\n                    label=\"Image Subtitle\"\n                    value={this.props.step.IMAGE_SUBTITLE}\n                    onChange={function(e, { value }) {\n                      this.props.setKeyValue(\"IMAGE_SUBTITLE\", value);\n                    }.bind(this)}\n                  />\n                </Form.Group>\n\n                {/* Save Button */}\n\n                <Form.Field\n                  id=\"step-detail-comform\"\n                  control={Button}\n                  content=\"Save\"\n                  primary\n                  disabled={\n                    !this.props.changed.has(this.props.step.id) ||\n                    this.props.isUploading\n                  }\n                  onClick={function() {\n                    this.props.uploadHelpers.update(2, this.props.step.id);\n                  }.bind(this)}\n                />\n              </Form>\n            </Table.Cell>\n          </Table.Row>\n        </Table.Body>\n      </Table>\n    );\n  }\n}\nexport default StepDetail;\n","import {\n  Table,\n  Form,\n  Image,\n  Input,\n  Select,\n  TextArea,\n  Button,\n  Segment,\n  Progress\n} from \"semantic-ui-react\";\nimport React from \"react\";\nimport FileUploader from \"react-firebase-file-uploader\";\nimport firebase from \"firebase\";\n\nclass DocumentDetail extends React.Component {\n  constructor(props) {\n    super(props);\n  }\n\n  render() {\n    const topicOptions = Object.values(this.props.topicList).map(function(\n      topic\n    ) {\n      return {\n        key: topic.id,\n        text: topic.TOPIC_NAME,\n        value: topic.id\n      };\n    });\n\n    return (\n      <Table celled>\n        <Table.Header>\n          <Table.Row>\n            <Table.HeaderCell>{this.props.title}</Table.HeaderCell>\n          </Table.Row>\n        </Table.Header>\n\n        <Table.Body>\n          <Table.Row>\n            <Table.Cell>\n              <Form>\n                <Form.Group widths=\"equal\">\n                  <Form.Field\n                    id=\"document-detail-id-field\"\n                    control={Input}\n                    label=\"Document ID\"\n                    value={this.props.document.id}\n                    disabled\n                  />\n                </Form.Group>\n                <Form.Group widths=\"equal\">\n                  <Form.Field\n                    id=\"document-detail-name-field\"\n                    control={Input}\n                    label=\"Document Name\"\n                    value={this.props.document.DOCUMENT_NAME}\n                    onChange={function(e, { value }) {\n                      this.props.setKeyValue(\"DOCUMENT_NAME\", value);\n                    }.bind(this)}\n                  />\n                </Form.Group>\n                <Form.Group widths=\"equal\">\n                  <Form.Field\n                    options={topicOptions}\n                    control={Select}\n                    label={{\n                      children: \"In Topic\",\n                      htmlFor: \"document-detail-topic-id\"\n                    }}\n                    value={this.props.document.TOPIC_ID}\n                    onChange={function(e, { value }) {\n                      this.props.setKeyValue(\"TOPIC_ID\", value);\n                    }.bind(this)}\n                  />\n                </Form.Group>\n                <Form.Group widths=\"equal\">\n                  <Form.Field\n                    id=\"document-detail-difficulty-field\"\n                    control={Input}\n                    label=\"Difficulty\"\n                    value={function() {\n                      if (isNaN(this.props.document.DIFFICULTY)) {\n                        return 0;\n                      } else {\n                        return this.props.document.DIFFICULTY;\n                      }\n                    }.bind(this)()}\n                    onChange={function(e, { value }) {\n                      var difficulty = parseInt(value);\n                      if (isNaN(difficulty) || difficulty < 1) {\n                        difficulty = 0;\n                      }\n                      this.props.setKeyValue(\"DIFFICULTY\", difficulty);\n                    }.bind(this)}\n                  />\n                  <Form.Field\n                    id=\"document-detail-pagenumber-field\"\n                    control={Input}\n                    label=\"Page Number\"\n                    value={function() {\n                      if (isNaN(this.props.document.PAGE_NUMBER)) {\n                        return 0;\n                      } else {\n                        return this.props.document.PAGE_NUMBER + 1;\n                      }\n                    }.bind(this)()}\n                    onChange={function(e, { value }) {\n                      var pageNumber = parseInt(value);\n                      if (isNaN(pageNumber) || pageNumber < 0) {\n                        pageNumber = 1;\n                      }\n                      this.props.setKeyValue(\"PAGE_NUMBER\", pageNumber - 1);\n                    }.bind(this)}\n                  />\n                </Form.Group>\n                <Form.Field\n                  id=\"document-detail-text-area\"\n                  control={TextArea}\n                  label=\"Introduction\"\n                  value={this.props.document.INTRODUCTION}\n                  onChange={function(e, { value }) {\n                    this.props.setKeyValue(\"INTRODUCTION\", value);\n                  }.bind(this)}\n                />\n                <Form.Field label=\"Document Image\"></Form.Field>\n                {this.props.document.IMAGE_URL ? (\n                  <Segment>\n                    <Image\n                      draggable=\"false\"\n                      fluid\n                      src={this.props.document.IMAGE_URL}\n                    />\n                  </Segment>\n                ) : (\n                  \" \"\n                )}\n                {this.props.isUploading ? (\n                  <Progress\n                    color={\"grey\"}\n                    percent={this.props.progress}\n                    indicating\n                  />\n                ) : (\n                  <Form.Group>\n                    <label\n                      style={{\n                        backgroundColor: \"lightGrey\",\n                        color: \"black\",\n                        marginLeft: 8,\n                        padding: 8,\n                        paddingLeft: 16,\n                        paddingRight: 16,\n                        borderRadius: 4,\n                        cursor: \"pointer\"\n                      }}\n                    >\n                      <b>Upload an Image</b>\n                      <FileUploader\n                        accept=\"image/*\"\n                        name=\"document_image\"\n                        randomizeFilename\n                        hidden\n                        storageRef={firebase.storage().ref(\"images\")}\n                        onUploadStart={function() {\n                          this.props.uploadHelpers.handleUploadStart(\n                            this.props.document.id\n                          );\n                        }.bind(this)}\n                        onUploadError={\n                          this.props.uploadHelpers.handleUploadError\n                        }\n                        onUploadSuccess={function(filename) {\n                          this.props.uploadHelpers.handleUploadSuccess(\n                            1,\n                            this.props.document.id,\n                            filename\n                          );\n                        }.bind(this)}\n                        onProgress={this.props.uploadHelpers.handleProgress}\n                        disabled={this.props.isUploading}\n                      />\n                    </label>\n\n                    <Form.Field\n                      id=\"document-detail-remove-image\"\n                      control={Button}\n                      content=\"Remove Image\"\n                      color=\"red\"\n                      disabled={\n                        !this.props.document.IMAGE_URL || this.props.isUploading\n                      }\n                      onClick={function() {\n                        this.props.setKeyValue(\"IMAGE_URL\", null);\n                      }.bind(this)}\n                    />\n                  </Form.Group>\n                )}\n\n                <Form.Field\n                  id=\"step-detail-comform\"\n                  control={Button}\n                  content=\"Save\"\n                  primary\n                  disabled={\n                    !this.props.changed.has(this.props.document.id) ||\n                    this.props.isUploading\n                  }\n                  onClick={function() {\n                    this.props.uploadHelpers.update(1, this.props.document.id);\n                  }.bind(this)}\n                />\n              </Form>\n            </Table.Cell>\n          </Table.Row>\n        </Table.Body>\n      </Table>\n    );\n  }\n}\nexport default DocumentDetail;\n","import {\n  Table,\n  Form,\n  Image,\n  Input,\n  Select,\n  TextArea,\n  Button,\n  Segment,\n  Progress\n} from \"semantic-ui-react\";\nimport React from \"react\";\nimport FileUploader from \"react-firebase-file-uploader\";\nimport firebase from \"firebase\";\n\nclass TopicDetail extends React.Component {\n  constructor(props) {\n    super(props);\n  }\n\n  render() {\n    return (\n      <Table celled>\n        <Table.Header>\n          <Table.Row>\n            <Table.HeaderCell>{this.props.title}</Table.HeaderCell>\n          </Table.Row>\n        </Table.Header>\n\n        <Table.Body>\n          <Table.Row>\n            <Table.Cell>\n              <Form>\n                <Form.Group widths=\"equal\">\n                  <Form.Field\n                    id=\"topic-detail-id-field\"\n                    control={Input}\n                    label=\"Topic ID\"\n                    value={this.props.topic.id}\n                    disabled\n                  />\n                </Form.Group>\n                <Form.Group widths=\"equal\">\n                  <Form.Field\n                    id=\"step-detail-image-subtitle-field\"\n                    control={Input}\n                    label=\"Topic Name\"\n                    value={this.props.topic.TOPIC_NAME}\n                    onChange={function(e, { value }) {\n                      this.props.setKeyValue(\"TOPIC_NAME\", value);\n                    }.bind(this)}\n                  />\n                </Form.Group>\n                <Form.Group widths=\"equal\">\n                  <Form.Field\n                    id=\"step-detail-page-number-field\"\n                    control={Input}\n                    label=\"Page Number\"\n                    value={function() {\n                      if (isNaN(this.props.topic.PAGE_NUMBER)) {\n                        return 0;\n                      } else {\n                        return this.props.topic.PAGE_NUMBER + 1;\n                      }\n                    }.bind(this)()}\n                    onChange={function(e, { value }) {\n                      var pageNumber = parseInt(value);\n                      if (isNaN(pageNumber) || pageNumber < 0) {\n                        pageNumber = 1;\n                      }\n                      this.props.setKeyValue(\"PAGE_NUMBER\", pageNumber - 1);\n                    }.bind(this)}\n                  />\n                </Form.Group>\n                <Form.Field label=\"Topic Image\"></Form.Field>\n                {this.props.topic.IMAGE_URL ? (\n                  <Segment>\n                    <Image\n                      draggable=\"false\"\n                      fluid\n                      src={this.props.topic.IMAGE_URL}\n                    />\n                  </Segment>\n                ) : (\n                  \" \"\n                )}\n                {this.props.isUploading ? (\n                  <Progress\n                    color={\"grey\"}\n                    percent={this.props.progress}\n                    indicating\n                  />\n                ) : (\n                  <Form.Group>\n                    <label\n                      style={{\n                        backgroundColor: \"lightGrey\",\n                        color: \"black\",\n                        marginLeft: 8,\n                        padding: 8,\n                        paddingLeft: 16,\n                        paddingRight: 16,\n                        borderRadius: 4,\n                        cursor: \"pointer\"\n                      }}\n                    >\n                      <b>Upload an Image</b>\n                      <FileUploader\n                        accept=\"image/*\"\n                        name=\"topic_image\"\n                        randomizeFilename\n                        hidden\n                        storageRef={firebase.storage().ref(\"images\")}\n                        onUploadStart={function() {\n                          this.props.uploadHelpers.handleUploadStart(\n                            this.props.topic.id\n                          );\n                        }.bind(this)}\n                        onUploadError={\n                          this.props.uploadHelpers.handleUploadError\n                        }\n                        onUploadSuccess={function(filename) {\n                          this.props.uploadHelpers.handleUploadSuccess(\n                            0,\n                            this.props.topic.id,\n                            filename\n                          );\n                        }.bind(this)}\n                        onProgress={this.props.uploadHelpers.handleProgress}\n                        disabled={this.props.isUploading}\n                      />\n                    </label>\n\n                    <Form.Field\n                      id=\"step-detail-remove-image\"\n                      control={Button}\n                      content=\"Remove Image\"\n                      color=\"red\"\n                      disabled={\n                        !this.props.topic.IMAGE_URL || this.props.isUploading\n                      }\n                      onClick={function() {\n                        this.props.setKeyValue(\"IMAGE_URL\", null);\n                      }.bind(this)}\n                    />\n                  </Form.Group>\n                )}\n\n                <Form.Field\n                  id=\"step-detail-comform\"\n                  control={Button}\n                  content=\"Save\"\n                  primary\n                  disabled={\n                    !this.props.changed.has(this.props.topic.id) ||\n                    this.props.isUploading\n                  }\n                  onClick={function() {\n                    this.props.uploadHelpers.update(0, this.props.topic.id);\n                  }.bind(this)}\n                />\n              </Form>\n            </Table.Cell>\n          </Table.Row>\n        </Table.Body>\n      </Table>\n    );\n  }\n}\nexport default TopicDetail;\n","import { Card, Segment, Icon, Image } from \"semantic-ui-react\";\nimport React from \"react\";\nimport StepDetail from \"./stepDetail\";\nimport DocumentDetail from \"./documentDetail\";\nimport TopicDetail from \"./topicDetail\";\nclass HomeDetail extends React.Component {\n  constructor(props) {\n    super(props);\n  }\n  render() {\n    if (this.props.topicSelected) {\n      if (this.props.documentSelected) {\n        if (this.props.stepSelected) {\n          return (\n            <StepDetail\n              step={this.props.lists.stepList[this.props.stepSelected]}\n              stepCount={\n                this.props.filterStepList(this.props.documentSelected).length\n              }\n              title={`${\n                this.props.lists.documentList[this.props.documentSelected]\n                  .DOCUMENT_NAME\n              } - Step ${this.props.lists.stepList[this.props.stepSelected]\n                .PAGE_NUMBER + 1}`}\n              changed={this.props.changed}\n              uploadHelpers={this.props.uploadHelpers}\n              setKeyValue={function(key, value) {\n                this.props.setKeyValue(\n                  2,\n                  this.props.stepSelected,\n                  this.props.documentSelected,\n                  key,\n                  value\n                );\n              }.bind(this)}\n              isUploading={this.props.isUploading}\n              progress={this.props.progress}\n              documentList={this.props.lists.documentList}\n              topicList={this.props.lists.topicList}\n            />\n          );\n        } else {\n          return (\n            <DocumentDetail\n              document={\n                this.props.lists.documentList[this.props.documentSelected]\n              }\n              changed={this.props.changed}\n              title={`${this.props.lists.documentList[this.props.documentSelected].DOCUMENT_NAME}`}\n              uploadHelpers={this.props.uploadHelpers}\n              setKeyValue={function(key, value) {\n                this.props.setKeyValue(\n                  1,\n                  this.props.documentSelected,\n                  this.props.topicSelected,\n                  key,\n                  value\n                );\n              }.bind(this)}\n              isUploading={this.props.isUploading}\n              progress={this.props.progress}\n              topicList={this.props.lists.topicList}\n            />\n          );\n        }\n      } else {\n        return (\n          <TopicDetail\n            topic={this.props.lists.topicList[this.props.topicSelected]}\n            changed={this.props.changed}\n            uploadHelpers={this.props.uploadHelpers}\n            title={`${this.props.lists.topicList[this.props.topicSelected].TOPIC_NAME}`}\n            setKeyValue={function(key, value) {\n              this.props.setKeyValue(\n                0,\n                this.props.topicSelected,\n                null,\n                key,\n                value\n              );\n            }.bind(this)}\n            isUploading={this.props.isUploading}\n            progress={this.props.progress}\n          />\n        );\n      }\n    } else {\n      return (\n        <Segment disabled textAlign=\"center\">\n          Select anything on the left\n        </Segment>\n      );\n    }\n  }\n}\nexport default HomeDetail;\n","import { Card, Segment, Icon, Image } from \"semantic-ui-react\";\nimport React from \"react\";\nimport Draggable from \"react-draggable\";\nclass AnimationCanvas extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      width: 100,\n      height: 100\n    };\n  }\n  componentDidMount() {\n    this.setState({\n      width: this.container.offsetWidth,\n      height: this.container.offsetHeight\n    });\n  }\n  render() {\n    console.log(this.props.items);\n\n    return (\n      <div\n        ref={el => (this.container = el)}\n        style={{ width: \"100%\", height: \"100%\" }}\n      >\n        {this.props.items.map(item => (\n          <Draggable\n            style={{\n              zIndex: item.id === this.props.item.id ? \"100\" : \"1\",\n              position: \"absolute\"\n            }}\n            onStart={() => item.id === this.props.item.id}\n            bounds=\"parent\"\n            onStop={(e, position) => {\n              const { x, y } = position;\n              this.props.onControlledDragStop(\n                e,\n                x / 0.01 / this.state.width,\n                y / 0.01 / this.state.height\n              );\n            }}\n            position={{\n              x:\n                (this.props.start\n                  ? item.START_POSITION_X\n                  : item.END_POSITION_X) *\n                0.01 *\n                this.state.width,\n              y:\n                (this.props.start\n                  ? item.START_POSITION_Y\n                  : item.END_POSITION_Y) *\n                0.01 *\n                this.state.height\n            }}\n          >\n            <Image\n              style={{\n                position: \"absolute\",\n                height: `${item.SIZE}%`,\n                outline:\n                  item.id === this.props.item.id ? \"2px dotted #000000\" : \"\",\n                backgroundColor:\n                  item.id === this.props.item.id ? \"rgba(255, 255, 0, 0.3)\" : \"\"\n              }}\n              src={item.IMAGE_URL}\n              draggable=\"false\"\n            />\n          </Draggable>\n        ))}\n      </div>\n    );\n  }\n}\nexport default AnimationCanvas;\n","import { Table, Checkbox, Image, Form, Input } from \"semantic-ui-react\";\nimport React from \"react\";\nimport AnimationCanvas from \"./animationCanvas\";\n\nclass AnimationStepDetail extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      start: true\n    };\n    this.changeStartEnd = this.changeStartEnd.bind(this);\n  }\n\n  changeStartEnd(_, data) {\n    this.setState({ start: !data.checked });\n  }\n\n  render() {\n    const animationOptions = [\n      { key: \"auto\", text: `Auto`, value: 2 },\n      { key: \"interactive\", text: `Interactive`, value: 0 }\n    ];\n    console.log(\"topicList\", this.props);\n    const documentOptions = Object.values(this.props.documentList)\n      .map(\n        function(document) {\n          if (this.props.topicList[document.TOPIC_ID]) {\n            return {\n              key: document.id,\n              text: `${this.props.topicList[document.TOPIC_ID].TOPIC_NAME} - ${document.DOCUMENT_NAME}`,\n              value: document.id\n            };\n          } else {\n            return {\n              key: document.id,\n              text: `${document.DOCUMENT_NAME}`,\n              value: document.id\n            };\n          }\n        }.bind(this)\n      )\n      .sort(function(a, b) {\n        if (a.text > b.text) {\n          return -1;\n        }\n        if (a.text < b.text) {\n          return 1;\n        }\n        return 0;\n      });\n\n    return (\n      <Table compact celled color=\"black\" inverted>\n        <Table.Header>\n          <Table.Row>\n            <Table.HeaderCell>Animations - {this.props.title}</Table.HeaderCell>\n            <Table.HeaderCell verticalAlign=\"middle\">\n              Start{\" \"}\n              <Checkbox\n                style={{\n                  paddingTop: \"4px\",\n                  marginLeft: \"16px\",\n                  marginRight: \"16px\"\n                }}\n                slider\n                value={this.state.start}\n                onChange={this.changeStartEnd}\n              />{\" \"}\n              End\n            </Table.HeaderCell>\n          </Table.Row>\n        </Table.Header>\n\n        <Table.Body>\n          <Table.Row>\n            <Table.Cell style={{ padding: \"16px\" }}>\n              <div\n                className=\"animation_image_canvas\"\n                style={{ position: \"relative\" }}\n              >\n                <Image src={this.props.step.IMAGE_URL} fluid />\n                <div\n                  style={{\n                    position: \"absolute\",\n                    top: \"0\",\n                    left: \"0\",\n                    width: \"100%\",\n                    height: \"100%\"\n                  }}\n                >\n                  <AnimationCanvas\n                    start={this.state.start}\n                    item={this.props.item}\n                    items={Object.values(this.props.lists).filter(item => {\n                      return item.STEP_ID === this.props.item.STEP_ID;\n                    })}\n                    onControlledDragStop={(e, x, y) => {\n                      if (this.state.start) {\n                        this.props.setKeyValue(\"START_POSITION_X\", x);\n                        this.props.setKeyValue(\"START_POSITION_Y\", y);\n                      } else {\n                        this.props.setKeyValue(\"END_POSITION_X\", x);\n                        this.props.setKeyValue(\"END_POSITION_Y\", y);\n                      }\n                    }}\n                  />\n                </div>\n              </div>\n            </Table.Cell>\n          </Table.Row>\n        </Table.Body>\n        <Table.Footer fullWidth>\n          <Table.Row>\n            <Table.Cell>\n              <Form inverted>\n                <Form.Group widths=\"equal\">\n                  <Form.Field\n                    id=\"animation-item-detail-size-field\"\n                    control={Input}\n                    label=\"Description\"\n                    value={this.props.item.DESCRIPTION}\n                    onChange={function(e, { value }) {\n                      this.props.setKeyValue(\"DESCRIPTION\", value);\n                    }.bind(this)}\n                  />\n                  <Form.Field\n                    id=\"animation-item-detail-size-field\"\n                    control={Input}\n                    label=\"Size\"\n                    value={function() {\n                      if (isNaN(this.props.item.SIZE)) {\n                        return \"10\";\n                      } else {\n                        return this.props.item.SIZE;\n                      }\n                    }.bind(this)()}\n                    onChange={function(e, { value }) {\n                      this.props.setKeyValue(\"SIZE\", value);\n                    }.bind(this)}\n                  />\n                </Form.Group>\n              </Form>\n            </Table.Cell>\n          </Table.Row>\n        </Table.Footer>\n      </Table>\n    );\n  }\n}\nexport default AnimationStepDetail;\n","import { Segment, Progress, Form, Button } from \"semantic-ui-react\";\nimport FileUploader from \"react-firebase-file-uploader\";\nimport firebase from \"firebase\";\nimport React from \"react\";\nimport AnimationStepDetail from \"./animationStepDetail\";\nclass AnimationDetail extends React.Component {\n  constructor(props) {\n    super(props);\n  }\n  render() {\n    var _step = this.props.lists.stepList[this.props.stepSelected];\n    if (this.props.topicSelected) {\n      if (this.props.documentSelected) {\n        if (this.props.stepSelected) {\n          if (_step && _step.IMAGE_URL) {\n            if (this.props.item) {\n              if (this.props.item.IMAGE_URL) {\n                console.log(this.props.lists.animationItemList);\n                console.log(this.props.item);\n                return (\n                  <AnimationStepDetail\n                    step={this.props.lists.stepList[this.props.stepSelected]}\n                    item={this.props.item}\n                    stepCount={\n                      this.props.filterAnimationList(this.props.stepSelected)\n                        .length\n                    }\n                    title={`${this.props.lists.documentList[this.props.documentSelected].DOCUMENT_NAME} - Step ${this.props.lists.stepList[this.props.stepSelected].PAGE_NUMBER}`}\n                    changed={this.props.changed}\n                    uploadHelpers={this.props.uploadHelpers}\n                    setKeyValue={function(key, value) {\n                      this.props.setKeyValue(\n                        3,\n                        this.props.item.id,\n                        this.props.stepSelected,\n                        key,\n                        value\n                      );\n                    }.bind(this)}\n                    lists={this.props.lists.animationItemList}\n                    isUploading={this.props.isUploading}\n                    progress={this.props.progress}\n                    documentList={this.props.lists.documentList}\n                    topicList={this.props.lists.topicList}\n                  />\n                );\n              } else {\n                console.log(this.props.item);\n                return (\n                  <div>\n                    <Segment warning disabled inverted textAlign=\"center\">\n                      Upload an image to create animationItem.\n                    </Segment>\n                    {this.props.isUploading ? (\n                      <Progress\n                        color={\"grey\"}\n                        percent={this.props.progress}\n                        indicating\n                      />\n                    ) : (\n                      <Form>\n                        <Form.Group>\n                          <label\n                            style={{\n                              backgroundColor: \"lightGrey\",\n                              color: \"black\",\n                              marginLeft: 8,\n                              padding: 8,\n                              paddingLeft: 16,\n                              paddingRight: 16,\n                              borderRadius: 4,\n                              cursor: \"pointer\"\n                            }}\n                          >\n                            <b>Upload an Image</b>\n                            <FileUploader\n                              accept=\"image/*\"\n                              name=\"step_image\"\n                              randomizeFilename\n                              hidden\n                              storageRef={firebase.storage().ref(\"images\")}\n                              onUploadStart={function() {\n                                this.props.uploadHelpers.handleUploadStart(\n                                  this.props.item.id\n                                );\n                              }.bind(this)}\n                              onUploadError={\n                                this.props.uploadHelpers.handleUploadError\n                              }\n                              onUploadSuccess={function(filename) {\n                                this.props.uploadHelpers.handleUploadSuccess(\n                                  3,\n                                  this.props.item.id,\n                                  filename\n                                );\n                              }.bind(this)}\n                              onProgress={\n                                this.props.uploadHelpers.handleProgress\n                              }\n                              disabled={this.props.isUploading}\n                            />\n                          </label>\n                        </Form.Group>\n                      </Form>\n                    )}\n                  </div>\n                );\n              }\n            } else {\n              return (\n                <Segment warning disabled inverted textAlign=\"center\">\n                  Please add an animation item to add animation to this step.\n                </Segment>\n              );\n            }\n          } else {\n            return (\n              <Segment warning disabled inverted textAlign=\"center\">\n                Please upload an image to add animations on this step.\n              </Segment>\n            );\n          }\n        } else {\n          return (\n            <Segment warning disabled textAlign=\"center\">\n              Please select a step to edit the animation.\n            </Segment>\n          );\n        }\n      } else {\n        return (\n          <Segment warning disabled textAlign=\"center\">\n            Please select a step to edit the animation.\n          </Segment>\n        );\n      }\n    } else {\n      return (\n        <Segment warning disabled textAlign=\"center\">\n          Please select a step to edit the animation.\n        </Segment>\n      );\n    }\n  }\n}\nexport default AnimationDetail;\n","import React from \"react\";\nimport firebase from \"firebase\";\nimport ItemTable from \"./itemTable\";\nimport { Redirect } from \"react-router-dom\";\nimport { Grid, Segment } from \"semantic-ui-react\";\nimport HomeDetail from \"./HomeDetail\";\nimport AnimationDetail from \"./animationDetail\";\n\nclass Home extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      user: firebase.auth().currentUser,\n      admin: false,\n      topic: null,\n      document: null,\n      step: null,\n      edit: false\n    };\n\n    firebase.auth().onAuthStateChanged(\n      function(user) {\n        if (user) {\n          this.setState({ user: user });\n          if (user.email) {\n            this.setState({\n              admin:\n                firebase.auth().currentUser.email === \"yinluke@gmail.com\" ||\n                firebase.auth().currentUser.email === \"patelks2394@gmail.com\" ||\n                firebase.auth().currentUser.email === \"yinaiguo@gmail.com\"\n            });\n          }\n        } else {\n          this.setState({ user: null });\n        }\n      }.bind(this)\n    );\n    this.filterDocumentList = this.filterDocumentList.bind(this);\n    this.filterStepList = this.filterStepList.bind(this);\n    this.filterAnimationList = this.filterAnimationList.bind(this);\n  }\n  filterDocumentList(id) {\n    return Object.values(this.props.lists.documentList).filter(function(doc) {\n      return doc.TOPIC_ID === id;\n    });\n  }\n\n  filterStepList(id) {\n    return Object.values(this.props.lists.stepList).filter(function(step) {\n      return step.DOCUMENT_ID === id;\n    });\n  }\n  filterAnimationList(id) {\n    return Object.values(this.props.lists.animationItemList).filter(function(\n      item\n    ) {\n      return item.STEP_ID === id;\n    });\n  }\n\n  render() {\n    if (!this.state.user) {\n      return <Redirect to=\"/\" />;\n    }\n\n    if (!this.state.admin) {\n      return (\n        <div style={{ margin: \"4em\" }}>\n          <Segment>\n            {this.state.user.displayName} is not an administrator\n          </Segment>\n        </div>\n      );\n    }\n\n    return (\n      <div>\n        <Grid columns=\"equal\" verticalAlign=\"top\" style={{ padding: \"16px\" }}>\n          <Grid.Row stretched>\n            {!this.props.editAnimation ? (\n              <Grid.Column width={3}>\n                <ItemTable\n                  selected={this.props.topicSelected}\n                  setSelected={id => this.props.setSelected(0, id)}\n                  items={Object.values(this.props.lists.topicList).sort(\n                    function(a, b) {\n                      if (a.PAGE_NUMBER < b.PAGE_NUMBER) {\n                        return -1;\n                      }\n                      if (a.PAGE_NUMBER > b.PAGE_NUMBER) {\n                        return 1;\n                      }\n                      if (a.created < b.created) {\n                        return -1;\n                      }\n                      if (a.created > b.created) {\n                        return 1;\n                      }\n                      return 0;\n                    }\n                  )}\n                  title={\"Topics\"}\n                  add={() => this.props.add(0, null)}\n                  loading={false}\n                  type={0}\n                  setKeyValue={this.props.setKeyValue}\n                  changed={this.props.changed}\n                  isUploading={this.props.isUploading}\n                  progress={this.props.progress}\n                  editAnimation={this.props.editAnimation}\n                />\n              </Grid.Column>\n            ) : (\n              \" \"\n            )}\n\n            {this.props.topicSelected && !this.props.editAnimation ? (\n              <Grid.Column width={3}>\n                <ItemTable\n                  selected={this.props.documentSelected}\n                  setSelected={id => this.props.setSelected(1, id)}\n                  items={this.filterDocumentList(this.props.topicSelected).sort(\n                    function(a, b) {\n                      if (a.PAGE_NUMBER < b.PAGE_NUMBER) {\n                        return -1;\n                      }\n                      if (a.PAGE_NUMBER > b.PAGE_NUMBER) {\n                        return 1;\n                      }\n                      if (a.created < b.created) {\n                        return -1;\n                      }\n                      if (a.created > b.created) {\n                        return 1;\n                      }\n                      return 0;\n                    }\n                  )}\n                  title={\n                    this.props.lists.topicList[this.props.topicSelected]\n                      ? this.props.lists.topicList[this.props.topicSelected]\n                          .TOPIC_NAME\n                      : \"Docuemnt\"\n                  }\n                  add={parent => this.props.add(1, this.props.topicSelected)}\n                  loading={false}\n                  type={1}\n                  setKeyValue={this.props.setKeyValue}\n                  changed={this.props.changed}\n                  isUploading={this.props.isUploading}\n                  progress={this.props.progress}\n                  editAnimation={this.props.editAnimation}\n                />\n              </Grid.Column>\n            ) : (\n              \" \"\n            )}\n\n            {this.props.documentSelected ? (\n              <Grid.Column width={2}>\n                <ItemTable\n                  selected={this.props.stepSelected}\n                  setSelected={id => this.props.setSelected(2, id)}\n                  items={this.filterStepList(this.props.documentSelected).sort(\n                    function(a, b) {\n                      if (a.PAGE_NUMBER < b.PAGE_NUMBER) {\n                        return -1;\n                      }\n                      if (a.PAGE_NUMBER > b.PAGE_NUMBER) {\n                        return 1;\n                      }\n                      return 0;\n                    }\n                  )}\n                  title={\n                    this.props.lists.documentList[this.props.documentSelected]\n                      .DOCUMENT_NAME\n                  }\n                  add={parent => this.props.add(2, this.props.documentSelected)}\n                  loading={false}\n                  type={2}\n                  setKeyValue={this.props.setKeyValue}\n                  changed={this.props.changed}\n                  isUploading={this.props.isUploading}\n                  progress={this.props.progress}\n                  editAnimation={this.props.editAnimation}\n                />\n              </Grid.Column>\n            ) : (\n              \" \"\n            )}\n\n            {this.props.editAnimation ? (\n              <Grid.Column width={6}>\n                <ItemTable\n                  selected={this.props.animationItemSelected}\n                  setSelected={id => this.props.setSelected(3, id)}\n                  items={this.filterAnimationList(this.props.stepSelected)}\n                  title={`${\n                    this.props.lists.documentList[this.props.documentSelected]\n                      .DOCUMENT_NAME\n                  } - Step ${this.props.lists.stepList[this.props.stepSelected]\n                    .PAGE_NUMBER + 1}`}\n                  add={parent => this.props.add(3, this.props.stepSelected)}\n                  loading={false}\n                  type={3}\n                  setKeyValue={this.props.setKeyValue}\n                  changed={this.props.changed}\n                  isUploading={this.props.isUploading}\n                  progress={this.props.progress}\n                  editAnimation={this.props.editAnimation}\n                />\n              </Grid.Column>\n            ) : (\n              \" \"\n            )}\n\n            {this.props.editAnimation && this.props.stepSelected ? (\n              <Grid.Column>\n                <AnimationDetail\n                  topicSelected={this.props.topicSelected}\n                  documentSelected={this.props.documentSelected}\n                  stepSelected={this.props.stepSelected}\n                  item={\n                    this.props.lists.animationItemList[\n                      this.props.animationItemSelected\n                    ]\n                  }\n                  lists={this.props.lists}\n                  add={this.props.add}\n                  filterAnimationList={this.filterAnimationList}\n                  changed={this.props.changed}\n                  setKeyValue={this.props.setKeyValue}\n                  uploadHelpers={this.props.uploadHelpers}\n                  isUploading={this.props.isUploading}\n                  progress={this.props.progress}\n                />\n              </Grid.Column>\n            ) : (\n              <Grid.Column>\n                <HomeDetail\n                  topicSelected={this.props.topicSelected}\n                  documentSelected={this.props.documentSelected}\n                  stepSelected={this.props.stepSelected}\n                  lists={this.props.lists}\n                  add={this.props.add}\n                  filterStepList={this.filterStepList}\n                  changed={this.props.changed}\n                  setKeyValue={this.props.setKeyValue}\n                  uploadHelpers={this.props.uploadHelpers}\n                  isUploading={this.props.isUploading}\n                  progress={this.props.progress}\n                />\n              </Grid.Column>\n            )}\n          </Grid.Row>\n        </Grid>\n      </div>\n    );\n  }\n}\nexport default Home;\n","import React from \"react\";\nimport sharedFirebase from \"./firebase\";\nimport firebase from \"firebase\";\nimport { BrowserRouter as Router, Route } from \"react-router-dom\";\nimport Navigation from \"../Navigation\";\nimport LoginPage from \"../Login\";\nimport HomePage from \"../Home\";\nimport * as ROUTES from \"../../constants/routes\";\nimport { Button, Grid, GridColumn } from \"semantic-ui-react\";\nimport { deflate } from \"zlib\";\nclass App extends React.Component {\n  constructor(prop) {\n    super(prop);\n    this.state = {\n      topic: null,\n      document: null,\n      step: null,\n      animationItem: null,\n      topicList: {},\n      stepList: {},\n      documentList: {},\n      animationItemList: {},\n      currentVersion: null,\n      changed: new Set(),\n      isUploading: null,\n      progress: 0,\n      editAnimation: false\n    };\n\n    this.setSelected = this.setSelected.bind(this);\n    this.load = this.load.bind(this);\n    this.add = this.add.bind(this);\n    this.update = this.update.bind(this);\n    this.updateAll = this.updateAll.bind(this);\n    this.setKeyValue = this.setKeyValue.bind(this);\n    this.uploadHelpers = {\n      handleUploadStart: this.handleUploadStart.bind(this),\n      handleProgress: this.handleProgress.bind(this),\n      handleUploadError: this.handleUploadError.bind(this),\n      handleUploadSuccess: this.handleUploadSuccess.bind(this),\n      update: this.update.bind(this)\n    };\n\n    //firebase setup\n\n    this.db = sharedFirebase.firestore();\n    this.load();\n  }\n\n  handleUploadStart(id) {\n    console.log(\"handleUploadStart\", id);\n    this.setState({ isUploading: id, progress: 0 });\n  }\n  handleProgress(progress) {\n    console.log(\"handleProgress\", progress);\n    this.setState({ progress });\n  }\n  handleUploadError(error) {\n    console.log(\"handleUploadError\", error);\n    this.setState({ isUploading: null });\n    window.alert(error);\n  }\n  handleUploadSuccess(collection, id, filename) {\n    console.log(\"handleUploadSuccess\", collection, id, filename);\n    firebase\n      .storage()\n      .ref(\"images\")\n      .child(filename)\n      .getDownloadURL()\n      .then(\n        function(url) {\n          var _changed = this.state.changed;\n          _changed.add(id);\n          switch (collection) {\n            case 0:\n              if (this.state.topicList[id]) {\n                var _topicList = this.state.topicList;\n                _topicList[id].IMAGE_URL = url;\n                this.setState({\n                  topicList: _topicList,\n                  progress: 100,\n                  isUploading: null,\n                  changed: _changed\n                });\n              }\n              break;\n            case 1:\n              if (this.state.documentList[id]) {\n                var _documentList = this.state.documentList;\n                _documentList[id].IMAGE_URL = url;\n                this.setState({\n                  documentList: _documentList,\n                  progress: 100,\n                  isUploading: null,\n                  changed: _changed\n                });\n              }\n              break;\n            case 2:\n              if (this.state.stepList[id]) {\n                var _stepList = this.state.stepList;\n                _stepList[id].IMAGE_URL = url;\n                this.setState({\n                  stepList: _stepList,\n                  progress: 100,\n                  isUploading: null,\n                  changed: _changed\n                });\n              }\n              break;\n            default:\n              if (this.state.animationItemList[id]) {\n                var _animationItemList = this.state.animationItemList;\n                _animationItemList[id].IMAGE_URL = url;\n                this.setState({\n                  animationItemList: _animationItemList,\n                  progress: 100,\n                  isUploading: null,\n                  changed: _changed\n                });\n              }\n          }\n        }.bind(this)\n      );\n  }\n\n  setSelected(collection, id) {\n    switch (collection) {\n      case 0:\n        if (Object.keys(this.state.topicList).includes(id)) {\n          this.setState({\n            topic: id,\n            document: null,\n            step: null,\n            animationItem: null\n          });\n        } else {\n          this.setState({\n            topic: null,\n            document: null,\n            step: null,\n            animationItem: null\n          });\n        }\n\n        break;\n      case 1:\n        if (Object.keys(this.state.documentList).includes(id)) {\n          var topicID = this.state.documentList[id].TOPIC_ID;\n          if (Object.keys(this.state.topicList).includes(topicID)) {\n            this.setState({\n              topic: topicID,\n              document: id,\n              step: null,\n              animationItem: null\n            });\n          } else {\n            this.setState({\n              topic: null,\n              document: null,\n              step: null,\n              animationItem: null\n            });\n          }\n        } else {\n          this.setState({ document: null, step: null, animationItem: null });\n        }\n        break;\n      case 2:\n        if (Object.keys(this.state.stepList).includes(id)) {\n          var documentID = this.state.stepList[id].DOCUMENT_ID;\n          if (Object.keys(this.state.documentList).includes(documentID)) {\n            var topicID = this.state.documentList[documentID].TOPIC_ID;\n            if (Object.keys(this.state.topicList).includes(topicID)) {\n              this.setState({\n                topic: topicID,\n                document: documentID,\n                step: id,\n                animationItem: null\n              });\n            } else {\n              this.setState({\n                topic: null,\n                document: null,\n                step: null,\n                animationItem: null\n              });\n            }\n          } else {\n            this.setState({ document: null, step: null, animationItem: null });\n          }\n        } else {\n          this.setState({ step: null, animationItem: null });\n        }\n        break;\n      default:\n        if (Object.keys(this.state.animationItemList).includes(id)) {\n          var stepID = this.state.animationItemList[id].STEP_ID;\n          if (stepID === this.state.step) {\n            this.setState({ animationItem: id });\n          }\n        } else {\n          this.setState({ animationItem: null });\n        }\n    }\n  }\n\n  setKeyValue(collection, document, parent, key, value) {\n    var collectionName = \"TOPIC\";\n    var _changed = this.state.changed;\n\n    switch (collection) {\n      case 0:\n        collectionName = \"TOPIC\";\n        //this topic dosen't exist\n        if (!this.state.topicList[document]) {\n          return;\n        }\n\n        //get copy of the whole topicList\n        var _topicList = this.state.topicList;\n\n        //change the key-value\n        _topicList[document][key] = value;\n\n        //add id to changed list\n        _changed.add(document);\n\n        this.setState({\n          topicList: _topicList,\n          changed: _changed\n        });\n\n        break;\n      case 1:\n        collectionName = \"DOCUMENT\";\n\n        //this document dosen't exist\n        if (!this.state.documentList[document]) {\n          return;\n        }\n\n        //get copy of the whole documentList\n        var _documentList = this.state.documentList;\n\n        var _topic = this.state.topic;\n\n        //If change the topic id, make sure it's exist\n        if (key === \"TOPIC_ID\") {\n          if (!this.state.topicList[value]) {\n            return;\n          }\n          _topic = value;\n        }\n\n        //change the key-value\n        _documentList[document][key] = value;\n\n        //add id to changed list\n        _changed.add(document);\n\n        this.setState({\n          documentList: _documentList,\n          changed: _changed,\n          topic: _topic\n        });\n\n        break;\n      case 2:\n        collectionName = \"STEP\";\n\n        //this step dosen't exist\n        if (!this.state.stepList[document]) {\n          return;\n        }\n\n        //get copy of the whole stepList\n        var _stepList = this.state.stepList;\n\n        var _document = this.state.document;\n        var _topic = this.state.topic;\n        //If change the document id, make sure it's exist\n        if (key === \"DOCUMENT_ID\") {\n          if (!this.state.documentList[value]) {\n            return;\n          }\n          if (\n            !this.state.topicList[this.state.documentList[value][\"TOPIC_ID\"]]\n          ) {\n            return;\n          }\n          _document = value;\n          _topic = this.state.documentList[value][\"TOPIC_ID\"];\n        }\n\n        //change the key-value\n        _stepList[document][key] = value;\n\n        //add id to changed list\n        _changed.add(document);\n\n        this.setState({\n          stepList: _stepList,\n          changed: _changed,\n          document: _document,\n          topic: _topic\n        });\n        break;\n\n      default:\n        //this animation item dosen't exist\n        if (!this.state.animationItemList[document]) {\n          return;\n        }\n        //get copy of the whole animationItemList\n        var _animationItemList = this.state.animationItemList;\n        //change the key-value\n        _animationItemList[document][key] = value;\n        //add id to changed list\n        _changed.add(document);\n\n        this.setState({\n          animationItemList: _animationItemList,\n          changed: _changed\n        });\n    }\n  }\n\n  add(collection, parent) {\n    var collectionName = \"TOPIC\";\n    var item = null;\n    switch (collection) {\n      case 0:\n        collectionName = \"TOPIC\";\n        item = {\n          IMAGE_URL: null,\n          TOPIC_NAME: \"New Topic\",\n          created: new Date().getTime()\n        };\n        break;\n      case 1:\n        collectionName = \"DOCUMENT\";\n        item = {\n          DIFFICULTY: 1,\n          DOCUMENT_NAME: \"New Document\",\n          IMAGE_URL: null,\n          INTRODUCTION: \"Add Introduction Here ...\",\n          TOPIC_ID: parent,\n          available_scope: 10,\n          created: new Date().getTime()\n        };\n        break;\n      case 2:\n        collectionName = \"STEP\";\n        item = {\n          TYPE: 1,\n          ANSWER: \"\",\n          CHOICES: \"\",\n          ANSWER_EXPLANATION: \"Good job!\",\n          DOCUMENT_ID: parent,\n          IMAGE_SUBTITLE: \"Subtitle\",\n          IMAGE_URL: null,\n          TEXT: \"Add Text Here ...\",\n          PAGE_NUMBER: Object.values(this.state.stepList).filter(function(\n            step\n          ) {\n            return step.DOCUMENT_ID === parent;\n          }).length,\n          created: new Date().getTime()\n        };\n        break;\n      default:\n        collectionName = \"ANIMATION_ITEM\";\n        item = {\n          DESCRIPTION: \"New Animation Item\",\n          END_POSITION_X: 0.0,\n          END_POSITION_Y: 0.0,\n          START_POSITION_X: 0.0,\n          START_POSITION_Y: 0.0,\n          IMAGE_URL: null,\n          SIZE: 10,\n          STEP_ID: parent,\n          created: new Date().getTime()\n        };\n    }\n    this.db\n      .collection(collectionName)\n      .add(item)\n      .then(\n        function(docRef) {\n          item.id = docRef.id;\n          this.db\n            .collection(\"var\")\n            .doc(\"db_version\")\n            .set({ value: this.state.currentVersion + 1 });\n          switch (collection) {\n            case 0:\n              var _topicList = this.state.topicList;\n              _topicList[docRef.id] = item;\n              this.setState({ topic: docRef.id, topicList: _topicList });\n              break;\n            case 1:\n              var _documentList = this.state.documentList;\n              _documentList[docRef.id] = item;\n              this.setState({\n                document: docRef.id,\n                documentList: _documentList\n              });\n              break;\n            case 2:\n              var _stepList = this.state.stepList;\n              _stepList[docRef.id] = item;\n              this.setState({ step: docRef.id, stepList: _stepList });\n              break;\n            default:\n              var _animationItemList = this.state.animationItemList;\n              _animationItemList[docRef.id] = item;\n              this.setState({\n                animationItem: docRef.id,\n                animationItemList: _animationItemList\n              });\n          }\n        }.bind(this)\n      );\n  }\n\n  updateAll() {\n    this.state.changed.forEach(document => {\n      this.update(0, document);\n      this.update(1, document);\n      this.update(2, document);\n      this.update(3, document);\n    });\n  }\n\n  update(collection, document) {\n    var collectionName = \"TOPIC\";\n    var item = null;\n    switch (collection) {\n      case 0:\n        collectionName = \"TOPIC\";\n        item = this.state.topicList[document];\n        break;\n      case 1:\n        collectionName = \"DOCUMENT\";\n        item = this.state.documentList[document];\n        break;\n      case 2:\n        collectionName = \"STEP\";\n        item = this.state.stepList[document];\n        break;\n      default:\n        collectionName = \"ANIMATION_ITEM\";\n        item = this.state.animationItemList[document];\n    }\n\n    if (item) {\n      this.db\n        .collection(collectionName)\n        .doc(document)\n        .set(item)\n        .then(\n          function() {\n            this.db\n              .collection(\"var\")\n              .doc(\"db_version\")\n              .set({ value: this.state.currentVersion + 1 });\n\n            var _changed = this.state.changed;\n            _changed.delete(document);\n            this.setState({ changed: _changed });\n          }.bind(this)\n        );\n    }\n  }\n\n  load() {\n    var topicList = {};\n    var stepList = {};\n    var documentList = {};\n    var animationItemList = {};\n\n    Promise.all([\n      this.db.collection(\"TOPIC\").get(),\n      this.db.collection(\"DOCUMENT\").get(),\n      this.db.collection(\"STEP\").get(),\n      this.db.collection(\"ANIMATION_ITEM\").get()\n    ]).then(\n      function([\n        topicSnapshots,\n        documentSnapshots,\n        stepSnapshots,\n        animationItemSnapshots\n      ]) {\n        topicSnapshots.forEach(doc => {\n          var thisDoc = doc.data();\n          if (thisDoc.hidden !== true) {\n            thisDoc.id = doc.id;\n            topicList[doc.id] = thisDoc;\n          }\n        });\n        documentSnapshots.forEach(doc => {\n          var thisDoc = doc.data();\n          if (thisDoc.hidden !== true) {\n            thisDoc.id = doc.id;\n            documentList[doc.id] = thisDoc;\n          }\n        });\n        stepSnapshots.forEach(doc => {\n          var thisDoc = doc.data();\n          if (thisDoc.hidden !== true) {\n            thisDoc.id = doc.id;\n            stepList[doc.id] = thisDoc;\n          }\n        });\n        animationItemSnapshots.forEach(doc => {\n          var thisDoc = doc.data();\n          if (thisDoc.hidden !== true) {\n            thisDoc.id = doc.id;\n            animationItemList[doc.id] = thisDoc;\n          }\n        });\n\n        this.setState({\n          topicList: topicList,\n          documentList: documentList,\n          stepList: stepList,\n          animationItemList: animationItemList,\n          changed: new Set()\n        });\n      }.bind(this)\n    );\n  }\n\n  render() {\n    this.props.window.onbeforeunload = function(e) {\n      if (this.state.changed.size !== 0) {\n        console.log(\"onbeforeunload\");\n\n        // Cancel the event\n        e.preventDefault();\n\n        // Chrome requires returnValue to be set\n        e.returnValue = \"Really want to quit?\";\n      }\n    }.bind(this);\n    var imageURL =\n      \"https://firebasestorage.googleapis.com/v0/b/cell-app.appspot.com/o/bkimg?alt=media&token=4ea31dfb-89c0-4738-913f-066ab55c21f1\";\n    return (\n      <Router>\n        <div\n          style={{\n            backgroundColor: this.state.editAnimation ? \"black\" : \"white\"\n          }}\n        >\n          <Navigation editAnimation={this.state.editAnimation} />\n          <hr />\n          <Route exact path={ROUTES.LOGIN} render={props => <LoginPage />} />\n          <Route\n            path={ROUTES.HOME}\n            render={props => (\n              <div>\n                <Button\n                  primary\n                  disabled={this.state.changed.size === 0}\n                  onClick={this.updateAll}\n                  style={{ marginTop: \"4em\", marginLeft: \"16px\" }}\n                >\n                  {this.state.changed.size} Change(s), Save All\n                </Button>\n\n                {this.state.editAnimation ? (\n                  <Button\n                    disabled={!this.state.step}\n                    onClick={() => {\n                      this.setState({ editAnimation: false });\n                    }}\n                    style={{ marginTop: \"4em\", marginLeft: \"16px\" }}\n                  >\n                    Back\n                  </Button>\n                ) : (\n                  <Button\n                    primary\n                    disabled={\n                      !this.state.step ||\n                      this.state.stepList[this.state.step].TYPE >= 10\n                    }\n                    onClick={() => {\n                      this.setState({ editAnimation: true });\n                    }}\n                    style={{ marginTop: \"4em\" }}\n                  >\n                    Edit Animation\n                  </Button>\n                )}\n\n                <HomePage\n                  window={this.props.window}\n                  style={{ backgroundImage: `url(${imageURL})` }}\n                  editAnimation={this.state.editAnimation}\n                  setSelected={this.setSelected}\n                  topicSelected={this.state.topic}\n                  documentSelected={this.state.document}\n                  stepSelected={this.state.step}\n                  animationItemSelected={this.state.animationItem}\n                  lists={{\n                    topicList: this.state.topicList,\n                    documentList: this.state.documentList,\n                    stepList: this.state.stepList,\n                    animationItemList: this.state.animationItemList\n                  }}\n                  update={this.update}\n                  load={this.load}\n                  add={this.add}\n                  setKeyValue={this.setKeyValue}\n                  changed={this.state.changed}\n                  uploadHelpers={this.uploadHelpers}\n                  isUploading={this.state.isUploading}\n                  progress={this.state.progress}\n                />\n              </div>\n            )}\n          />\n        </div>\n      </Router>\n    );\n  }\n}\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport * as serviceWorker from \"./serviceWorker\";\nimport \"semantic-ui-css/semantic.min.css\";\n\nimport App from \"./components/App\";\n\nimport { Responsive } from \"semantic-ui-react\";\n\n//Prevent Ctrl+S (and Ctrl+W for old browsers and Edge)\ndocument.onkeydown = function(e) {\n  e = e || window.event; //Get event\n\n  if (!e.ctrlKey) return;\n\n  var code = e.which || e.keyCode; //Get key code\n\n  switch (code) {\n    case 83: //Block Ctrl+S\n    case 87: //Block Ctrl+W -- Not work in Chrome and new Firefox\n      e.preventDefault();\n      e.stopPropagation();\n      break;\n  }\n};\n\nReactDOM.render(\n  <Responsive>\n    <App window={window} />\n  </Responsive>,\n  document.getElementById(\"root\")\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}