{"version":3,"sources":["serviceWorker.js","components/App/firebase.js","components/Navigation/index.js","constants/routes.js","components/Login/index.js","components/Home/itemTable.js","components/Home/stepDetail.js","components/Home/documentDetail.js","components/Home/topicDetail.js","components/Home/HomeDetail.js","components/Home/index.js","components/App/index.js","index.js"],"names":["Boolean","window","location","hostname","match","sharedFirebase","firebase","initializeApp","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","measurementId","Navigation","Menu","fixed","Item","to","onClick","auth","signOut","Login","props","state","user","currentUser","onAuthStateChanged","console","log","this","setState","bind","uiConfig","signInFlow","callbacks","signInSuccessWithAuthResult","authResult","redirectUrl","signInOptions","GoogleAuthProvider","PROVIDER_ID","EmailAuthProvider","Grid","container","stackable","verticalAlign","Row","Column","width","Header","size","style","fontWeight","marginTop","marginLeft","marginBottom","firebaseAuth","React","Component","ItemTable","loading","type","getCellContent","getAddButtonLabel","cellClicked","item","TOPIC_NAME","DOCUMENT_NAME","PAGE_NUMBER","id","setSelected","items","Table","celled","disabled","isUploading","HeaderCell","title","Body","map","cursor","key","changed","has","Cell","warning","selected","backgroundColor","color","Icon","name","Footer","fullWidth","colSpan","Button","floated","icon","labelPosition","primary","add","StepDetail","documentOptions","Object","values","documentList","document","topicList","TOPIC_ID","text","value","sort","a","b","Form","Group","widths","Field","control","Input","label","step","options","Select","children","htmlFor","DOCUMENT_ID","onChange","e","setKeyValue","isNaN","newPageNumber","parseInt","AUTO_ANIMATION","TextArea","TEXT","IMAGE_URL","Segment","Image","fluid","src","Progress","percent","progress","indicating","padding","paddingLeft","paddingRight","borderRadius","accept","randomizeFilename","hidden","storageRef","storage","ref","onUploadStart","uploadHelpers","handleUploadStart","onUploadError","handleUploadError","onUploadSuccess","filename","handleUploadSuccess","onProgress","handleProgress","content","IMAGE_SUBTITLE","update","DocumentDetail","topicOptions","topic","DIFFICULTY","difficulty","pageNumber","INTRODUCTION","TopicDetail","HomeDetail","topicSelected","documentSelected","stepSelected","lists","stepList","stepCount","filterStepList","length","textAlign","Home","admin","edit","email","filterDocumentList","filter","doc","columns","stretched","created","parent","margin","displayName","App","prop","currentVersion","Set","load","db","firestore","error","alert","collection","child","getDownloadURL","then","url","_changed","_topicList","_documentList","_stepList","keys","includes","topicID","documentID","_topic","_document","collectionName","Date","getTime","available_scope","docRef","set","trace","delete","Promise","all","get","topicSnapshots","documentSnapshots","stepSnapshots","forEach","thisDoc","data","exact","path","render","backgroundImage","onbeforeunload","preventDefault","returnValue","onkeydown","event","ctrlKey","which","keyCode","stopPropagation","ReactDOM","Responsive","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.49600412.chunk.js","sourcesContent":["// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import firebase from \"firebase\";\nconst config = {\n  apiKey: \"AIzaSyBM-C_d1o-gVCFRQykdbBI4svOSed8JbDY\",\n  authDomain: \"cell-app.firebaseapp.com\",\n  databaseURL: \"https://cell-app.firebaseio.com\",\n  projectId: \"cell-app\",\n  storageBucket: \"cell-app.appspot.com\",\n  messagingSenderId: \"854633007097\",\n  appId: \"1:854633007097:web:0f1cadc2d35c247e2fdf28\",\n  measurementId: \"G-3ZZ2QEG61Z\"\n};\nconst sharedFirebase = firebase.initializeApp(config);\nexport default sharedFirebase;\n","import React from \"react\";\nimport { Link } from \"react-router-dom\";\nimport * as ROUTES from \"../../constants/routes\";\nimport firebase from \"firebase\";\nimport { Menu } from \"semantic-ui-react\";\nconst Navigation = () => (\n  <Menu fixed=\"top\">\n    <Menu.Item>\n      <Link\n        to={ROUTES.LOGIN}\n        onClick={() => {\n          firebase.auth().signOut();\n        }}\n      >\n        Sign Out\n      </Link>\n    </Menu.Item>\n    <Menu.Item to={ROUTES.HOME}>\n      <Link>Home</Link>\n    </Menu.Item>\n  </Menu>\n);\n\nexport default Navigation;\n","export const LOGIN = \"/\";\nexport const HOME = \"/home\";\n","import React from \"react\";\nimport StyledFirebaseAuth from \"react-firebaseui/StyledFirebaseAuth\";\nimport firebase from \"firebase\";\nimport { Redirect } from \"react-router-dom\";\nimport { Header, Grid } from \"semantic-ui-react\";\n\nclass Login extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = { user: firebase.auth().currentUser };\n    firebase.auth().onAuthStateChanged(\n      function(user) {\n        if (user) {\n          console.log(\"set user\", user);\n          this.setState({ user: user });\n        } else {\n          console.log(\"set user\", null);\n          this.setState({ user: null });\n        }\n      }.bind(this)\n    );\n  }\n  render() {\n    if (this.state.user) {\n      return <Redirect to=\"/home\" />;\n    }\n\n    const uiConfig = {\n      signInFlow: \"popup\",\n      callbacks: {\n        signInSuccessWithAuthResult: function(authResult, redirectUrl) {\n          return false;\n        }\n      },\n\n      signInOptions: [\n        firebase.auth.GoogleAuthProvider.PROVIDER_ID,\n        firebase.auth.EmailAuthProvider.PROVIDER_ID\n      ]\n    };\n\n    return (\n      <div>\n        <Grid container stackable verticalAlign=\"top\">\n          <Grid.Row>\n            <Grid.Column width={4} />\n            <Grid.Column width={8}>\n              <Header\n                size=\"huge\"\n                style={{\n                  fontWeight: \"normal\",\n                  marginTop: \"2em\",\n                  marginLeft: \"2em\",\n                  marginBottom: \"2em\"\n                }}\n              >\n                Login\n              </Header>\n\n              <StyledFirebaseAuth\n                uiConfig={uiConfig}\n                firebaseAuth={firebase.auth()}\n              />\n            </Grid.Column>\n            <Grid.Column width={4} />\n          </Grid.Row>\n        </Grid>\n      </div>\n    );\n  }\n}\n\nexport default Login;\n","import React from \"react\";\nimport { Table, Button, Icon, Text } from \"semantic-ui-react\";\nclass ItemTable extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = { loading: props.loading, type: props.type };\n    this.getCellContent = this.getCellContent.bind(this);\n    this.getAddButtonLabel = this.getAddButtonLabel.bind(this);\n    this.cellClicked = this.cellClicked.bind(this);\n  }\n\n  getCellContent(item) {\n    switch (this.state.type) {\n      case 0:\n        return item.TOPIC_NAME;\n      case 1:\n        return item.DOCUMENT_NAME;\n      default:\n        return `Step ${item.PAGE_NUMBER + 1}`;\n    }\n  }\n\n  getAddButtonLabel() {\n    switch (this.state.type) {\n      case 0:\n        return \"Add Topic\";\n      case 1:\n        return \"Add Document\";\n      default:\n        return \"Add Step\";\n    }\n  }\n\n  cellClicked(id) {\n    this.props.setSelected(id);\n  }\n\n  componentWillReceiveProps() {\n    if (this.state.loading) {\n      this.setState({ loading: false });\n    }\n  }\n\n  render() {\n    console.log(\"itemList item prop\", this.props.items);\n    return (\n      <Table celled disabled={this.props.isUploading}>\n        <Table.Header>\n          <Table.Row>\n            <Table.HeaderCell>{this.props.title}</Table.HeaderCell>\n          </Table.Row>\n        </Table.Header>\n\n        <Table.Body>\n          {this.props.items.map(item => (\n            <Table.Row\n              style={{ cursor: \"pointer\" }}\n              key={item.id}\n              onClick={function() {\n                if (!this.props.isUploading) {\n                  this.cellClicked(item.id);\n                }\n              }.bind(this)}\n            >\n              {this.props.changed.has(item.id) ? (\n                <Table.Cell\n                  warning={this.props.selected != item.id}\n                  style={{\n                    backgroundColor:\n                      this.props.selected === item.id ? \"#007affff\" : \"white\",\n                    color: this.props.selected === item.id ? \"white\" : \"black\"\n                  }}\n                >\n                  <Icon name=\"dot circle outline\" />\n                  {this.getCellContent(item)}\n                </Table.Cell>\n              ) : (\n                <Table.Cell\n                  style={{\n                    backgroundColor:\n                      this.props.selected === item.id ? \"#007affff\" : \"white\",\n                    color: this.props.selected === item.id ? \"white\" : \"black\"\n                  }}\n                >\n                  {this.getCellContent(item)}\n                </Table.Cell>\n              )}\n            </Table.Row>\n          ))}\n        </Table.Body>\n        <Table.Footer fullWidth>\n          <Table.Row>\n            <Table.HeaderCell colSpan=\"4\">\n              <Button\n                floated=\"left\"\n                icon\n                labelPosition=\"right\"\n                size=\"small\"\n                primary\n                loading={this.state.loading}\n                disabled={this.state.loading}\n                onClick={function() {\n                  if (this.state.loading) {\n                    return;\n                  }\n                  this.setState({ loading: true });\n                  this.props.add();\n                }.bind(this)}\n              >\n                <Icon name=\"add\" /> {this.getAddButtonLabel()}\n              </Button>\n            </Table.HeaderCell>\n          </Table.Row>\n        </Table.Footer>\n      </Table>\n    );\n  }\n}\nexport default ItemTable;\n","import {\n  Table,\n  Form,\n  Image,\n  Input,\n  Select,\n  TextArea,\n  Button,\n  Segment,\n  Progress\n} from \"semantic-ui-react\";\nimport React from \"react\";\nimport FileUploader from \"react-firebase-file-uploader\";\nimport firebase from \"firebase\";\n\nclass StepDetail extends React.Component {\n  constructor(props) {\n    super(props);\n  }\n\n  render() {\n    const animationOptions = [\n      { key: \"auto\", text: `Auto`, value: 2 },\n      { key: \"interactive\", text: `Interactive`, value: 0 }\n    ];\n    console.log(\"topicList\", this.props);\n    const documentOptions = Object.values(this.props.documentList)\n      .map(\n        function(document) {\n          if (this.props.topicList[document.TOPIC_ID]) {\n            return {\n              key: document.id,\n              text: `${this.props.topicList[document.TOPIC_ID].TOPIC_NAME} - ${document.DOCUMENT_NAME}`,\n              value: document.id\n            };\n          } else {\n            return {\n              key: document.id,\n              text: `${document.DOCUMENT_NAME}`,\n              value: document.id\n            };\n          }\n        }.bind(this)\n      )\n      .sort(function(a, b) {\n        if (a.text > b.text) {\n          return -1;\n        }\n        if (a.text < b.text) {\n          return 1;\n        }\n        return 0;\n      });\n\n    return (\n      <Table celled>\n        <Table.Header>\n          <Table.Row>\n            <Table.HeaderCell>{this.props.title}</Table.HeaderCell>\n          </Table.Row>\n        </Table.Header>\n\n        <Table.Body>\n          <Table.Row>\n            <Table.Cell>\n              <Form>\n                <Form.Group widths=\"equal\">\n                  <Form.Field\n                    id=\"step-detail-id-field\"\n                    control={Input}\n                    label=\"Step ID\"\n                    value={this.props.step.id}\n                    disabled\n                  />\n                </Form.Group>\n                <Form.Group widths=\"equal\">\n                  <Form.Field\n                    options={documentOptions}\n                    control={Select}\n                    label={{\n                      children: \"In Document\",\n                      htmlFor: \"step-detail-document-id\"\n                    }}\n                    value={this.props.step.DOCUMENT_ID}\n                    onChange={function(e, { value }) {\n                      this.props.setKeyValue(\"DOCUMENT_ID\", value);\n                    }.bind(this)}\n                    disabled\n                  />\n                </Form.Group>\n                <Form.Group widths=\"equal\">\n                  <Form.Field\n                    control={Input}\n                    label={{\n                      children: \"Page Number\",\n                      htmlFor: \"step-detail-page-number-field\"\n                    }}\n                    value={function() {\n                      if (isNaN(this.props.step.PAGE_NUMBER)) {\n                        return 0;\n                      } else {\n                        return this.props.step.PAGE_NUMBER + 1;\n                      }\n                    }.bind(this)()}\n                    onChange={function(e, { value }) {\n                      var newPageNumber = parseInt(value);\n                      if (isNaN(newPageNumber)) {\n                        newPageNumber = 1;\n                      }\n                      this.props.setKeyValue(\"PAGE_NUMBER\", newPageNumber - 1);\n                    }.bind(this)}\n                  />\n                  <Form.Field\n                    options={animationOptions}\n                    control={Select}\n                    label={{\n                      children: \"Animation\",\n                      htmlFor: \"step-detail-animation-field\"\n                    }}\n                    value={this.props.step.AUTO_ANIMATION}\n                    onChange={function(e, { value }) {\n                      this.props.setKeyValue(\"AUTO_ANIMATION\", value);\n                    }.bind(this)}\n                  />\n                </Form.Group>\n                <Form.Field\n                  id=\"step-detail-text-area\"\n                  control={TextArea}\n                  label=\"Text\"\n                  value={this.props.step.TEXT}\n                  onChange={function(e, { value }) {\n                    this.props.setKeyValue(\"TEXT\", value);\n                  }.bind(this)}\n                />\n                <Form.Field label=\"Step Image\"></Form.Field>\n                {this.props.step.IMAGE_URL ? (\n                  <Segment>\n                    <Image fluid src={this.props.step.IMAGE_URL} />\n                  </Segment>\n                ) : (\n                  \" \"\n                )}\n                {this.props.isUploading ? (\n                  <Progress\n                    color={\"grey\"}\n                    percent={this.props.progress}\n                    indicating\n                  />\n                ) : (\n                  <Form.Group>\n                    <label\n                      style={{\n                        backgroundColor: \"lightGrey\",\n                        color: \"black\",\n                        marginLeft: 8,\n                        padding: 8,\n                        paddingLeft: 16,\n                        paddingRight: 16,\n                        borderRadius: 4,\n                        cursor: \"pointer\"\n                      }}\n                    >\n                      <b>Upload an Image</b>\n                      <FileUploader\n                        accept=\"image/*\"\n                        name=\"step_image\"\n                        randomizeFilename\n                        hidden\n                        storageRef={firebase.storage().ref(\"images\")}\n                        onUploadStart={function() {\n                          this.props.uploadHelpers.handleUploadStart(\n                            this.props.step.id\n                          );\n                        }.bind(this)}\n                        onUploadError={\n                          this.props.uploadHelpers.handleUploadError\n                        }\n                        onUploadSuccess={function(filename) {\n                          this.props.uploadHelpers.handleUploadSuccess(\n                            2,\n                            this.props.step.id,\n                            filename\n                          );\n                        }.bind(this)}\n                        onProgress={this.props.uploadHelpers.handleProgress}\n                        disabled={this.props.isUploading}\n                      />\n                    </label>\n\n                    <Form.Field\n                      id=\"step-detail-remove-image\"\n                      control={Button}\n                      content=\"Remove Image\"\n                      color=\"red\"\n                      disabled={\n                        !this.props.step.IMAGE_URL || this.props.isUploading\n                      }\n                      onClick={function() {\n                        this.props.setKeyValue(\"IMAGE_URL\", null);\n                      }.bind(this)}\n                    />\n                  </Form.Group>\n                )}\n                <Form.Group widths=\"equal\">\n                  <Form.Field\n                    id=\"step-detail-image-subtitle-field\"\n                    control={Input}\n                    label=\"Image Subtitle\"\n                    value={this.props.step.IMAGE_SUBTITLE}\n                    onChange={function(e, { value }) {\n                      this.props.setKeyValue(\"IMAGE_SUBTITLE\", value);\n                    }.bind(this)}\n                  />\n                </Form.Group>\n                <Form.Field\n                  id=\"step-detail-comform\"\n                  control={Button}\n                  content=\"Save\"\n                  primary\n                  disabled={\n                    !this.props.changed.has(this.props.step.id) ||\n                    this.props.isUploading\n                  }\n                  onClick={function() {\n                    this.props.uploadHelpers.update(2, this.props.step.id);\n                  }.bind(this)}\n                />\n              </Form>\n            </Table.Cell>\n          </Table.Row>\n        </Table.Body>\n      </Table>\n    );\n  }\n}\nexport default StepDetail;\n","import {\n  Table,\n  Form,\n  Image,\n  Input,\n  Select,\n  TextArea,\n  Button,\n  Segment,\n  Progress\n} from \"semantic-ui-react\";\nimport React from \"react\";\nimport FileUploader from \"react-firebase-file-uploader\";\nimport firebase from \"firebase\";\n\nclass DocumentDetail extends React.Component {\n  constructor(props) {\n    super(props);\n  }\n\n  render() {\n    const topicOptions = Object.values(this.props.topicList).map(function(\n      topic\n    ) {\n      return {\n        key: topic.id,\n        text: topic.TOPIC_NAME,\n        value: topic.id\n      };\n    });\n\n    return (\n      <Table celled>\n        <Table.Header>\n          <Table.Row>\n            <Table.HeaderCell>{this.props.title}</Table.HeaderCell>\n          </Table.Row>\n        </Table.Header>\n\n        <Table.Body>\n          <Table.Row>\n            <Table.Cell>\n              <Form>\n                <Form.Group widths=\"equal\">\n                  <Form.Field\n                    id=\"document-detail-id-field\"\n                    control={Input}\n                    label=\"Document ID\"\n                    value={this.props.document.id}\n                    disabled\n                  />\n                </Form.Group>\n                <Form.Group widths=\"equal\">\n                  <Form.Field\n                    id=\"document-detail-name-field\"\n                    control={Input}\n                    label=\"Document Name\"\n                    value={this.props.document.DOCUMENT_NAME}\n                    onChange={function(e, { value }) {\n                      this.props.setKeyValue(\"DOCUMENT_NAME\", value);\n                    }.bind(this)}\n                  />\n                </Form.Group>\n                <Form.Group widths=\"equal\">\n                  <Form.Field\n                    options={topicOptions}\n                    control={Select}\n                    label={{\n                      children: \"In Topic\",\n                      htmlFor: \"document-detail-topic-id\"\n                    }}\n                    value={this.props.document.TOPIC_ID}\n                    onChange={function(e, { value }) {\n                      this.props.setKeyValue(\"TOPIC_ID\", value);\n                    }.bind(this)}\n                  />\n                </Form.Group>\n                <Form.Group widths=\"equal\">\n                  <Form.Field\n                    id=\"document-detail-difficulty-field\"\n                    control={Input}\n                    label=\"Difficulty\"\n                    value={function() {\n                      if (isNaN(this.props.document.DIFFICULTY)) {\n                        return 0;\n                      } else {\n                        return this.props.document.DIFFICULTY;\n                      }\n                    }.bind(this)()}\n                    onChange={function(e, { value }) {\n                      var difficulty = parseInt(value);\n                      if (isNaN(difficulty) || difficulty < 1) {\n                        difficulty = 0;\n                      }\n                      this.props.setKeyValue(\"DIFFICULTY\", difficulty);\n                    }.bind(this)}\n                  />\n                  <Form.Field\n                    id=\"document-detail-pagenumber-field\"\n                    control={Input}\n                    label=\"Page Number\"\n                    value={function() {\n                      if (isNaN(this.props.document.PAGE_NUMBER)) {\n                        return 0;\n                      } else {\n                        return this.props.document.PAGE_NUMBER + 1;\n                      }\n                    }.bind(this)()}\n                    onChange={function(e, { value }) {\n                      var pageNumber = parseInt(value);\n                      if (isNaN(pageNumber) || pageNumber < 0) {\n                        pageNumber = 1;\n                      }\n                      this.props.setKeyValue(\"PAGE_NUMBER\", pageNumber - 1);\n                    }.bind(this)}\n                  />\n                </Form.Group>\n                <Form.Field\n                  id=\"document-detail-text-area\"\n                  control={TextArea}\n                  label=\"Introduction\"\n                  value={this.props.document.INTRODUCTION}\n                  onChange={function(e, { value }) {\n                    this.props.setKeyValue(\"INTRODUCTION\", value);\n                  }.bind(this)}\n                />\n                <Form.Field label=\"Document Image\"></Form.Field>\n                {this.props.document.IMAGE_URL ? (\n                  <Segment>\n                    <Image fluid src={this.props.document.IMAGE_URL} />\n                  </Segment>\n                ) : (\n                  \" \"\n                )}\n                {this.props.isUploading ? (\n                  <Progress\n                    color={\"grey\"}\n                    percent={this.props.progress}\n                    indicating\n                  />\n                ) : (\n                  <Form.Group>\n                    <label\n                      style={{\n                        backgroundColor: \"lightGrey\",\n                        color: \"black\",\n                        marginLeft: 8,\n                        padding: 8,\n                        paddingLeft: 16,\n                        paddingRight: 16,\n                        borderRadius: 4,\n                        cursor: \"pointer\"\n                      }}\n                    >\n                      <b>Upload an Image</b>\n                      <FileUploader\n                        accept=\"image/*\"\n                        name=\"document_image\"\n                        randomizeFilename\n                        hidden\n                        storageRef={firebase.storage().ref(\"images\")}\n                        onUploadStart={function() {\n                          this.props.uploadHelpers.handleUploadStart(\n                            this.props.document.id\n                          );\n                        }.bind(this)}\n                        onUploadError={\n                          this.props.uploadHelpers.handleUploadError\n                        }\n                        onUploadSuccess={function(filename) {\n                          this.props.uploadHelpers.handleUploadSuccess(\n                            1,\n                            this.props.document.id,\n                            filename\n                          );\n                        }.bind(this)}\n                        onProgress={this.props.uploadHelpers.handleProgress}\n                        disabled={this.props.isUploading}\n                      />\n                    </label>\n\n                    <Form.Field\n                      id=\"document-detail-remove-image\"\n                      control={Button}\n                      content=\"Remove Image\"\n                      color=\"red\"\n                      disabled={\n                        !this.props.document.IMAGE_URL || this.props.isUploading\n                      }\n                      onClick={function() {\n                        this.props.setKeyValue(\"IMAGE_URL\", null);\n                      }.bind(this)}\n                    />\n                  </Form.Group>\n                )}\n\n                <Form.Field\n                  id=\"step-detail-comform\"\n                  control={Button}\n                  content=\"Save\"\n                  primary\n                  disabled={\n                    !this.props.changed.has(this.props.document.id) ||\n                    this.props.isUploading\n                  }\n                  onClick={function() {\n                    this.props.uploadHelpers.update(1, this.props.document.id);\n                  }.bind(this)}\n                />\n              </Form>\n            </Table.Cell>\n          </Table.Row>\n        </Table.Body>\n      </Table>\n    );\n  }\n}\nexport default DocumentDetail;\n","import {\n  Table,\n  Form,\n  Image,\n  Input,\n  Select,\n  TextArea,\n  Button,\n  Segment,\n  Progress\n} from \"semantic-ui-react\";\nimport React from \"react\";\nimport FileUploader from \"react-firebase-file-uploader\";\nimport firebase from \"firebase\";\n\nclass TopicDetail extends React.Component {\n  constructor(props) {\n    super(props);\n  }\n\n  render() {\n    return (\n      <Table celled>\n        <Table.Header>\n          <Table.Row>\n            <Table.HeaderCell>{this.props.title}</Table.HeaderCell>\n          </Table.Row>\n        </Table.Header>\n\n        <Table.Body>\n          <Table.Row>\n            <Table.Cell>\n              <Form>\n                <Form.Group widths=\"equal\">\n                  <Form.Field\n                    id=\"topic-detail-id-field\"\n                    control={Input}\n                    label=\"Topic ID\"\n                    value={this.props.topic.id}\n                    disabled\n                  />\n                </Form.Group>\n                <Form.Group widths=\"equal\">\n                  <Form.Field\n                    id=\"step-detail-image-subtitle-field\"\n                    control={Input}\n                    label=\"Topic Name\"\n                    value={this.props.topic.TOPIC_NAME}\n                    onChange={function(e, { value }) {\n                      this.props.setKeyValue(\"TOPIC_NAME\", value);\n                    }.bind(this)}\n                  />\n                </Form.Group>\n                <Form.Group widths=\"equal\">\n                  <Form.Field\n                    id=\"step-detail-page-number-field\"\n                    control={Input}\n                    label=\"Page Number\"\n                    value={function() {\n                      if (isNaN(this.props.topic.PAGE_NUMBER)) {\n                        return 0;\n                      } else {\n                        return this.props.topic.PAGE_NUMBER + 1;\n                      }\n                    }.bind(this)()}\n                    onChange={function(e, { value }) {\n                      var pageNumber = parseInt(value);\n                      if (isNaN(pageNumber) || pageNumber < 0) {\n                        pageNumber = 1;\n                      }\n                      this.props.setKeyValue(\"PAGE_NUMBER\", pageNumber - 1);\n                    }.bind(this)}\n                  />\n                </Form.Group>\n                <Form.Field label=\"Topic Image\"></Form.Field>\n                {this.props.topic.IMAGE_URL ? (\n                  <Segment>\n                    <Image fluid src={this.props.topic.IMAGE_URL} />\n                  </Segment>\n                ) : (\n                  \" \"\n                )}\n                {this.props.isUploading ? (\n                  <Progress\n                    color={\"grey\"}\n                    percent={this.props.progress}\n                    indicating\n                  />\n                ) : (\n                  <Form.Group>\n                    <label\n                      style={{\n                        backgroundColor: \"lightGrey\",\n                        color: \"black\",\n                        marginLeft: 8,\n                        padding: 8,\n                        paddingLeft: 16,\n                        paddingRight: 16,\n                        borderRadius: 4,\n                        cursor: \"pointer\"\n                      }}\n                    >\n                      <b>Upload an Image</b>\n                      <FileUploader\n                        accept=\"image/*\"\n                        name=\"topic_image\"\n                        randomizeFilename\n                        hidden\n                        storageRef={firebase.storage().ref(\"images\")}\n                        onUploadStart={function() {\n                          this.props.uploadHelpers.handleUploadStart(\n                            this.props.topic.id\n                          );\n                        }.bind(this)}\n                        onUploadError={\n                          this.props.uploadHelpers.handleUploadError\n                        }\n                        onUploadSuccess={function(filename) {\n                          this.props.uploadHelpers.handleUploadSuccess(\n                            0,\n                            this.props.topic.id,\n                            filename\n                          );\n                        }.bind(this)}\n                        onProgress={this.props.uploadHelpers.handleProgress}\n                        disabled={this.props.isUploading}\n                      />\n                    </label>\n\n                    <Form.Field\n                      id=\"step-detail-remove-image\"\n                      control={Button}\n                      content=\"Remove Image\"\n                      color=\"red\"\n                      disabled={\n                        !this.props.topic.IMAGE_URL || this.props.isUploading\n                      }\n                      onClick={function() {\n                        this.props.setKeyValue(\"IMAGE_URL\", null);\n                      }.bind(this)}\n                    />\n                  </Form.Group>\n                )}\n\n                <Form.Field\n                  id=\"step-detail-comform\"\n                  control={Button}\n                  content=\"Save\"\n                  primary\n                  disabled={\n                    !this.props.changed.has(this.props.topic.id) ||\n                    this.props.isUploading\n                  }\n                  onClick={function() {\n                    this.props.uploadHelpers.update(0, this.props.topic.id);\n                  }.bind(this)}\n                />\n              </Form>\n            </Table.Cell>\n          </Table.Row>\n        </Table.Body>\n      </Table>\n    );\n  }\n}\nexport default TopicDetail;\n","import { Card, Segment, Icon, Image } from \"semantic-ui-react\";\nimport React from \"react\";\nimport StepDetail from \"./stepDetail\";\nimport DocumentDetail from \"./documentDetail\";\nimport TopicDetail from \"./topicDetail\";\nclass HomeDetail extends React.Component {\n  constructor(props) {\n    super(props);\n  }\n  render() {\n    if (this.props.topicSelected) {\n      if (this.props.documentSelected) {\n        if (this.props.stepSelected) {\n          return (\n            <StepDetail\n              step={this.props.lists.stepList[this.props.stepSelected]}\n              stepCount={\n                this.props.filterStepList(this.props.documentSelected).length\n              }\n              title={`${this.props.lists.documentList[this.props.documentSelected].DOCUMENT_NAME} - Step ${this.props.lists.stepList[this.props.stepSelected].PAGE_NUMBER}`}\n              changed={this.props.changed}\n              uploadHelpers={this.props.uploadHelpers}\n              setKeyValue={function(key, value) {\n                this.props.setKeyValue(\n                  2,\n                  this.props.stepSelected,\n                  this.props.documentSelected,\n                  key,\n                  value\n                );\n              }.bind(this)}\n              isUploading={this.props.isUploading}\n              progress={this.props.progress}\n              documentList={this.props.lists.documentList}\n              topicList={this.props.lists.topicList}\n            />\n          );\n        } else {\n          return (\n            <DocumentDetail\n              document={\n                this.props.lists.documentList[this.props.documentSelected]\n              }\n              changed={this.props.changed}\n              title={`${this.props.lists.documentList[this.props.documentSelected].DOCUMENT_NAME}`}\n              uploadHelpers={this.props.uploadHelpers}\n              setKeyValue={function(key, value) {\n                this.props.setKeyValue(\n                  1,\n                  this.props.documentSelected,\n                  this.props.topicSelected,\n                  key,\n                  value\n                );\n              }.bind(this)}\n              isUploading={this.props.isUploading}\n              progress={this.props.progress}\n              topicList={this.props.lists.topicList}\n            />\n          );\n        }\n      } else {\n        return (\n          <TopicDetail\n            topic={this.props.lists.topicList[this.props.topicSelected]}\n            changed={this.props.changed}\n            uploadHelpers={this.props.uploadHelpers}\n            title={`${this.props.lists.topicList[this.props.topicSelected].TOPIC_NAME}`}\n            setKeyValue={function(key, value) {\n              this.props.setKeyValue(\n                0,\n                this.props.topicSelected,\n                null,\n                key,\n                value\n              );\n            }.bind(this)}\n            isUploading={this.props.isUploading}\n            progress={this.props.progress}\n          />\n        );\n      }\n    } else {\n      return (\n        <Segment disabled textAlign=\"center\">\n          Select anything on the left\n        </Segment>\n      );\n    }\n  }\n}\nexport default HomeDetail;\n","import React from \"react\";\nimport firebase from \"firebase\";\nimport ItemTable from \"./itemTable\";\nimport { Redirect } from \"react-router-dom\";\nimport { Grid, Segment } from \"semantic-ui-react\";\nimport HomeDetail from \"./HomeDetail\";\nclass Home extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      user: firebase.auth().currentUser,\n      admin: false,\n      topic: null,\n      document: null,\n      step: null,\n      edit: false\n    };\n\n    firebase.auth().onAuthStateChanged(\n      function(user) {\n        if (user) {\n          this.setState({ user: user });\n          if (user.email) {\n            this.setState({\n              admin:\n                firebase.auth().currentUser.email === \"yinluke@gmail.com\" ||\n                firebase.auth().currentUser.email === \"patelks2394@gmail.com\" ||\n                firebase.auth().currentUser.email === \"yinaiguo@gmail.com\"\n            });\n          }\n        } else {\n          this.setState({ user: null });\n        }\n      }.bind(this)\n    );\n    this.filterDocumentList = this.filterDocumentList.bind(this);\n    this.filterStepList = this.filterStepList.bind(this);\n  }\n  filterDocumentList(id) {\n    return Object.values(this.props.lists.documentList).filter(function(doc) {\n      return doc.TOPIC_ID === id;\n    });\n  }\n\n  filterStepList(id) {\n    return Object.values(this.props.lists.stepList).filter(function(step) {\n      return step.DOCUMENT_ID === id;\n    });\n  }\n\n  render() {\n    if (!this.state.user) {\n      return <Redirect to=\"/\" />;\n    }\n\n    if (!this.state.admin) {\n      return (\n        <div style={{ margin: \"4em\" }}>\n          <Segment>\n            {this.state.user.displayName} is not an administrator\n          </Segment>\n        </div>\n      );\n    }\n\n    return (\n      <div>\n        <Grid container stackable columns=\"equal\" verticalAlign=\"top\">\n          <Grid.Row stretched style={{ marginTop: \"4em\" }}>\n            <Grid.Column>\n              <ItemTable\n                selected={this.props.topicSelected}\n                setSelected={id => this.props.setSelected(0, id)}\n                items={Object.values(this.props.lists.topicList).sort(function(\n                  a,\n                  b\n                ) {\n                  if (a.PAGE_NUMBER < b.PAGE_NUMBER) {\n                    return -1;\n                  }\n                  if (a.PAGE_NUMBER > b.PAGE_NUMBER) {\n                    return 1;\n                  }\n                  if (a.created < b.created) {\n                    return -1;\n                  }\n                  if (a.created > b.created) {\n                    return 1;\n                  }\n                  return 0;\n                })}\n                title={\"Topics\"}\n                add={() => this.props.add(0, null)}\n                loading={false}\n                type={0}\n                changed={this.props.changed}\n                isUploading={this.props.isUploading}\n                progress={this.props.progress}\n              />\n            </Grid.Column>\n\n            {this.props.topicSelected ? (\n              <Grid.Column>\n                <ItemTable\n                  selected={this.props.documentSelected}\n                  setSelected={id => this.props.setSelected(1, id)}\n                  items={this.filterDocumentList(this.props.topicSelected).sort(\n                    function(a, b) {\n                      if (a.PAGE_NUMBER < b.PAGE_NUMBER) {\n                        return -1;\n                      }\n                      if (a.PAGE_NUMBER > b.PAGE_NUMBER) {\n                        return 1;\n                      }\n                      if (a.created < b.created) {\n                        return -1;\n                      }\n                      if (a.created > b.created) {\n                        return 1;\n                      }\n                      return 0;\n                    }\n                  )}\n                  title={\n                    this.props.lists.topicList[this.props.topicSelected]\n                      ? this.props.lists.topicList[this.props.topicSelected]\n                          .TOPIC_NAME\n                      : \"Docuemnt\"\n                  }\n                  add={parent => this.props.add(1, this.props.topicSelected)}\n                  loading={false}\n                  type={1}\n                  changed={this.props.changed}\n                  isUploading={this.props.isUploading}\n                  progress={this.props.progress}\n                />\n              </Grid.Column>\n            ) : (\n              \" \"\n            )}\n\n            {this.props.documentSelected ? (\n              <Grid.Column>\n                <ItemTable\n                  selected={this.props.stepSelected}\n                  setSelected={id => this.props.setSelected(2, id)}\n                  items={this.filterStepList(this.props.documentSelected).sort(\n                    function(a, b) {\n                      if (a.PAGE_NUMBER < b.PAGE_NUMBER) {\n                        return -1;\n                      }\n                      if (a.PAGE_NUMBER > b.PAGE_NUMBER) {\n                        return 1;\n                      }\n                      return 0;\n                    }\n                  )}\n                  title={\n                    this.props.lists.documentList[this.props.documentSelected]\n                      .DOCUMENT_NAME\n                  }\n                  add={parent => this.props.add(2, this.props.documentSelected)}\n                  loading={false}\n                  type={2}\n                  changed={this.props.changed}\n                  isUploading={this.props.isUploading}\n                  progress={this.props.progress}\n                />\n              </Grid.Column>\n            ) : (\n              \" \"\n            )}\n\n            <Grid.Column width={8}>\n              <HomeDetail\n                topicSelected={this.props.topicSelected}\n                documentSelected={this.props.documentSelected}\n                stepSelected={this.props.stepSelected}\n                lists={this.props.lists}\n                add={this.props.add}\n                filterStepList={this.filterStepList}\n                changed={this.props.changed}\n                setKeyValue={this.props.setKeyValue}\n                uploadHelpers={this.props.uploadHelpers}\n                isUploading={this.props.isUploading}\n                progress={this.props.progress}\n              />\n            </Grid.Column>\n          </Grid.Row>\n        </Grid>\n      </div>\n    );\n  }\n}\nexport default Home;\n","import React from \"react\";\nimport sharedFirebase from \"./firebase\";\nimport firebase from \"firebase\";\nimport { BrowserRouter as Router, Route } from \"react-router-dom\";\nimport Navigation from \"../Navigation\";\nimport LoginPage from \"../Login\";\nimport HomePage from \"../Home\";\nimport * as ROUTES from \"../../constants/routes\";\nclass App extends React.Component {\n  constructor(prop) {\n    super(prop);\n    this.state = {\n      topic: null,\n      document: null,\n      step: null,\n      topicList: {},\n      stepList: {},\n      documentList: {},\n\n      currentVersion: null,\n      changed: new Set(),\n      isUploading: null,\n      progress: 0\n    };\n\n    this.setSelected = this.setSelected.bind(this);\n    this.load = this.load.bind(this);\n    this.add = this.add.bind(this);\n    this.setKeyValue = this.setKeyValue.bind(this);\n    this.uploadHelpers = {\n      handleUploadStart: this.handleUploadStart.bind(this),\n      handleProgress: this.handleProgress.bind(this),\n      handleUploadError: this.handleUploadError.bind(this),\n      handleUploadSuccess: this.handleUploadSuccess.bind(this),\n      update: this.update.bind(this)\n    };\n\n    //firebase setup\n\n    this.db = sharedFirebase.firestore();\n    this.load();\n  }\n\n  handleUploadStart(id) {\n    this.setState({ isUploading: id, progress: 0 });\n  }\n  handleProgress(progress) {\n    this.setState({ progress });\n  }\n  handleUploadError(error) {\n    this.setState({ isUploading: null });\n    window.alert(error);\n  }\n  handleUploadSuccess(collection, id, filename) {\n    firebase\n      .storage()\n      .ref(\"images\")\n      .child(filename)\n      .getDownloadURL()\n      .then(\n        function(url) {\n          var _changed = this.state.changed;\n          _changed.add(id);\n          switch (collection) {\n            case 0:\n              if (this.state.topicList[id]) {\n                var _topicList = this.state.topicList;\n                _topicList[id].IMAGE_URL = url;\n                this.setState({\n                  topicList: _topicList,\n                  progress: 100,\n                  isUploading: null,\n                  changed: _changed\n                });\n              }\n            case 1:\n              if (this.state.documentList[id]) {\n                var _documentList = this.state.documentList;\n                _documentList[id].IMAGE_URL = url;\n                this.setState({\n                  documentList: _documentList,\n                  progress: 100,\n                  isUploading: null,\n                  changed: _changed\n                });\n              }\n            default:\n              if (this.state.stepList[id]) {\n                var _stepList = this.state.stepList;\n                _stepList[id].IMAGE_URL = url;\n                this.setState({\n                  stepList: _stepList,\n                  progress: 100,\n                  isUploading: null,\n                  changed: _changed\n                });\n              }\n          }\n        }.bind(this)\n      );\n  }\n\n  setSelected(collection, id) {\n    switch (collection) {\n      case 0:\n        if (Object.keys(this.state.topicList).includes(id)) {\n          console.log(1);\n          this.setState({ topic: id, document: null, step: null });\n        } else {\n          console.log(2);\n          this.setState({ topic: null, document: null, step: null });\n        }\n\n        break;\n      case 1:\n        if (Object.keys(this.state.documentList).includes(id)) {\n          var topicID = this.state.documentList[id].TOPIC_ID;\n          if (Object.keys(this.state.topicList).includes(topicID)) {\n            console.log(3);\n            this.setState({ topic: topicID, document: id, step: null });\n          } else {\n            console.log(4);\n            this.setState({ topic: null, document: null, step: null });\n          }\n        } else {\n          console.log(5);\n          this.setState({ document: null, step: null });\n        }\n        break;\n      default:\n        if (Object.keys(this.state.stepList).includes(id)) {\n          var documentID = this.state.stepList[id].DOCUMENT_ID;\n          if (Object.keys(this.state.documentList).includes(documentID)) {\n            var topicID = this.state.documentList[documentID].TOPIC_ID;\n            if (Object.keys(this.state.topicList).includes(topicID)) {\n              this.setState({ topic: topicID, document: documentID, step: id });\n            } else {\n              console.log(6);\n              this.setState({ topic: null, document: null, step: null });\n            }\n          } else {\n            console.log(7);\n            this.setState({ document: null, step: null });\n          }\n        } else {\n          console.log(8, this.state.stepList, id);\n          this.setState({ step: null });\n        }\n    }\n  }\n\n  setKeyValue(collection, document, parent, key, value) {\n    var collectionName = \"TOPIC\";\n    var _changed = this.state.changed;\n\n    console.log(\"setKeyValue\", this.state.stepList[document]);\n\n    switch (collection) {\n      case 0:\n        collectionName = \"TOPIC\";\n        //this topic dosen't exist\n        if (!this.state.topicList[document]) {\n          return;\n        }\n\n        //get copy of the whole topicList\n        var _topicList = this.state.topicList;\n\n        //change the key-value\n        _topicList[document][key] = value;\n\n        //add id to changed list\n        _changed.add(document);\n\n        this.setState({\n          topicList: _topicList,\n          changed: _changed\n        });\n\n        break;\n      case 1:\n        collectionName = \"DOCUMENT\";\n\n        //this document dosen't exist\n        if (!this.state.documentList[document]) {\n          return;\n        }\n\n        //get copy of the whole documentList\n        var _documentList = this.state.documentList;\n\n        var _topic = this.state.topic;\n\n        //If change the topic id, make sure it's exist\n        if (key === \"TOPIC_ID\") {\n          if (!this.state.topicList[value]) {\n            return;\n          }\n          console.log(\"_topic 1\", _topic, value);\n          _topic = value;\n          console.log(\"_topic 2\", _topic, value);\n        }\n\n        //change the key-value\n        _documentList[document][key] = value;\n\n        //add id to changed list\n        _changed.add(document);\n\n        console.log(\"_topic 3\", _topic, key, value);\n\n        this.setState({\n          documentList: _documentList,\n          changed: _changed,\n          topic: _topic\n        });\n\n        break;\n      default:\n        collectionName = \"STEP\";\n\n        //this step dosen't exist\n        if (!this.state.stepList[document]) {\n          return;\n        }\n\n        //get copy of the whole stepList\n        var _stepList = this.state.stepList;\n\n        var _document = this.state.document;\n        var _topic = this.state.topic;\n        //If change the document id, make sure it's exist\n        if (key === \"DOCUMENT_ID\") {\n          if (!this.state.documentList[value]) {\n            return;\n          }\n          if (\n            !this.state.topicList[this.state.documentList[value][\"TOPIC_ID\"]]\n          ) {\n            return;\n          }\n          _document = value;\n          _topic = this.state.documentList[value][\"TOPIC_ID\"];\n        }\n\n        //change the key-value\n        _stepList[document][key] = value;\n\n        //add id to changed list\n        _changed.add(document);\n\n        this.setState({\n          stepList: _stepList,\n          changed: _changed,\n          document: _document,\n          topic: _topic\n        });\n\n        console.log(\"setKeyValue\", this.state.stepList[document]);\n    }\n  }\n\n  add(collection, parent) {\n    var collectionName = \"TOPIC\";\n    var item = null;\n    switch (collection) {\n      case 0:\n        collectionName = \"TOPIC\";\n        item = {\n          IMAGE_URL: null,\n          TOPIC_NAME: \"New Topic\",\n          created: new Date().getTime()\n        };\n        break;\n      case 1:\n        collectionName = \"DOCUMENT\";\n        item = {\n          DIFFICULTY: 1,\n          DOCUMENT_NAME: \"New Document\",\n          IMAGE_URL: null,\n          INTRODUCTION: \"Add Introduction Here ...\",\n          TOPIC_ID: parent,\n          available_scope: 10,\n          created: new Date().getTime()\n        };\n        break;\n      default:\n        collectionName = \"STEP\";\n        item = {\n          AUTO_ANIMATION: 1,\n          DOCUMENT_ID: parent,\n          IMAGE_SUBTITLE: \"Subtitle\",\n          IMAGE_URL: null,\n          TEXT: \"Add Text Here ...\",\n          PAGE_NUMBER: Object.values(this.state.stepList).filter(function(\n            step\n          ) {\n            return step.DOCUMENT_ID === parent;\n          }).length,\n          created: new Date().getTime()\n        };\n    }\n    this.db\n      .collection(collectionName)\n      .add(item)\n      .then(\n        function(docRef) {\n          item.id = docRef.id;\n          this.db\n            .collection(\"var\")\n            .doc(\"db_version\")\n            .set({ value: this.state.currentVersion + 1 });\n          switch (collection) {\n            case 0:\n              var _topicList = this.state.topicList;\n              _topicList[docRef.id] = item;\n              this.setState({ topic: docRef.id, topicList: _topicList });\n              break;\n            case 1:\n              var _documentList = this.state.documentList;\n              _documentList[docRef.id] = item;\n              this.setState({\n                document: docRef.id,\n                documentList: _documentList\n              });\n              break;\n            default:\n              var _stepList = this.state.stepList;\n              _stepList[docRef.id] = item;\n              this.setState({ step: docRef.id, stepList: _stepList });\n          }\n        }.bind(this)\n      );\n  }\n\n  update(collection, document) {\n    console.trace(\"update\");\n    var collectionName = \"TOPIC\";\n    var item = null;\n    switch (collection) {\n      case 0:\n        collectionName = \"TOPIC\";\n        item = this.state.topicList[document];\n        break;\n      case 1:\n        collectionName = \"DOCUMENT\";\n        item = this.state.documentList[document];\n        break;\n      default:\n        collectionName = \"STEP\";\n        item = this.state.stepList[document];\n    }\n    console.trace(\"update\", item);\n    if (item) {\n      this.db\n        .collection(collectionName)\n        .doc(document)\n        .set(item)\n        .then(\n          function() {\n            this.db\n              .collection(\"var\")\n              .doc(\"db_version\")\n              .set({ value: this.state.currentVersion + 1 });\n\n            var _changed = this.state.changed;\n            _changed.delete(document);\n            this.setState({ changed: _changed });\n          }.bind(this)\n        );\n    }\n  }\n\n  load() {\n    console.log(\"load\");\n    var topicList = {};\n    var stepList = {};\n    var documentList = {};\n\n    Promise.all([\n      this.db.collection(\"TOPIC\").get(),\n      this.db.collection(\"DOCUMENT\").get(),\n      this.db.collection(\"STEP\").get()\n    ]).then(\n      function([topicSnapshots, documentSnapshots, stepSnapshots]) {\n        topicSnapshots.forEach(doc => {\n          var thisDoc = doc.data();\n          if (thisDoc.hidden != true) {\n            thisDoc.id = doc.id;\n            topicList[doc.id] = thisDoc;\n          }\n        });\n        documentSnapshots.forEach(doc => {\n          var thisDoc = doc.data();\n          if (thisDoc.hidden != true) {\n            thisDoc.id = doc.id;\n            documentList[doc.id] = thisDoc;\n          }\n        });\n        stepSnapshots.forEach(doc => {\n          var thisDoc = doc.data();\n          if (thisDoc.hidden != true) {\n            thisDoc.id = doc.id;\n            stepList[doc.id] = thisDoc;\n          }\n        });\n\n        this.setState({\n          topicList: topicList,\n          documentList: documentList,\n          stepList: stepList,\n          changed: new Set()\n        });\n      }.bind(this)\n    );\n  }\n\n  render() {\n    var imageURL =\n      \"https://firebasestorage.googleapis.com/v0/b/cell-app.appspot.com/o/bkimg?alt=media&token=4ea31dfb-89c0-4738-913f-066ab55c21f1\";\n    return (\n      <Router>\n        <div>\n          <Navigation />\n          <hr />\n          <Route exact path={ROUTES.LOGIN} render={props => <LoginPage />} />\n          <Route\n            path={ROUTES.HOME}\n            render={props => (\n              <HomePage\n                style={{ backgroundImage: `url(${imageURL})` }}\n                setSelected={this.setSelected}\n                topicSelected={this.state.topic}\n                documentSelected={this.state.document}\n                stepSelected={this.state.step}\n                lists={{\n                  topicList: this.state.topicList,\n                  documentList: this.state.documentList,\n                  stepList: this.state.stepList\n                }}\n                update={this.update}\n                load={this.load}\n                add={this.add}\n                setKeyValue={this.setKeyValue}\n                changed={this.state.changed}\n                uploadHelpers={this.uploadHelpers}\n                isUploading={this.state.isUploading}\n                progress={this.state.progress}\n              />\n            )}\n          />\n        </div>\n      </Router>\n    );\n  }\n}\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport * as serviceWorker from \"./serviceWorker\";\nimport \"semantic-ui-css/semantic.min.css\";\n\nimport App from \"./components/App\";\n\nimport { Responsive } from \"semantic-ui-react\";\n\nwindow.onbeforeunload = function(e) {\n  console.log(\"onbeforeunload\");\n\n  // Cancel the event\n  e.preventDefault();\n\n  // Chrome requires returnValue to be set\n  e.returnValue = \"Really want to quit the game?\";\n};\n\n//Prevent Ctrl+S (and Ctrl+W for old browsers and Edge)\ndocument.onkeydown = function(e) {\n  e = e || window.event; //Get event\n\n  if (!e.ctrlKey) return;\n\n  var code = e.which || e.keyCode; //Get key code\n\n  switch (code) {\n    case 83: //Block Ctrl+S\n    case 87: //Block Ctrl+W -- Not work in Chrome and new Firefox\n      e.preventDefault();\n      e.stopPropagation();\n      break;\n  }\n};\n\nReactDOM.render(\n  <Responsive>\n    <App />\n  </Responsive>,\n  document.getElementById(\"root\")\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}